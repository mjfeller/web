<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>implemented the stuff as I discussed on dwm@ - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/2e958372200065bff8f19ca88d39e627df4a2f67.html">2e958372200065bff8f19ca88d39e627df4a2f67</a>
<b>parent</b> <a href="../commit/5d9ae3f3b7ad904218add1c2559eec9a7a073e3e.html">5d9ae3f3b7ad904218add1c2559eec9a7a073e3e</a>
<b>Author:</b> Anselm R Garbe &lt;<a href="mailto:garbeam@gmail.com">garbeam@gmail.com</a>&gt;
<b>Date:</b>   Wed,  5 Mar 2008 18:31:08 +0000

implemented the stuff as I discussed on dwm@
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.def.h</a></td><td> | </td><td class="num">61</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">config.mk</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">dwm.1</a></td><td> | </td><td class="num">15</td><td><span class="i">++++++</span><span class="d">---------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">dwm.c</a></td><td> | </td><td class="num">269</td><td><span class="i">++++++++++++++++++</span><span class="d">-------------------------------------------------------------</span></td></tr>
</table></pre><pre>4 files changed, 124 insertions(+), 225 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.def.h.html">config.def.h</a> b/<a href="../file/config.def.h.html">config.def.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,7 +1,6 @@
</a> /* See LICENSE file for copyright and license details. */
 
 /* appearance */
<a href="#h0-0-3" id="h0-0-3" class="d">-#define BARPOS			BarTop /* BarBot, BarOff */
</a> #define BORDERPX		1
 #define FONT			&quot;-*-terminus-medium-r-normal-*-14-*-*-*-*-*-*-*&quot;
 #define NORMBORDERCOLOR		&quot;#cccccc&quot;
<a href="#h0-1" id="h0-1" class="h">@@ -11,6 +10,58 @@
</a> #define SELBGCOLOR		&quot;#0066ff&quot;
 #define SELFGCOLOR		&quot;#ffffff&quot;
 
<a href="#h0-1-3" id="h0-1-3" class="i">+#if WORK
</a><a href="#h0-1-4" id="h0-1-4" class="i">+
</a><a href="#h0-1-5" id="h0-1-5" class="i">+/* bar position */
</a><a href="#h0-1-6" id="h0-1-6" class="i">+#define BX 0
</a><a href="#h0-1-7" id="h0-1-7" class="i">+#define BY 0
</a><a href="#h0-1-8" id="h0-1-8" class="i">+#define BW 1280
</a><a href="#h0-1-9" id="h0-1-9" class="i">+
</a><a href="#h0-1-10" id="h0-1-10" class="i">+/* master area */
</a><a href="#h0-1-11" id="h0-1-11" class="i">+#define MX 0
</a><a href="#h0-1-12" id="h0-1-12" class="i">+#define MY bh
</a><a href="#h0-1-13" id="h0-1-13" class="i">+#define MW 1280
</a><a href="#h0-1-14" id="h0-1-14" class="i">+#define MH 800 - bh
</a><a href="#h0-1-15" id="h0-1-15" class="i">+
</a><a href="#h0-1-16" id="h0-1-16" class="i">+/* tile area, might be on a different screen */
</a><a href="#h0-1-17" id="h0-1-17" class="i">+#define TX 1280
</a><a href="#h0-1-18" id="h0-1-18" class="i">+#define TY 0
</a><a href="#h0-1-19" id="h0-1-19" class="i">+#define TW 1680
</a><a href="#h0-1-20" id="h0-1-20" class="i">+#define TH 1050
</a><a href="#h0-1-21" id="h0-1-21" class="i">+
</a><a href="#h0-1-22" id="h0-1-22" class="i">+/* monocle area, might be restricted to a specific screen */
</a><a href="#h0-1-23" id="h0-1-23" class="i">+#define MOX MX
</a><a href="#h0-1-24" id="h0-1-24" class="i">+#define MOY MY
</a><a href="#h0-1-25" id="h0-1-25" class="i">+#define MOW MW
</a><a href="#h0-1-26" id="h0-1-26" class="i">+#define MOH MH
</a><a href="#h0-1-27" id="h0-1-27" class="i">+
</a><a href="#h0-1-28" id="h0-1-28" class="i">+#else
</a><a href="#h0-1-29" id="h0-1-29" class="i">+
</a><a href="#h0-1-30" id="h0-1-30" class="i">+/* bar position */
</a><a href="#h0-1-31" id="h0-1-31" class="i">+#define BX sx
</a><a href="#h0-1-32" id="h0-1-32" class="i">+#define BY sy
</a><a href="#h0-1-33" id="h0-1-33" class="i">+#define BW sw
</a><a href="#h0-1-34" id="h0-1-34" class="i">+
</a><a href="#h0-1-35" id="h0-1-35" class="i">+/* master area */
</a><a href="#h0-1-36" id="h0-1-36" class="i">+#define MX sx
</a><a href="#h0-1-37" id="h0-1-37" class="i">+#define MY sy + bh
</a><a href="#h0-1-38" id="h0-1-38" class="i">+#define MW ((int)(((float)sw) * 0.6))
</a><a href="#h0-1-39" id="h0-1-39" class="i">+#define MH sh - bh
</a><a href="#h0-1-40" id="h0-1-40" class="i">+
</a><a href="#h0-1-41" id="h0-1-41" class="i">+/* tile area, might be on a different screen */
</a><a href="#h0-1-42" id="h0-1-42" class="i">+#define TX sx + MW
</a><a href="#h0-1-43" id="h0-1-43" class="i">+#define TY MY
</a><a href="#h0-1-44" id="h0-1-44" class="i">+#define TW sw - MW
</a><a href="#h0-1-45" id="h0-1-45" class="i">+#define TH MH
</a><a href="#h0-1-46" id="h0-1-46" class="i">+
</a><a href="#h0-1-47" id="h0-1-47" class="i">+/* monocle area, might be restricted to a specific screen */
</a><a href="#h0-1-48" id="h0-1-48" class="i">+#define MOX sx
</a><a href="#h0-1-49" id="h0-1-49" class="i">+#define MOY MY
</a><a href="#h0-1-50" id="h0-1-50" class="i">+#define MOW sw
</a><a href="#h0-1-51" id="h0-1-51" class="i">+#define MOH MH
</a><a href="#h0-1-52" id="h0-1-52" class="i">+
</a><a href="#h0-1-53" id="h0-1-53" class="i">+#endif
</a><a href="#h0-1-54" id="h0-1-54" class="i">+
</a> /* tagging */
 const char tags[][MAXTAGLEN] = { &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot; };
 
<a href="#h0-2" id="h0-2" class="h">@@ -23,7 +74,6 @@ Rule rules[] = {
</a> };
 
 /* layout(s) */
<a href="#h0-2-3" id="h0-2-3" class="d">-#define MWFACT			0.6	/* master width factor [0.1 .. 0.9] */
</a> #define RESIZEHINTS		True	/* False - respect size hints in tiled resizals */
 #define SNAP			32	/* snap pixel */
 
<a href="#h0-3" id="h0-3" class="h">@@ -41,15 +91,14 @@ Key keys[] = {
</a> 	{ MODKEY,			XK_p,		spawn,
 		&quot;exec dmenu_run -fn &#39;&quot;FONT&quot;&#39; -nb &#39;&quot;NORMBGCOLOR&quot;&#39; -nf &#39;&quot;NORMFGCOLOR&quot;&#39; -sb &#39;&quot;SELBGCOLOR&quot;&#39; -sf &#39;&quot;SELFGCOLOR&quot;&#39;&quot; },
 	{ MODKEY|ShiftMask,		XK_Return,	spawn, &quot;exec uxterm&quot; },
<a href="#h0-3-3" id="h0-3-3" class="d">-	{ MODKEY,			XK_b,		togglebar,	NULL },
</a> 	{ MODKEY,			XK_j,		focusnext,	NULL },
 	{ MODKEY,			XK_k,		focusprev,	NULL },
<a href="#h0-3-6" id="h0-3-6" class="d">-	{ MODKEY,			XK_h,		setmwfact,	&quot;-0.05&quot; },
</a><a href="#h0-3-7" id="h0-3-7" class="d">-	{ MODKEY,			XK_l,		setmwfact,	&quot;+0.05&quot; },
</a> 	{ MODKEY,			XK_r,		reapply,	NULL },
 	{ MODKEY,			XK_Return,	zoom,		NULL },
 	{ MODKEY,			XK_Tab,		viewprevtag,	NULL },
<a href="#h0-3-11" id="h0-3-11" class="d">-	{ MODKEY,			XK_space,	setlayout,	NULL },
</a><a href="#h0-3-12" id="h0-3-12" class="i">+	{ MODKEY,			XK_m,		setlayout,	&quot;[M]&quot; },
</a><a href="#h0-3-13" id="h0-3-13" class="i">+	{ MODKEY,			XK_f,		setlayout,	&quot;&gt;&lt;&gt;&quot; },
</a><a href="#h0-3-14" id="h0-3-14" class="i">+	{ MODKEY,			XK_t,		setlayout,	&quot;[]=&quot; },
</a> 	{ MODKEY|ShiftMask,		XK_space,	togglefloating,	NULL },
 	{ MODKEY|ShiftMask,		XK_c,		killclient,	NULL },
 	{ MODKEY,			XK_0,		view,		NULL },
<b>diff --git a/<a id="h1" href="../file/config.mk.html">config.mk</a> b/<a href="../file/config.mk.html">config.mk</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -12,12 +12,12 @@ X11LIB = /usr/X11R6/lib
</a> 
 # includes and libs
 INCS = -I. -I/usr/include -I${X11INC}
<a href="#h1-0-3" id="h1-0-3" class="d">-LIBS = -L/usr/lib -lc -L${X11LIB} -lX11 -lXinerama
</a><a href="#h1-0-4" id="h1-0-4" class="i">+LIBS = -L/usr/lib -lc -L${X11LIB} -lX11
</a> 
 # flags
 CFLAGS = -Os ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
 LDFLAGS = -s ${LIBS}
<a href="#h1-0-9" id="h1-0-9" class="d">-CFLAGS = -g -std=c99 -pedantic -Wall -O2 ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
</a><a href="#h1-0-10" id="h1-0-10" class="i">+CFLAGS = -g -std=c99 -pedantic -Wall -O2 ${INCS} -DVERSION=\&quot;${VERSION}\&quot; -DWORK
</a> LDFLAGS = -g ${LIBS}
 
 # Solaris
<b>diff --git a/<a id="h2" href="../file/dwm.1.html">dwm.1</a> b/<a href="../file/dwm.1.html">dwm.1</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -63,14 +63,14 @@ Zooms/cycles current window to/from master area (tiled layout only).
</a> .B Mod1\-Tab
 Toggles to the previously selected tags.
 .TP
<a href="#h2-0-3" id="h2-0-3" class="d">-.B Mod1\-space
</a><a href="#h2-0-4" id="h2-0-4" class="d">-Toggles between layouts.
</a><a href="#h2-0-5" id="h2-0-5" class="i">+.B Mod1\-f
</a><a href="#h2-0-6" id="h2-0-6" class="i">+Apply floating layout.
</a> .TP
<a href="#h2-0-8" id="h2-0-8" class="d">-.B Mod1\-b
</a><a href="#h2-0-9" id="h2-0-9" class="d">-Shows/hides the status bar.
</a><a href="#h2-0-10" id="h2-0-10" class="i">+.B Mod1\-m
</a><a href="#h2-0-11" id="h2-0-11" class="i">+Apply monocle layout.
</a> .TP
<a href="#h2-0-13" id="h2-0-13" class="d">-.B Mod1\-h
</a><a href="#h2-0-14" id="h2-0-14" class="d">-Decreases the master area width about 5% (tiled layout only).
</a><a href="#h2-0-15" id="h2-0-15" class="i">+.B Mod1\-t
</a><a href="#h2-0-16" id="h2-0-16" class="i">+Apply tiled layout.
</a> .TP
 .B Mod1\-j
 Focus next window.
<a href="#h2-1" id="h2-1" class="h">@@ -78,9 +78,6 @@ Focus next window.
</a> .B Mod1\-k
 Focus previous window.
 .TP
<a href="#h2-1-3" id="h2-1-3" class="d">-.B Mod1\-l
</a><a href="#h2-1-4" id="h2-1-4" class="d">-Increases the master area width about 5% (tiled layout only).
</a><a href="#h2-1-5" id="h2-1-5" class="d">-.TP
</a> .B Mod1\-r
 Re-applies tagging rules to all windows.
 .TP
<b>diff --git a/<a id="h3" href="../file/dwm.c.html">dwm.c</a> b/<a href="../file/dwm.c.html">dwm.c</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -40,24 +40,6 @@
</a> #include &lt;X11/Xlib.h&gt;
 #include &lt;X11/Xproto.h&gt;
 #include &lt;X11/Xutil.h&gt;
<a href="#h3-0-3" id="h3-0-3" class="d">-/*
</a><a href="#h3-0-4" id="h3-0-4" class="d">- * TODO: Idea:
</a><a href="#h3-0-5" id="h3-0-5" class="d">- * I intend to not provide real Xinerama support, but instead having a Column
</a><a href="#h3-0-6" id="h3-0-6" class="d">- * tilecols[] array which is used by tile(), and a Column maxcols[] arrays which is used by
</a><a href="#h3-0-7" id="h3-0-7" class="d">- * monocle(). Those arrays should be initialized in config.h. For simplicity
</a><a href="#h3-0-8" id="h3-0-8" class="d">- * reasons mwfact should be replaced with a more advanced method which
</a><a href="#h3-0-9" id="h3-0-9" class="d">- * implements the same, but using the boundary between tilecols[0] and
</a><a href="#h3-0-10" id="h3-0-10" class="d">- * tilecols[1] instead. Besides this, get rid of BARPOS and use instead the
</a><a href="#h3-0-11" id="h3-0-11" class="d">- * following mechanism:
</a><a href="#h3-0-12" id="h3-0-12" class="d">- *
</a><a href="#h3-0-13" id="h3-0-13" class="d">- * #define BX 0
</a><a href="#h3-0-14" id="h3-0-14" class="d">- * #define BY 0
</a><a href="#h3-0-15" id="h3-0-15" class="d">- * #define BW sw
</a><a href="#h3-0-16" id="h3-0-16" class="d">- * bh is calculated automatically and should be used for the 
</a><a href="#h3-0-17" id="h3-0-17" class="d">- */
</a><a href="#h3-0-18" id="h3-0-18" class="d">-//#ifdef XINERAMA
</a><a href="#h3-0-19" id="h3-0-19" class="d">-#include &lt;X11/extensions/Xinerama.h&gt;
</a><a href="#h3-0-20" id="h3-0-20" class="d">-//#endif
</a> 
 /* macros */
 #define BUTTONMASK		(ButtonPressMask|ButtonReleaseMask)
<a href="#h3-1" id="h3-1" class="h">@@ -66,9 +48,7 @@
</a> #define MAXTAGLEN		16
 #define MOUSEMASK		(BUTTONMASK|PointerMotionMask)
 
<a href="#h3-1-3" id="h3-1-3" class="d">-
</a> /* enums */
<a href="#h3-1-5" id="h3-1-5" class="d">-enum { BarTop, BarBot, BarOff };			/* bar position */
</a> enum { CurNormal, CurResize, CurMove, CurLast };	/* cursor */
 enum { ColBorder, ColFG, ColBG, ColLast };		/* color */
 enum { NetSupported, NetWMName, NetLast };		/* EWMH atoms */
<a href="#h3-2" id="h3-2" class="h">@@ -79,6 +59,7 @@ typedef struct Client Client;
</a> struct Client {
 	char name[256];
 	int x, y, w, h;
<a href="#h3-2-3" id="h3-2-3" class="i">+	int rx, ry, rw, rh;
</a> 	int basew, baseh, incw, inch, maxw, maxh, minw, minh;
 	int minax, maxax, minay, maxay;
 	long flags;
<a href="#h3-3" id="h3-3" class="h">@@ -93,10 +74,6 @@ struct Client {
</a> 
 typedef struct {
 	int x, y, w, h;
<a href="#h3-3-3" id="h3-3-3" class="d">-} Column;
</a><a href="#h3-3-4" id="h3-3-4" class="d">-
</a><a href="#h3-3-5" id="h3-3-5" class="d">-typedef struct {
</a><a href="#h3-3-6" id="h3-3-6" class="d">-	int x, y, w, h;
</a> 	unsigned long norm[ColLast];
 	unsigned long sel[ColLast];
 	Drawable drawable;
<a href="#h3-4" id="h3-4" class="h">@@ -185,21 +162,18 @@ void run(void);
</a> void scan(void);
 void setclientstate(Client *c, long state);
 void setlayout(const char *arg);
<a href="#h3-4-3" id="h3-4-3" class="d">-void setmwfact(const char *arg);
</a> void setup(void);
 void spawn(const char *arg);
 void tag(const char *arg);
 unsigned int textnw(const char *text, unsigned int len);
 unsigned int textw(const char *text);
 void tile(void);
<a href="#h3-4-10" id="h3-4-10" class="d">-void togglebar(const char *arg);
</a> void togglefloating(const char *arg);
 void toggletag(const char *arg);
 void toggleview(const char *arg);
 void unban(Client *c);
 void unmanage(Client *c);
 void unmapnotify(XEvent *e);
<a href="#h3-4-17" id="h3-4-17" class="d">-void updatebarpos(void);
</a> void updatesizehints(Client *c);
 void updatetitle(Client *c);
 void updatewmhints(Client *c);
<a href="#h3-5" id="h3-5" class="h">@@ -214,7 +188,7 @@ void selectview(const char *arg);
</a> /* variables */
 char stext[256], buf[256];
 double mwfact;
<a href="#h3-5-3" id="h3-5-3" class="d">-int screen, sx, sy, sw, sh, wax, way, waw, wah, ncols;
</a><a href="#h3-5-4" id="h3-5-4" class="i">+int screen, sx, sy, sw, sh;
</a> int (*xerrorxlib)(Display *, XErrorEvent *);
 unsigned int bh, bpos;
 unsigned int blw = 0;
<a href="#h3-6" id="h3-6" class="h">@@ -234,7 +208,6 @@ void (*handler[LASTEvent]) (XEvent *) = {
</a> 	[UnmapNotify] = unmapnotify
 };
 Atom wmatom[WMLast], netatom[NetLast];
<a href="#h3-6-3" id="h3-6-3" class="d">-Bool domwfact = True;
</a> Bool dozoom = True;
 Bool otherwm, readin;
 Bool running = True;
<a href="#h3-7" id="h3-7" class="h">@@ -243,7 +216,6 @@ Bool *seltags;
</a> Client *clients = NULL;
 Client *sel = NULL;
 Client *stack = NULL;
<a href="#h3-7-3" id="h3-7-3" class="d">-Column *cols = NULL;
</a> Cursor cursor[CurLast];
 Display *dpy;
 DC dc = {0};
<a href="#h3-8" id="h3-8" class="h">@@ -350,8 +322,6 @@ buttonpress(XEvent *e) {
</a> 				return;
 			}
 		}
<a href="#h3-8-3" id="h3-8-3" class="d">-		if((ev-&gt;x &lt; x + blw) &amp;&amp; ev-&gt;button == Button1)
</a><a href="#h3-8-4" id="h3-8-4" class="d">-			setlayout(NULL);
</a> 	}
 	else if((c = getclient(ev-&gt;window))) {
 		focus(c);
<a href="#h3-9" id="h3-9" class="h">@@ -437,13 +407,11 @@ configurenotify(XEvent *e) {
</a> 	XConfigureEvent *ev = &amp;e-&gt;xconfigure;
 
 	if(ev-&gt;window == root &amp;&amp; (ev-&gt;width != sw || ev-&gt;height != sh)) {
<a href="#h3-9-3" id="h3-9-3" class="d">-		/* TODO -- use Xinerama dimensions here ? */
</a> 		sw = ev-&gt;width;
 		sh = ev-&gt;height;
 		XFreePixmap(dpy, dc.drawable);
<a href="#h3-9-7" id="h3-9-7" class="d">-		dc.drawable = XCreatePixmap(dpy, root, DisplayWidth(root, screen), bh, DefaultDepth(dpy, screen));
</a><a href="#h3-9-8" id="h3-9-8" class="d">-		XResizeWindow(dpy, barwin, sw, bh);
</a><a href="#h3-9-9" id="h3-9-9" class="d">-		updatebarpos();
</a><a href="#h3-9-10" id="h3-9-10" class="i">+		dc.drawable = XCreatePixmap(dpy, root, BW, bh, DefaultDepth(dpy, screen));
</a><a href="#h3-9-11" id="h3-9-11" class="i">+		XMoveResizeWindow(dpy, barwin, BX, BY, BW, bh);
</a> 		arrange();
 	}
 }
<a href="#h3-10" id="h3-10" class="h">@@ -454,7 +422,6 @@ configurerequest(XEvent *e) {
</a> 	XConfigureRequestEvent *ev = &amp;e-&gt;xconfigurerequest;
 	XWindowChanges wc;
 
<a href="#h3-10-3" id="h3-10-3" class="d">-	/* TODO -- consider Xinerama if necessary when centering */
</a> 	if((c = getclient(ev-&gt;window))) {
 		if(ev-&gt;value_mask &amp; CWBorderWidth)
 			c-&gt;border = ev-&gt;border_width;
<a href="#h3-11" id="h3-11" class="h">@@ -493,16 +460,6 @@ configurerequest(XEvent *e) {
</a> 	XSync(dpy, False);
 }
 
<a href="#h3-11-3" id="h3-11-3" class="d">-Bool
</a><a href="#h3-11-4" id="h3-11-4" class="d">-conflicts(Client *c, unsigned int tidx) {
</a><a href="#h3-11-5" id="h3-11-5" class="d">-	unsigned int i;
</a><a href="#h3-11-6" id="h3-11-6" class="d">-
</a><a href="#h3-11-7" id="h3-11-7" class="d">-	for(i = 0; i &lt; LENGTH(tags); i++)
</a><a href="#h3-11-8" id="h3-11-8" class="d">-		if(c-&gt;tags[i])
</a><a href="#h3-11-9" id="h3-11-9" class="d">-			return True; /* conflict */
</a><a href="#h3-11-10" id="h3-11-10" class="d">-	return False;
</a><a href="#h3-11-11" id="h3-11-11" class="d">-}
</a><a href="#h3-11-12" id="h3-11-12" class="d">-
</a> void
 destroynotify(XEvent *e) {
 	Client *c;
<a href="#h3-12" id="h3-12" class="h">@@ -554,10 +511,10 @@ drawbar(void) {
</a> 	drawtext(lt-&gt;symbol, dc.norm, False);
 	x = dc.x + dc.w;
 	dc.w = textw(stext);
<a href="#h3-12-3" id="h3-12-3" class="d">-	dc.x = sw - dc.w;
</a><a href="#h3-12-4" id="h3-12-4" class="i">+	dc.x = BW - dc.w;
</a> 	if(dc.x &lt; x) {
 		dc.x = x;
<a href="#h3-12-7" id="h3-12-7" class="d">-		dc.w = sw - x;
</a><a href="#h3-12-8" id="h3-12-8" class="i">+		dc.w = BW - x;
</a> 	}
 	drawtext(stext, dc.norm, False);
 	if((dc.w = dc.x - x) &gt; bh) {
<a href="#h3-13" id="h3-13" class="h">@@ -569,7 +526,7 @@ drawbar(void) {
</a> 		else
 			drawtext(NULL, dc.norm, False);
 	}
<a href="#h3-13-3" id="h3-13-3" class="d">-	XCopyArea(dpy, dc.drawable, barwin, dc.gc, 0, 0, sw, bh, 0, 0);
</a><a href="#h3-13-4" id="h3-13-4" class="i">+	XCopyArea(dpy, dc.drawable, barwin, dc.gc, 0, 0, BW, bh, 0, 0);
</a> 	XSync(dpy, False);
 }
 
<a href="#h3-14" id="h3-14" class="h">@@ -677,7 +634,7 @@ void
</a> floating(void) { /* default floating layout */
 	Client *c;
 
<a href="#h3-14-3" id="h3-14-3" class="d">-	domwfact = dozoom = False;
</a><a href="#h3-14-4" id="h3-14-4" class="i">+	dozoom = False;
</a> 	for(c = clients; c; c = c-&gt;next)
 		if(isvisible(c))
 			resize(c, c-&gt;x, c-&gt;y, c-&gt;w, c-&gt;h, True);
<a href="#h3-15" id="h3-15" class="h">@@ -690,11 +647,22 @@ focus(Client *c) {
</a> 	if(sel &amp;&amp; sel != c) {
 		grabbuttons(sel, False);
 		XSetWindowBorder(dpy, sel-&gt;win, dc.norm[ColBorder]);
<a href="#h3-15-3" id="h3-15-3" class="i">+		if(lt-&gt;arrange == monocle)
</a><a href="#h3-15-4" id="h3-15-4" class="i">+			resize(sel, sel-&gt;rx, sel-&gt;ry, sel-&gt;rw, sel-&gt;rh, True);
</a> 	}
 	if(c) {
 		detachstack(c);
 		attachstack(c);
 		grabbuttons(c, True);
<a href="#h3-15-10" id="h3-15-10" class="i">+		if(lt-&gt;arrange == monocle) {
</a><a href="#h3-15-11" id="h3-15-11" class="i">+			if(sel != c) {
</a><a href="#h3-15-12" id="h3-15-12" class="i">+				c-&gt;rx = c-&gt;x;
</a><a href="#h3-15-13" id="h3-15-13" class="i">+				c-&gt;ry = c-&gt;y;
</a><a href="#h3-15-14" id="h3-15-14" class="i">+				c-&gt;rw = c-&gt;w;
</a><a href="#h3-15-15" id="h3-15-15" class="i">+				c-&gt;rh = c-&gt;h;
</a><a href="#h3-15-16" id="h3-15-16" class="i">+			}
</a><a href="#h3-15-17" id="h3-15-17" class="i">+			resize(c, MOX, MOY, MOW, MOH, RESIZEHINTS);
</a><a href="#h3-15-18" id="h3-15-18" class="i">+		}
</a> 	}
 	sel = c;
 	if(c) {
<a href="#h3-16" id="h3-16" class="h">@@ -1016,10 +984,10 @@ manage(Window w, XWindowAttributes *wa) {
</a> 	c-&gt;tags = emallocz(TAGSZ);
 	c-&gt;win = w;
 
<a href="#h3-16-3" id="h3-16-3" class="d">-	c-&gt;x = wa-&gt;x + sx;
</a><a href="#h3-16-4" id="h3-16-4" class="d">-	c-&gt;y = wa-&gt;y + sy;
</a><a href="#h3-16-5" id="h3-16-5" class="d">-	c-&gt;w = wa-&gt;width;
</a><a href="#h3-16-6" id="h3-16-6" class="d">-	c-&gt;h = wa-&gt;height;
</a><a href="#h3-16-7" id="h3-16-7" class="i">+	c-&gt;x = c-&gt;rx = wa-&gt;x + sx;
</a><a href="#h3-16-8" id="h3-16-8" class="i">+	c-&gt;y = c-&gt;ry = wa-&gt;y + sy;
</a><a href="#h3-16-9" id="h3-16-9" class="i">+	c-&gt;w = c-&gt;rw = wa-&gt;width;
</a><a href="#h3-16-10" id="h3-16-10" class="i">+	c-&gt;h = c-&gt;rh = wa-&gt;height;
</a> 	c-&gt;oldborder = wa-&gt;border_width;
 
 	if(c-&gt;w == sw &amp;&amp; c-&gt;h == sh) {
<a href="#h3-17" id="h3-17" class="h">@@ -1028,14 +996,14 @@ manage(Window w, XWindowAttributes *wa) {
</a> 		c-&gt;border = wa-&gt;border_width;
 	}
 	else {
<a href="#h3-17-3" id="h3-17-3" class="d">-		if(c-&gt;x + c-&gt;w + 2 * c-&gt;border &gt; wax + waw)
</a><a href="#h3-17-4" id="h3-17-4" class="d">-			c-&gt;x = wax + waw - c-&gt;w - 2 * c-&gt;border;
</a><a href="#h3-17-5" id="h3-17-5" class="d">-		if(c-&gt;y + c-&gt;h + 2 * c-&gt;border &gt; way + wah)
</a><a href="#h3-17-6" id="h3-17-6" class="d">-			c-&gt;y = way + wah - c-&gt;h - 2 * c-&gt;border;
</a><a href="#h3-17-7" id="h3-17-7" class="d">-		if(c-&gt;x &lt; wax)
</a><a href="#h3-17-8" id="h3-17-8" class="d">-			c-&gt;x = wax;
</a><a href="#h3-17-9" id="h3-17-9" class="d">-		if(c-&gt;y &lt; way)
</a><a href="#h3-17-10" id="h3-17-10" class="d">-			c-&gt;y = way;
</a><a href="#h3-17-11" id="h3-17-11" class="i">+		if(c-&gt;x + c-&gt;w + 2 * c-&gt;border &gt; sx + sw)
</a><a href="#h3-17-12" id="h3-17-12" class="i">+			c-&gt;x = sx + sw - c-&gt;w - 2 * c-&gt;border;
</a><a href="#h3-17-13" id="h3-17-13" class="i">+		if(c-&gt;y + c-&gt;h + 2 * c-&gt;border &gt; sy + sh)
</a><a href="#h3-17-14" id="h3-17-14" class="i">+			c-&gt;y = sy + sh - c-&gt;h - 2 * c-&gt;border;
</a><a href="#h3-17-15" id="h3-17-15" class="i">+		if(c-&gt;x &lt; sx)
</a><a href="#h3-17-16" id="h3-17-16" class="i">+			c-&gt;x = sx;
</a><a href="#h3-17-17" id="h3-17-17" class="i">+		if(c-&gt;y &lt; sy)
</a><a href="#h3-17-18" id="h3-17-18" class="i">+			c-&gt;y = sy;
</a> 		c-&gt;border = BORDERPX;
 	}
 	wc.border_width = c-&gt;border;
<a href="#h3-18" id="h3-18" class="h">@@ -1087,11 +1055,7 @@ maprequest(XEvent *e) {
</a> 
 void
 monocle(void) {
<a href="#h3-18-3" id="h3-18-3" class="d">-	Client *c;
</a><a href="#h3-18-4" id="h3-18-4" class="d">-
</a><a href="#h3-18-5" id="h3-18-5" class="d">-	domwfact = dozoom = False;
</a><a href="#h3-18-6" id="h3-18-6" class="d">-	for(c = nexttiled(clients); c; c = nexttiled(c-&gt;next))
</a><a href="#h3-18-7" id="h3-18-7" class="d">-		resize(c, wax, way, waw - 2 * c-&gt;border, wah - 2 * c-&gt;border, RESIZEHINTS);
</a><a href="#h3-18-8" id="h3-18-8" class="i">+	dozoom = False;
</a> }
 
 void
<a href="#h3-19" id="h3-19" class="h">@@ -1122,14 +1086,14 @@ movemouse(Client *c) {
</a> 			XSync(dpy, False);
 			nx = ocx + (ev.xmotion.x - x1);
 			ny = ocy + (ev.xmotion.y - y1);
<a href="#h3-19-3" id="h3-19-3" class="d">-			if(abs(wax - nx) &lt; SNAP)
</a><a href="#h3-19-4" id="h3-19-4" class="d">-				nx = wax;
</a><a href="#h3-19-5" id="h3-19-5" class="d">-			else if(abs((wax + waw) - (nx + c-&gt;w + 2 * c-&gt;border)) &lt; SNAP)
</a><a href="#h3-19-6" id="h3-19-6" class="d">-				nx = wax + waw - c-&gt;w - 2 * c-&gt;border;
</a><a href="#h3-19-7" id="h3-19-7" class="d">-			if(abs(way - ny) &lt; SNAP)
</a><a href="#h3-19-8" id="h3-19-8" class="d">-				ny = way;
</a><a href="#h3-19-9" id="h3-19-9" class="d">-			else if(abs((way + wah) - (ny + c-&gt;h + 2 * c-&gt;border)) &lt; SNAP)
</a><a href="#h3-19-10" id="h3-19-10" class="d">-				ny = way + wah - c-&gt;h - 2 * c-&gt;border;
</a><a href="#h3-19-11" id="h3-19-11" class="i">+			if(abs(sx - nx) &lt; SNAP)
</a><a href="#h3-19-12" id="h3-19-12" class="i">+				nx = sx;
</a><a href="#h3-19-13" id="h3-19-13" class="i">+			else if(abs((sx + sw) - (nx + c-&gt;w + 2 * c-&gt;border)) &lt; SNAP)
</a><a href="#h3-19-14" id="h3-19-14" class="i">+				nx = sx + sw - c-&gt;w - 2 * c-&gt;border;
</a><a href="#h3-19-15" id="h3-19-15" class="i">+			if(abs(sy - ny) &lt; SNAP)
</a><a href="#h3-19-16" id="h3-19-16" class="i">+				ny = sy;
</a><a href="#h3-19-17" id="h3-19-17" class="i">+			else if(abs((sy + sh) - (ny + c-&gt;h + 2 * c-&gt;border)) &lt; SNAP)
</a><a href="#h3-19-18" id="h3-19-18" class="i">+				ny = sy + sh - c-&gt;h - 2 * c-&gt;border;
</a> 			if(!c-&gt;isfloating &amp;&amp; (lt-&gt;arrange != floating) &amp;&amp; (abs(nx - c-&gt;x) &gt; SNAP || abs(ny - c-&gt;y) &gt; SNAP))
 				togglefloating(NULL);
 			if((lt-&gt;arrange == floating) || c-&gt;isfloating)
<a href="#h3-20" id="h3-20" class="h">@@ -1428,19 +1392,14 @@ void
</a> setlayout(const char *arg) {
 	unsigned int i;
 
<a href="#h3-20-3" id="h3-20-3" class="d">-	if(!arg) {
</a><a href="#h3-20-4" id="h3-20-4" class="d">-		lt++;
</a><a href="#h3-20-5" id="h3-20-5" class="d">-		if(lt == &amp;layouts[LENGTH(layouts)])
</a><a href="#h3-20-6" id="h3-20-6" class="d">-			lt = &amp;layouts[0];
</a><a href="#h3-20-7" id="h3-20-7" class="d">-	}
</a><a href="#h3-20-8" id="h3-20-8" class="d">-	else {
</a><a href="#h3-20-9" id="h3-20-9" class="d">-		for(i = 0; i &lt; LENGTH(layouts); i++)
</a><a href="#h3-20-10" id="h3-20-10" class="d">-			if(!strcmp(arg, layouts[i].symbol))
</a><a href="#h3-20-11" id="h3-20-11" class="d">-				break;
</a><a href="#h3-20-12" id="h3-20-12" class="d">-		if(i == LENGTH(layouts))
</a><a href="#h3-20-13" id="h3-20-13" class="d">-			return;
</a><a href="#h3-20-14" id="h3-20-14" class="d">-		lt = &amp;layouts[i];
</a><a href="#h3-20-15" id="h3-20-15" class="d">-	}
</a><a href="#h3-20-16" id="h3-20-16" class="i">+	if(!arg)
</a><a href="#h3-20-17" id="h3-20-17" class="i">+		return;
</a><a href="#h3-20-18" id="h3-20-18" class="i">+	for(i = 0; i &lt; LENGTH(layouts); i++)
</a><a href="#h3-20-19" id="h3-20-19" class="i">+		if(!strcmp(arg, layouts[i].symbol))
</a><a href="#h3-20-20" id="h3-20-20" class="i">+			break;
</a><a href="#h3-20-21" id="h3-20-21" class="i">+	if(i == LENGTH(layouts))
</a><a href="#h3-20-22" id="h3-20-22" class="i">+		return;
</a><a href="#h3-20-23" id="h3-20-23" class="i">+	lt = &amp;layouts[i];
</a> 	if(sel)
 		arrange();
 	else
<a href="#h3-21" id="h3-21" class="h">@@ -1448,35 +1407,9 @@ setlayout(const char *arg) {
</a> }
 
 void
<a href="#h3-21-3" id="h3-21-3" class="d">-setmwfact(const char *arg) {
</a><a href="#h3-21-4" id="h3-21-4" class="d">-	double delta;
</a><a href="#h3-21-5" id="h3-21-5" class="d">-
</a><a href="#h3-21-6" id="h3-21-6" class="d">-	if(!domwfact)
</a><a href="#h3-21-7" id="h3-21-7" class="d">-		return;
</a><a href="#h3-21-8" id="h3-21-8" class="d">-	/* arg handling, manipulate mwfact */
</a><a href="#h3-21-9" id="h3-21-9" class="d">-	if(arg == NULL)
</a><a href="#h3-21-10" id="h3-21-10" class="d">-		mwfact = MWFACT;
</a><a href="#h3-21-11" id="h3-21-11" class="d">-	else if(sscanf(arg, &quot;%lf&quot;, &amp;delta) == 1) {
</a><a href="#h3-21-12" id="h3-21-12" class="d">-		if(arg[0] == &#39;+&#39; || arg[0] == &#39;-&#39;)
</a><a href="#h3-21-13" id="h3-21-13" class="d">-			mwfact += delta;
</a><a href="#h3-21-14" id="h3-21-14" class="d">-		else
</a><a href="#h3-21-15" id="h3-21-15" class="d">-			mwfact = delta;
</a><a href="#h3-21-16" id="h3-21-16" class="d">-		if(mwfact &lt; 0.1)
</a><a href="#h3-21-17" id="h3-21-17" class="d">-			mwfact = 0.1;
</a><a href="#h3-21-18" id="h3-21-18" class="d">-		else if(mwfact &gt; 0.9)
</a><a href="#h3-21-19" id="h3-21-19" class="d">-			mwfact = 0.9;
</a><a href="#h3-21-20" id="h3-21-20" class="d">-	}
</a><a href="#h3-21-21" id="h3-21-21" class="d">-	arrange();
</a><a href="#h3-21-22" id="h3-21-22" class="d">-}
</a><a href="#h3-21-23" id="h3-21-23" class="d">-
</a><a href="#h3-21-24" id="h3-21-24" class="d">-void
</a> setup(void) {
<a href="#h3-21-26" id="h3-21-26" class="d">-	int screens = 1;
</a> 	unsigned int i;
 	XSetWindowAttributes wa;
<a href="#h3-21-29" id="h3-21-29" class="d">-//#ifdef XINERAMA
</a><a href="#h3-21-30" id="h3-21-30" class="d">-	XineramaScreenInfo *info;
</a><a href="#h3-21-31" id="h3-21-31" class="d">-//#endif
</a> 
 	/* init screen */
 	screen = DefaultScreen(dpy);
<a href="#h3-22" id="h3-22" class="h">@@ -1485,14 +1418,6 @@ setup(void) {
</a> 	sy = 0;
 	sw = DisplayWidth(dpy, screen);
 	sh = DisplayHeight(dpy, screen);
<a href="#h3-22-3" id="h3-22-3" class="d">-	if(XineramaIsActive(dpy)) {
</a><a href="#h3-22-4" id="h3-22-4" class="d">-		if((info = XineramaQueryScreens(dpy, &amp;screens))) {
</a><a href="#h3-22-5" id="h3-22-5" class="d">-			sx = info[0].x_org;
</a><a href="#h3-22-6" id="h3-22-6" class="d">-			sy = info[0].y_org;
</a><a href="#h3-22-7" id="h3-22-7" class="d">-			sw = info[0].width;
</a><a href="#h3-22-8" id="h3-22-8" class="d">-			sh = info[0].height;
</a><a href="#h3-22-9" id="h3-22-9" class="d">-		}
</a><a href="#h3-22-10" id="h3-22-10" class="d">-	}
</a> 
 	/* init atoms */
 	wmatom[WMProtocols] = XInternAtom(dpy, &quot;WM_PROTOCOLS&quot;, False);
<a href="#h3-23" id="h3-23" class="h">@@ -1507,36 +1432,6 @@ setup(void) {
</a> 	cursor[CurResize] = XCreateFontCursor(dpy, XC_sizing);
 	cursor[CurMove] = XCreateFontCursor(dpy, XC_fleur);
 
<a href="#h3-23-3" id="h3-23-3" class="d">-	ncols = 2;
</a><a href="#h3-23-4" id="h3-23-4" class="d">-#if 0
</a><a href="#h3-23-5" id="h3-23-5" class="d">-	if(XineramaIsActive(dpy)) {
</a><a href="#h3-23-6" id="h3-23-6" class="d">-		if((info = XineramaQueryScreens(dpy, &amp;screens))) {
</a><a href="#h3-23-7" id="h3-23-7" class="d">-			if(screens &gt;= 1) {
</a><a href="#h3-23-8" id="h3-23-8" class="d">-				sx = info[0].x_org;
</a><a href="#h3-23-9" id="h3-23-9" class="d">-				sy = info[0].y_org;
</a><a href="#h3-23-10" id="h3-23-10" class="d">-				sw = info[0].width;
</a><a href="#h3-23-11" id="h3-23-11" class="d">-				sh = info[0].height;
</a><a href="#h3-23-12" id="h3-23-12" class="d">-			}
</a><a href="#h3-23-13" id="h3-23-13" class="d">-			else {
</a><a href="#h3-23-14" id="h3-23-14" class="d">-				ncols = screens;
</a><a href="#h3-23-15" id="h3-23-15" class="d">-				cols = emallocz(ncols * sizeof(Column));
</a><a href="#h3-23-16" id="h3-23-16" class="d">-				for(i = 0; i &lt; ncols; i++) {
</a><a href="#h3-23-17" id="h3-23-17" class="d">-					cols[i].x = info[i].x_org;
</a><a href="#h3-23-18" id="h3-23-18" class="d">-					cols[i].y = info[i].y_org;
</a><a href="#h3-23-19" id="h3-23-19" class="d">-					cols[i].w = info[i].width;
</a><a href="#h3-23-20" id="h3-23-20" class="d">-					cols[i].h = info[i].height;
</a><a href="#h3-23-21" id="h3-23-21" class="d">-				}
</a><a href="#h3-23-22" id="h3-23-22" class="d">-			}
</a><a href="#h3-23-23" id="h3-23-23" class="d">-			XFree(info);
</a><a href="#h3-23-24" id="h3-23-24" class="d">-		}
</a><a href="#h3-23-25" id="h3-23-25" class="d">-	}
</a><a href="#h3-23-26" id="h3-23-26" class="d">-	else
</a><a href="#h3-23-27" id="h3-23-27" class="d">-	{
</a><a href="#h3-23-28" id="h3-23-28" class="d">-		cols = emallocz(ncols * sizeof(Column));
</a><a href="#h3-23-29" id="h3-23-29" class="d">-		cols[0].x = sx;
</a><a href="#h3-23-30" id="h3-23-30" class="d">-		cols[0].y = sy;
</a><a href="#h3-23-31" id="h3-23-31" class="d">-	}
</a><a href="#h3-23-32" id="h3-23-32" class="d">-#endif
</a> 	/* init appearance */
 	dc.norm[ColBorder] = getcolor(NORMBORDERCOLOR);
 	dc.norm[ColBG] = getcolor(NORMBGCOLOR);
<a href="#h3-24" id="h3-24" class="h">@@ -1558,10 +1453,8 @@ setup(void) {
</a> 	seltags[0] = prevtags[0] = True;
 
 	/* init layouts */
<a href="#h3-24-3" id="h3-24-3" class="d">-	mwfact = MWFACT;
</a> 	lt = &amp;layouts[0];
 
<a href="#h3-24-6" id="h3-24-6" class="d">-	/* TODO: Xinerama hints ? */
</a> 	/* init bar */
 	for(blw = i = 0; i &lt; LENGTH(layouts); i++) {
 		i = textw(layouts[i].symbol);
<a href="#h3-25" id="h3-25" class="h">@@ -1569,16 +1462,14 @@ setup(void) {
</a> 			blw = i;
 	}
 
<a href="#h3-25-3" id="h3-25-3" class="d">-	bpos = BARPOS;
</a> 	wa.override_redirect = 1;
 	wa.background_pixmap = ParentRelative;
 	wa.event_mask = ButtonPressMask|ExposureMask;
 
<a href="#h3-25-8" id="h3-25-8" class="d">-	barwin = XCreateWindow(dpy, root, sx, sy, sw, bh, 0, DefaultDepth(dpy, screen),
</a><a href="#h3-25-9" id="h3-25-9" class="i">+	barwin = XCreateWindow(dpy, root, BX, BY, BW, bh, 0, DefaultDepth(dpy, screen),
</a> 				CopyFromParent, DefaultVisual(dpy, screen),
 				CWOverrideRedirect|CWBackPixmap|CWEventMask, &amp;wa);
 	XDefineCursor(dpy, barwin, cursor[CurNormal]);
<a href="#h3-25-13" id="h3-25-13" class="d">-	updatebarpos();
</a> 	XMapRaised(dpy, barwin);
 	strcpy(stext, &quot;dwm-&quot;VERSION);
 	drawbar();
<a href="#h3-26" id="h3-26" class="h">@@ -1655,32 +1546,32 @@ tile(void) {
</a> 	unsigned int i, n, nx, ny, nw, nh, mw, th;
 	Client *c, *mc;
 
<a href="#h3-26-3" id="h3-26-3" class="d">-	domwfact = dozoom = True;
</a><a href="#h3-26-4" id="h3-26-4" class="d">-	nx = wax;
</a><a href="#h3-26-5" id="h3-26-5" class="d">-	ny = way;
</a><a href="#h3-26-6" id="h3-26-6" class="i">+	dozoom = True;
</a><a href="#h3-26-7" id="h3-26-7" class="i">+	nx = MX;
</a><a href="#h3-26-8" id="h3-26-8" class="i">+	ny = MY;
</a> 	nw = 0;
 	for(n = 0, c = nexttiled(clients); c; c = nexttiled(c-&gt;next))
 		n++;
 
 	/* window geoms */
<a href="#h3-26-14" id="h3-26-14" class="d">-	mw = (n == 1) ? waw : mwfact * waw;
</a><a href="#h3-26-15" id="h3-26-15" class="d">-	th = (n &gt; 1) ? wah / (n - 1) : 0;
</a><a href="#h3-26-16" id="h3-26-16" class="i">+	mw = (n == 1) ? MOW : MW;
</a><a href="#h3-26-17" id="h3-26-17" class="i">+	th = (n &gt; 1) ? TH / (n - 1) : 0;
</a> 	if(n &gt; 1 &amp;&amp; th &lt; bh)
<a href="#h3-26-19" id="h3-26-19" class="d">-		th = wah;
</a><a href="#h3-26-20" id="h3-26-20" class="i">+		th = TH;
</a> 
 	for(i = 0, c = mc = nexttiled(clients); c; c = nexttiled(c-&gt;next)) {
 		if(i == 0) { /* master */
 			nw = mw - 2 * c-&gt;border;
<a href="#h3-26-25" id="h3-26-25" class="d">-			nh = wah - 2 * c-&gt;border;
</a><a href="#h3-26-26" id="h3-26-26" class="i">+			nh = MH - 2 * c-&gt;border;
</a> 		}
 		else {  /* tile window */
 			if(i == 1) {
<a href="#h3-26-30" id="h3-26-30" class="d">-				ny = way;
</a><a href="#h3-26-31" id="h3-26-31" class="d">-				nx += mc-&gt;w + 2 * mc-&gt;border;
</a><a href="#h3-26-32" id="h3-26-32" class="d">-				nw = waw - mw - 2 * c-&gt;border;
</a><a href="#h3-26-33" id="h3-26-33" class="i">+				ny = TY;
</a><a href="#h3-26-34" id="h3-26-34" class="i">+				nx = TX;
</a><a href="#h3-26-35" id="h3-26-35" class="i">+				nw = TW - 2 * c-&gt;border;
</a> 			}
 			if(i + 1 == n) /* remainder */
<a href="#h3-26-38" id="h3-26-38" class="d">-				nh = (way + wah) - ny - 2 * c-&gt;border;
</a><a href="#h3-26-39" id="h3-26-39" class="i">+				nh = (TY + TH) - ny - 2 * c-&gt;border;
</a> 			else
 				nh = th - 2 * c-&gt;border;
 		}
<a href="#h3-27" id="h3-27" class="h">@@ -1688,23 +1579,13 @@ tile(void) {
</a> 		if((RESIZEHINTS) &amp;&amp; ((c-&gt;h &lt; bh) || (c-&gt;h &gt; nh) || (c-&gt;w &lt; bh) || (c-&gt;w &gt; nw)))
 			/* client doesn&#39;t accept size constraints */
 			resize(c, nx, ny, nw, nh, False);
<a href="#h3-27-3" id="h3-27-3" class="d">-		if(n &gt; 1 &amp;&amp; th != wah)
</a><a href="#h3-27-4" id="h3-27-4" class="i">+		if(n &gt; 1 &amp;&amp; th != TH)
</a> 			ny = c-&gt;y + c-&gt;h + 2 * c-&gt;border;
 		i++;
 	}
 }
 
 void
<a href="#h3-27-11" id="h3-27-11" class="d">-togglebar(const char *arg) {
</a><a href="#h3-27-12" id="h3-27-12" class="d">-	if(bpos == BarOff)
</a><a href="#h3-27-13" id="h3-27-13" class="d">-		bpos = (BARPOS == BarOff) ? BarTop : BARPOS;
</a><a href="#h3-27-14" id="h3-27-14" class="d">-	else
</a><a href="#h3-27-15" id="h3-27-15" class="d">-		bpos = BarOff;
</a><a href="#h3-27-16" id="h3-27-16" class="d">-	updatebarpos();
</a><a href="#h3-27-17" id="h3-27-17" class="d">-	arrange();
</a><a href="#h3-27-18" id="h3-27-18" class="d">-}
</a><a href="#h3-27-19" id="h3-27-19" class="d">-
</a><a href="#h3-27-20" id="h3-27-20" class="d">-void
</a> togglefloating(const char *arg) {
 	if(!sel)
 		return;
<a href="#h3-28" id="h3-28" class="h">@@ -1721,8 +1602,6 @@ toggletag(const char *arg) {
</a> 	if(!sel)
 		return;
 	i = idxoftag(arg);
<a href="#h3-28-3" id="h3-28-3" class="d">-	if(conflicts(sel, i))
</a><a href="#h3-28-4" id="h3-28-4" class="d">-		return;
</a> 	sel-&gt;tags[i] = !sel-&gt;tags[i];
 	for(j = 0; j &lt; LENGTH(tags) &amp;&amp; !sel-&gt;tags[j]; j++);
 	if(j == LENGTH(tags))
<a href="#h3-29" id="h3-29" class="h">@@ -1783,32 +1662,6 @@ unmapnotify(XEvent *e) {
</a> }
 
 void
<a href="#h3-29-3" id="h3-29-3" class="d">-updatebarpos(void) {
</a><a href="#h3-29-4" id="h3-29-4" class="d">-	XEvent ev;
</a><a href="#h3-29-5" id="h3-29-5" class="d">-
</a><a href="#h3-29-6" id="h3-29-6" class="d">-	wax = sx;
</a><a href="#h3-29-7" id="h3-29-7" class="d">-	way = sy;
</a><a href="#h3-29-8" id="h3-29-8" class="d">-	wah = sh;
</a><a href="#h3-29-9" id="h3-29-9" class="d">-	waw = sw;
</a><a href="#h3-29-10" id="h3-29-10" class="d">-	switch(bpos) {
</a><a href="#h3-29-11" id="h3-29-11" class="d">-	default:
</a><a href="#h3-29-12" id="h3-29-12" class="d">-		wah -= bh;
</a><a href="#h3-29-13" id="h3-29-13" class="d">-		way += bh;
</a><a href="#h3-29-14" id="h3-29-14" class="d">-		XMoveWindow(dpy, barwin, sx, sy);
</a><a href="#h3-29-15" id="h3-29-15" class="d">-		break;
</a><a href="#h3-29-16" id="h3-29-16" class="d">-	case BarBot:
</a><a href="#h3-29-17" id="h3-29-17" class="d">-		wah -= bh;
</a><a href="#h3-29-18" id="h3-29-18" class="d">-		XMoveWindow(dpy, barwin, sx, sy + wah);
</a><a href="#h3-29-19" id="h3-29-19" class="d">-		break;
</a><a href="#h3-29-20" id="h3-29-20" class="d">-	case BarOff:
</a><a href="#h3-29-21" id="h3-29-21" class="d">-		XMoveWindow(dpy, barwin, sx, sy - bh);
</a><a href="#h3-29-22" id="h3-29-22" class="d">-		break;
</a><a href="#h3-29-23" id="h3-29-23" class="d">-	}
</a><a href="#h3-29-24" id="h3-29-24" class="d">-	XSync(dpy, False);
</a><a href="#h3-29-25" id="h3-29-25" class="d">-	while(XCheckMaskEvent(dpy, EnterWindowMask, &amp;ev));
</a><a href="#h3-29-26" id="h3-29-26" class="d">-}
</a><a href="#h3-29-27" id="h3-29-27" class="d">-
</a><a href="#h3-29-28" id="h3-29-28" class="d">-void
</a> updatesizehints(Client *c) {
 	long msize;
 	XSizeHints size;
</pre>
</div>
</body>
</html>
