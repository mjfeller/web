<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>removed the _DWM_PROPERTIES handling, reverted ban/unban to XMoveWindow(), and changed argument of setlayout to layout[N].symbol check - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/36672d0401299a5230b516ca4575365d9f45dd35.html">36672d0401299a5230b516ca4575365d9f45dd35</a>
<b>parent</b> <a href="../commit/b18e6840152b300f2db8ff8dca16aee0839f864b.html">b18e6840152b300f2db8ff8dca16aee0839f864b</a>
<b>Author:</b> Anselm R. Garbe &lt;<a href="mailto:garbeam@gmail.com">garbeam@gmail.com</a>&gt;
<b>Date:</b>   Wed, 22 Aug 2007 19:01:05 +0200

removed the _DWM_PROPERTIES handling, reverted ban/unban to XMoveWindow(), and changed argument of setlayout to layout[N].symbol check
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">client.c</a></td><td> | </td><td class="num">50</td><td><span class="i">+++++++</span><span class="d">-------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">config.mk</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">dwm.h</a></td><td> | </td><td class="num">8</td><td><span class="i">++</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">event.c</a></td><td> | </td><td class="num">8</td><td><span class="i">+++</span><span class="d">-----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">main.c</a></td><td> | </td><td class="num">6</td><td><span class="i">++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">screen.c</a></td><td> | </td><td class="num">48</td><td><span class="i">+++++++</span><span class="d">-----------------------------------------</span></td></tr>
</table></pre><pre>6 files changed, 23 insertions(+), 101 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/client.c.html">client.c</a> b/<a href="../file/client.c.html">client.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,14 +1,11 @@
</a> /* See LICENSE file for copyright and license details. */
 #include &quot;dwm.h&quot;
 #include &lt;stdlib.h&gt;
<a href="#h0-0-3" id="h0-0-3" class="d">-#include &lt;string.h&gt;
</a> #include &lt;X11/Xatom.h&gt;
 #include &lt;X11/Xutil.h&gt;
 
 /* static */
 
<a href="#h0-0-9" id="h0-0-9" class="d">-static char buf[128];
</a><a href="#h0-0-10" id="h0-0-10" class="d">-
</a> static void
 attachstack(Client *c) {
 	c-&gt;snext = stack;
<a href="#h0-1" id="h0-1" class="h">@@ -102,10 +99,8 @@ void
</a> ban(Client *c) {
 	if(c-&gt;isbanned)
 		return;
<a href="#h0-1-3" id="h0-1-3" class="d">-	XUnmapWindow(dpy, c-&gt;win);
</a><a href="#h0-1-4" id="h0-1-4" class="d">-	setclientstate(c, IconicState);
</a><a href="#h0-1-5" id="h0-1-5" class="i">+	XMoveWindow(dpy, c-&gt;win, c-&gt;x + 2 * sw, c-&gt;y);
</a> 	c-&gt;isbanned = True;
<a href="#h0-1-7" id="h0-1-7" class="d">-	c-&gt;unmapped++;
</a> }
 
 void
<a href="#h0-2" id="h0-2" class="h">@@ -181,21 +176,6 @@ killclient(const char *arg) {
</a> 		XKillClient(dpy, sel-&gt;win);
 }
 
<a href="#h0-2-3" id="h0-2-3" class="d">-Bool
</a><a href="#h0-2-4" id="h0-2-4" class="d">-getprops(Client *c) {
</a><a href="#h0-2-5" id="h0-2-5" class="d">-	unsigned int i;
</a><a href="#h0-2-6" id="h0-2-6" class="d">-	Bool result = False;
</a><a href="#h0-2-7" id="h0-2-7" class="d">-
</a><a href="#h0-2-8" id="h0-2-8" class="d">-	if(gettextprop(c-&gt;win, dwmprops, buf, sizeof buf)) {
</a><a href="#h0-2-9" id="h0-2-9" class="d">-		for(i = 0; i &lt; ntags &amp;&amp; i &lt; sizeof buf - 1 &amp;&amp; buf[i] != &#39;\0&#39;; i++)
</a><a href="#h0-2-10" id="h0-2-10" class="d">-			if((c-&gt;tags[i] = buf[i] == &#39;1&#39;))
</a><a href="#h0-2-11" id="h0-2-11" class="d">-				result = True;
</a><a href="#h0-2-12" id="h0-2-12" class="d">-		if(i &lt; sizeof buf - 1 &amp;&amp; buf[i] != &#39;\0&#39;)
</a><a href="#h0-2-13" id="h0-2-13" class="d">-			c-&gt;isfloating = buf[i] == &#39;1&#39;;
</a><a href="#h0-2-14" id="h0-2-14" class="d">-	}
</a><a href="#h0-2-15" id="h0-2-15" class="d">-	return result;
</a><a href="#h0-2-16" id="h0-2-16" class="d">-}
</a><a href="#h0-2-17" id="h0-2-17" class="d">-
</a> void
 manage(Window w, XWindowAttributes *wa) {
 	unsigned int i;
<a href="#h0-3" id="h0-3" class="h">@@ -242,15 +222,14 @@ manage(Window w, XWindowAttributes *wa) {
</a> 	if(t)
 		for(i = 0; i &lt; ntags; i++)
 			c-&gt;tags[i] = t-&gt;tags[i];
<a href="#h0-3-3" id="h0-3-3" class="d">-	if(!getprops(c))
</a><a href="#h0-3-4" id="h0-3-4" class="d">-		applyrules(c);
</a><a href="#h0-3-5" id="h0-3-5" class="i">+	applyrules(c);
</a> 	if(!c-&gt;isfloating)
 		c-&gt;isfloating = (rettrans == Success) || c-&gt;isfixed;
<a href="#h0-3-8" id="h0-3-8" class="d">-	setprops(c);
</a> 	attach(c);
 	attachstack(c);
 	XMoveResizeWindow(dpy, c-&gt;win, c-&gt;x, c-&gt;y, c-&gt;w, c-&gt;h); /* some windows require this */
 	ban(c);
<a href="#h0-3-13" id="h0-3-13" class="i">+	XMapWindow(dpy, c-&gt;win);
</a> 	arrange();
 }
 
<a href="#h0-4" id="h0-4" class="h">@@ -318,29 +297,15 @@ resize(Client *c, int x, int y, int w, int h, Bool sizehints) {
</a> }
 
 void
<a href="#h0-4-3" id="h0-4-3" class="d">-setprops(Client *c) {
</a><a href="#h0-4-4" id="h0-4-4" class="d">-	unsigned int i;
</a><a href="#h0-4-5" id="h0-4-5" class="d">-
</a><a href="#h0-4-6" id="h0-4-6" class="d">-	for(i = 0; i &lt; ntags &amp;&amp; i &lt; sizeof buf - 1; i++)
</a><a href="#h0-4-7" id="h0-4-7" class="d">-		buf[i] = c-&gt;tags[i] ? &#39;1&#39; : &#39;0&#39;;
</a><a href="#h0-4-8" id="h0-4-8" class="d">-	if(i &lt; sizeof buf - 1)
</a><a href="#h0-4-9" id="h0-4-9" class="d">-		buf[i++] = c-&gt;isfloating ? &#39;1&#39; : &#39;0&#39;;
</a><a href="#h0-4-10" id="h0-4-10" class="d">-	buf[i] = &#39;\0&#39;;
</a><a href="#h0-4-11" id="h0-4-11" class="d">-	XChangeProperty(dpy, c-&gt;win, dwmprops, XA_STRING, 8,
</a><a href="#h0-4-12" id="h0-4-12" class="d">-			PropModeReplace, (unsigned char *)buf, i);
</a><a href="#h0-4-13" id="h0-4-13" class="d">-}
</a><a href="#h0-4-14" id="h0-4-14" class="d">-
</a><a href="#h0-4-15" id="h0-4-15" class="d">-void
</a> unban(Client *c) {
 	if(!c-&gt;isbanned)
 		return;
<a href="#h0-4-19" id="h0-4-19" class="d">-	XMapWindow(dpy, c-&gt;win);
</a><a href="#h0-4-20" id="h0-4-20" class="d">-	setclientstate(c, NormalState);
</a><a href="#h0-4-21" id="h0-4-21" class="i">+	XMoveWindow(dpy, c-&gt;win, c-&gt;x, c-&gt;y);
</a> 	c-&gt;isbanned = False;
 }
 
 void
<a href="#h0-4-26" id="h0-4-26" class="d">-unmanage(Client *c, long state) {
</a><a href="#h0-4-27" id="h0-4-27" class="i">+unmanage(Client *c) {
</a> 	XWindowChanges wc;
 
 	wc.border_width = c-&gt;oldborder;
<a href="#h0-5" id="h0-5" class="h">@@ -353,14 +318,13 @@ unmanage(Client *c, long state) {
</a> 	if(sel == c)
 		focus(NULL);
 	XUngrabButton(dpy, AnyButton, AnyModifier, c-&gt;win);
<a href="#h0-5-3" id="h0-5-3" class="d">-	setclientstate(c, state);
</a><a href="#h0-5-4" id="h0-5-4" class="i">+	setclientstate(c, WithdrawnState);
</a> 	free(c-&gt;tags);
 	free(c);
 	XSync(dpy, False);
 	XSetErrorHandler(xerror);
 	XUngrabServer(dpy);
<a href="#h0-5-10" id="h0-5-10" class="d">-	if(state != NormalState)
</a><a href="#h0-5-11" id="h0-5-11" class="d">-		arrange();
</a><a href="#h0-5-12" id="h0-5-12" class="i">+	arrange();
</a> }
 
 void
<b>diff --git a/<a id="h1" href="../file/config.mk.html">config.mk</a> b/<a href="../file/config.mk.html">config.mk</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -20,8 +20,8 @@ LIBS = -L/usr/lib -lc -L${X11LIB} -lX11
</a> # flags
 CFLAGS = -Os ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
 LDFLAGS = -s ${LIBS}
<a href="#h1-0-3" id="h1-0-3" class="d">-#CFLAGS = -g -Wall -O2 ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
</a><a href="#h1-0-4" id="h1-0-4" class="d">-#LDFLAGS = -g ${LIBS}
</a><a href="#h1-0-5" id="h1-0-5" class="i">+CFLAGS = -g -Wall -O2 ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
</a><a href="#h1-0-6" id="h1-0-6" class="i">+LDFLAGS = -g ${LIBS}
</a> 
 # Solaris
 #CFLAGS = -fast ${INCS} -DVERSION=\&quot;${VERSION}\&quot;
<b>diff --git a/<a id="h2" href="../file/dwm.h.html">dwm.h</a> b/<a href="../file/dwm.h.html">dwm.h</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -48,7 +48,6 @@ struct Client {
</a> 	int rx, ry, rw, rh; /* revert geometry */
 	int basew, baseh, incw, inch, maxw, maxh, minw, minh;
 	int minax, maxax, minay, maxay;
<a href="#h2-0-3" id="h2-0-3" class="d">-	int unmapped;
</a> 	long flags; 
 	unsigned int border, oldborder;
 	Bool isbanned, isfixed, ismax, isfloating;
<a href="#h2-1" id="h2-1" class="h">@@ -81,7 +80,7 @@ extern int wax, way, wah, waw;			/* windowarea geometry */
</a> extern unsigned int bh, blw, bpos;		/* bar height, bar layout label width, bar position */
 extern unsigned int ntags, numlockmask;		/* number of tags, numlock mask */
 extern void (*handler[LASTEvent])(XEvent *);	/* event handler */
<a href="#h2-1-3" id="h2-1-3" class="d">-extern Atom dwmprops, wmatom[WMLast], netatom[NetLast];
</a><a href="#h2-1-4" id="h2-1-4" class="i">+extern Atom wmatom[WMLast], netatom[NetLast];
</a> extern Bool selscreen, *seltags;		/* seltags is array of Bool */
 extern Client *clients, *sel, *stack;		/* global client list and stack */
 extern Cursor cursor[CurLast];
<a href="#h2-2" id="h2-2" class="h">@@ -96,13 +95,11 @@ void configure(Client *c);		/* send synthetic configure event */
</a> void detach(Client *c);			/* detaches c from global client list */
 void focus(Client *c);			/* focus c if visible &amp;&amp; !NULL, or focus top visible */
 void killclient(const char *arg);	/* kill sel  nicely */
<a href="#h2-2-3" id="h2-2-3" class="d">-Bool getprops(Client *c);		/* gets client properties */
</a> void manage(Window w, XWindowAttributes *wa);	/* manage new client */
 void resize(Client *c, int x, int y,
 		int w, int h, Bool sizehints);	/* resize with given coordinates c*/
<a href="#h2-2-7" id="h2-2-7" class="d">-void setprops(Client *c);		/* sets client properties */
</a> void unban(Client *c);			/* unbans c */
<a href="#h2-2-9" id="h2-2-9" class="d">-void unmanage(Client *c, long state);	/* unmanage c */
</a><a href="#h2-2-10" id="h2-2-10" class="i">+void unmanage(Client *c);		/* unmanage c */
</a> void updatesizehints(Client *c);	/* update the size hint variables of c */
 void updatetitle(Client *c);		/* update the name of c */
 
<a href="#h2-3" id="h2-3" class="h">@@ -131,7 +128,6 @@ void initlayouts(void);			/* initialize layout array */
</a> Bool isarrange(void (*func)());		/* returns True if func is the layout function in use */
 Bool isfloating(void);			/* returns True if floating layout is enabled */
 Bool isvisible(Client *c);		/* returns True if client is visible */
<a href="#h2-3-3" id="h2-3-3" class="d">-void getdwmprops(void);			/* gets dwm properties */
</a> Client *nexttiled(Client *c);		/* returns tiled successor of c */
 void restack(void);			/* restores z layers of all clients */
 void setlayout(const char *arg);	/* sets layout, NULL means next layout */
<b>diff --git a/<a id="h3" href="../file/event.c.html">event.c</a> b/<a href="../file/event.c.html">event.c</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -221,7 +221,7 @@ destroynotify(XEvent *e) {
</a> 	XDestroyWindowEvent *ev = &amp;e-&gt;xdestroywindow;
 
 	if((c = getclient(ev-&gt;window)))
<a href="#h3-0-3" id="h3-0-3" class="d">-		unmanage(c, WithdrawnState);
</a><a href="#h3-0-4" id="h3-0-4" class="i">+		unmanage(c);
</a> }
 
 static void
<a href="#h3-1" id="h3-1" class="h">@@ -332,10 +332,8 @@ unmapnotify(XEvent *e) {
</a> 	Client *c;
 	XUnmapEvent *ev = &amp;e-&gt;xunmap;
 
<a href="#h3-1-3" id="h3-1-3" class="d">-	if((c = getclient(ev-&gt;window)) &amp;&amp; (ev-&gt;event == root)) {
</a><a href="#h3-1-4" id="h3-1-4" class="d">-		if(ev-&gt;send_event || c-&gt;unmapped-- == 0)
</a><a href="#h3-1-5" id="h3-1-5" class="d">-			unmanage(c, WithdrawnState);
</a><a href="#h3-1-6" id="h3-1-6" class="d">-	}
</a><a href="#h3-1-7" id="h3-1-7" class="i">+	if((c = getclient(ev-&gt;window)))
</a><a href="#h3-1-8" id="h3-1-8" class="i">+		unmanage(c);
</a> }
 
 /* extern */
<b>diff --git a/<a id="h4" href="../file/main.c.html">main.c</a> b/<a href="../file/main.c.html">main.c</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -20,7 +20,7 @@ int screen, sx, sy, sw, sh, wax, way, waw, wah;
</a> unsigned int bh, ntags;
 unsigned int bpos = BARPOS;
 unsigned int numlockmask = 0;
<a href="#h4-0-3" id="h4-0-3" class="d">-Atom dwmprops, wmatom[WMLast], netatom[NetLast];
</a><a href="#h4-0-4" id="h4-0-4" class="i">+Atom wmatom[WMLast], netatom[NetLast];
</a> Bool *seltags;
 Bool selscreen = True;
 Client *clients = NULL;
<a href="#h4-1" id="h4-1" class="h">@@ -42,7 +42,7 @@ cleanup(void) {
</a> 	close(STDIN_FILENO);
 	while(stack) {
 		unban(stack);
<a href="#h4-1-3" id="h4-1-3" class="d">-		unmanage(stack, NormalState);
</a><a href="#h4-1-4" id="h4-1-4" class="i">+		unmanage(stack);
</a> 	}
 	if(dc.font.set)
 		XFreeFontSet(dpy, dc.font.set);
<a href="#h4-2" id="h4-2" class="h">@@ -165,7 +165,6 @@ setup(void) {
</a> 	XSetWindowAttributes wa;
 
 	/* init atoms */
<a href="#h4-2-3" id="h4-2-3" class="d">-	dwmprops = XInternAtom(dpy, &quot;_DWM_PROPERTIES&quot;, False);
</a> 	wmatom[WMProtocols] = XInternAtom(dpy, &quot;WM_PROTOCOLS&quot;, False);
 	wmatom[WMDelete] = XInternAtom(dpy, &quot;WM_DELETE_WINDOW&quot;, False);
 	wmatom[WMName] = XInternAtom(dpy, &quot;WM_NAME&quot;, False);
<a href="#h4-3" id="h4-3" class="h">@@ -231,7 +230,6 @@ setup(void) {
</a> 		XSetFont(dpy, dc.gc, dc.font.xfont-&gt;fid);
 	/* multihead support */
 	selscreen = XQueryPointer(dpy, root, &amp;w, &amp;w, &amp;i, &amp;i, &amp;i, &amp;i, &amp;mask);
<a href="#h4-3-3" id="h4-3-3" class="d">-	getdwmprops();
</a> }
 
 /*
<b>diff --git a/<a id="h5" href="../file/screen.c.html">screen.c</a> b/<a href="../file/screen.c.html">screen.c</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -3,8 +3,6 @@
</a> #include &lt;regex.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
<a href="#h5-0-3" id="h5-0-3" class="d">-#include &lt;string.h&gt;
</a><a href="#h5-0-4" id="h5-0-4" class="d">-#include &lt;X11/Xatom.h&gt;
</a> #include &lt;X11/Xutil.h&gt;
 
 /* static */
<a href="#h5-1" id="h5-1" class="h">@@ -28,7 +26,6 @@ typedef struct {
</a> TAGS
 RULES
 
<a href="#h5-1-3" id="h5-1-3" class="d">-static char buf[512];
</a> static unsigned int nrules = 0;
 static unsigned int nlayouts = 0;
 static unsigned int ltidx = 0; /* default */
<a href="#h5-2" id="h5-2" class="h">@@ -53,19 +50,6 @@ floating(void) { /* default floating layout */
</a> 			resize(c, c-&gt;x, c-&gt;y, c-&gt;w, c-&gt;h, True);
 }
 
<a href="#h5-2-3" id="h5-2-3" class="d">-static void
</a><a href="#h5-2-4" id="h5-2-4" class="d">-setdwmprops(void) {
</a><a href="#h5-2-5" id="h5-2-5" class="d">-	unsigned int i;
</a><a href="#h5-2-6" id="h5-2-6" class="d">-
</a><a href="#h5-2-7" id="h5-2-7" class="d">-	for(i = 0; i &lt; ntags &amp;&amp; i &lt; sizeof buf - 1; i++)
</a><a href="#h5-2-8" id="h5-2-8" class="d">-		buf[i] = seltags[i] ? &#39;1&#39; : &#39;0&#39;;
</a><a href="#h5-2-9" id="h5-2-9" class="d">-	if(i &lt; sizeof buf - 1)
</a><a href="#h5-2-10" id="h5-2-10" class="d">-		buf[i++] = (char)ltidx + &#39;0&#39;;
</a><a href="#h5-2-11" id="h5-2-11" class="d">-	buf[i] = &#39;\0&#39;;
</a><a href="#h5-2-12" id="h5-2-12" class="d">-	XChangeProperty(dpy, root, dwmprops, XA_STRING, 8,
</a><a href="#h5-2-13" id="h5-2-13" class="d">-			PropModeReplace, (unsigned char *)buf, i);
</a><a href="#h5-2-14" id="h5-2-14" class="d">-}
</a><a href="#h5-2-15" id="h5-2-15" class="d">-
</a> LAYOUTS
 
 /* extern */
<a href="#h5-3" id="h5-3" class="h">@@ -74,6 +58,7 @@ unsigned int blw = 0;
</a> 
 void
 applyrules(Client *c) {
<a href="#h5-3-3" id="h5-3-3" class="i">+	static char buf[512];
</a> 	unsigned int i, j;
 	regmatch_t tmp;
 	Bool matched = False;
<a href="#h5-4" id="h5-4" class="h">@@ -215,20 +200,6 @@ isvisible(Client *c) {
</a> 	return False;
 }
 
<a href="#h5-4-3" id="h5-4-3" class="d">-void
</a><a href="#h5-4-4" id="h5-4-4" class="d">-getdwmprops(void) {
</a><a href="#h5-4-5" id="h5-4-5" class="d">-	unsigned int i;
</a><a href="#h5-4-6" id="h5-4-6" class="d">-
</a><a href="#h5-4-7" id="h5-4-7" class="d">-	if(gettextprop(root, dwmprops, buf, sizeof buf)) {
</a><a href="#h5-4-8" id="h5-4-8" class="d">-		for(i = 0; i &lt; ntags &amp;&amp; i &lt; sizeof buf - 1 &amp;&amp; buf[i] != &#39;\0&#39;; i++)
</a><a href="#h5-4-9" id="h5-4-9" class="d">-			seltags[i] = buf[i] == &#39;1&#39;;
</a><a href="#h5-4-10" id="h5-4-10" class="d">-		if(i &lt; sizeof buf - 1 &amp;&amp; buf[i] != &#39;\0&#39;) {
</a><a href="#h5-4-11" id="h5-4-11" class="d">-			if((unsigned int)(buf[i] - &#39;0&#39;) &lt; nlayouts)
</a><a href="#h5-4-12" id="h5-4-12" class="d">-				ltidx = buf[i] - &#39;0&#39;;
</a><a href="#h5-4-13" id="h5-4-13" class="d">-		}
</a><a href="#h5-4-14" id="h5-4-14" class="d">-	}
</a><a href="#h5-4-15" id="h5-4-15" class="d">-}
</a><a href="#h5-4-16" id="h5-4-16" class="d">-
</a> Client *
 nexttiled(Client *c) {
 	for(; c &amp;&amp; (c-&gt;isfloating || !isvisible(c)); c = c-&gt;next);
<a href="#h5-5" id="h5-5" class="h">@@ -266,15 +237,17 @@ restack(void) {
</a> 
 void
 setlayout(const char *arg) {
<a href="#h5-5-3" id="h5-5-3" class="d">-	int i;
</a><a href="#h5-5-4" id="h5-5-4" class="i">+	unsigned int i;
</a> 
 	if(!arg) {
 		if(++ltidx == nlayouts)
 			ltidx = 0;;
 	}
 	else {
<a href="#h5-5-11" id="h5-5-11" class="d">-		i = atoi(arg);
</a><a href="#h5-5-12" id="h5-5-12" class="d">-		if(i &lt; 0 || i &gt;= nlayouts)
</a><a href="#h5-5-13" id="h5-5-13" class="i">+		for(i = 0; i &lt; nlayouts; i++)
</a><a href="#h5-5-14" id="h5-5-14" class="i">+			if(arg == layouts[i].symbol)
</a><a href="#h5-5-15" id="h5-5-15" class="i">+				break;
</a><a href="#h5-5-16" id="h5-5-16" class="i">+		if(i == nlayouts)
</a> 			return;
 		ltidx = i;
 	}
<a href="#h5-6" id="h5-6" class="h">@@ -282,7 +255,6 @@ setlayout(const char *arg) {
</a> 		arrange();
 	else
 		drawstatus();
<a href="#h5-6-3" id="h5-6-3" class="d">-	setdwmprops();
</a> }
 
 void
<a href="#h5-7" id="h5-7" class="h">@@ -296,7 +268,6 @@ tag(const char *arg) {
</a> 	i = idxoftag(arg);
 	if(i &gt;= 0 &amp;&amp; i &lt; ntags)
 		sel-&gt;tags[i] = True;
<a href="#h5-7-3" id="h5-7-3" class="d">-	setprops(sel);
</a> 	arrange();
 }
 
<a href="#h5-8" id="h5-8" class="h">@@ -315,10 +286,8 @@ togglefloating(const char *arg) {
</a> 	if(!sel || isfloating())
 		return;
 	sel-&gt;isfloating = !sel-&gt;isfloating;
<a href="#h5-8-3" id="h5-8-3" class="d">-	if(sel-&gt;isfloating) {
</a><a href="#h5-8-4" id="h5-8-4" class="i">+	if(sel-&gt;isfloating)
</a> 		resize(sel, sel-&gt;x, sel-&gt;y, sel-&gt;w, sel-&gt;h, True);
<a href="#h5-8-6" id="h5-8-6" class="d">-		setprops(sel);
</a><a href="#h5-8-7" id="h5-8-7" class="d">-	}
</a> 	arrange();
 }
 
<a href="#h5-9" id="h5-9" class="h">@@ -352,7 +321,6 @@ toggletag(const char *arg) {
</a> 	for(j = 0; j &lt; ntags &amp;&amp; !sel-&gt;tags[j]; j++);
 	if(j == ntags)
 		sel-&gt;tags[i] = True;
<a href="#h5-9-3" id="h5-9-3" class="d">-	setprops(sel);
</a> 	arrange();
 }
 
<a href="#h5-10" id="h5-10" class="h">@@ -365,7 +333,6 @@ toggleview(const char *arg) {
</a> 	for(j = 0; j &lt; ntags &amp;&amp; !seltags[j]; j++);
 	if(j == ntags)
 		seltags[i] = True; /* cannot toggle last view */
<a href="#h5-10-3" id="h5-10-3" class="d">-	setdwmprops();
</a> 	arrange();
 }
 
<a href="#h5-11" id="h5-11" class="h">@@ -404,6 +371,5 @@ view(const char *arg) {
</a> 	i = idxoftag(arg);
 	if(i &gt;= 0 &amp;&amp; i &lt; ntags)
 		seltags[i] = True;
<a href="#h5-11-3" id="h5-11-3" class="d">-	setdwmprops();
</a> 	arrange();
 }
</pre>
</div>
</body>
</html>
