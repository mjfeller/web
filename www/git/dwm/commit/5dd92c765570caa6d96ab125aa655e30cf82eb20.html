<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>removed some empty lines - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/5dd92c765570caa6d96ab125aa655e30cf82eb20.html">5dd92c765570caa6d96ab125aa655e30cf82eb20</a>
<b>parent</b> <a href="../commit/52bd69c2a4998294a259efbedafca961dc2781eb.html">52bd69c2a4998294a259efbedafca961dc2781eb</a>
<b>Author:</b> Anselm R Garbe &lt;<a href="mailto:anselm@garbe.us">anselm@garbe.us</a>&gt;
<b>Date:</b>   Thu,  2 Jul 2009 18:40:04 +0100

removed some empty lines
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">dwm.c</a></td><td> | </td><td class="num">49</td><td><span class="i">++++++</span><span class="d">-------------------------------------------</span></td></tr>
</table></pre><pre>1 file changed, 6 insertions(+), 43 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/dwm.c.html">dwm.c</a> b/<a href="../file/dwm.c.html">dwm.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -330,16 +330,13 @@ applysizehints(Client *c, int *x, int *y, int *w, int *h, Bool interact) {
</a> 		*h = bh;
 	if(*w &lt; bh)
 		*w = bh;
<a href="#h0-0-3" id="h0-0-3" class="d">-
</a> 	if(resizehints || c-&gt;isfloating) {
 		/* see last two sentences in ICCCM 4.1.2.3 */
 		baseismin = c-&gt;basew == c-&gt;minw &amp;&amp; c-&gt;baseh == c-&gt;minh;
<a href="#h0-0-7" id="h0-0-7" class="d">-
</a> 		if(!baseismin) { /* temporarily remove base dimensions */
 			*w -= c-&gt;basew;
 			*h -= c-&gt;baseh;
 		}
<a href="#h0-0-12" id="h0-0-12" class="d">-
</a> 		/* adjust for aspect limits */
 		if(c-&gt;mina &gt; 0 &amp;&amp; c-&gt;maxa &gt; 0) {
 			if(c-&gt;maxa &lt; (float)*w / *h)
<a href="#h0-1" id="h0-1" class="h">@@ -347,28 +344,22 @@ applysizehints(Client *c, int *x, int *y, int *w, int *h, Bool interact) {
</a> 			else if(c-&gt;mina &lt; (float)*h / *w)
 				*h = *w * c-&gt;mina;
 		}
<a href="#h0-1-3" id="h0-1-3" class="d">-
</a> 		if(baseismin) { /* increment calculation requires this */
 			*w -= c-&gt;basew;
 			*h -= c-&gt;baseh;
 		}
<a href="#h0-1-8" id="h0-1-8" class="d">-
</a> 		/* adjust for increment value */
 		if(c-&gt;incw)
 			*w -= *w % c-&gt;incw;
 		if(c-&gt;inch)
 			*h -= *h % c-&gt;inch;
<a href="#h0-1-14" id="h0-1-14" class="d">-
</a> 		/* restore base dimensions */
 		*w += c-&gt;basew;
 		*h += c-&gt;baseh;
<a href="#h0-1-18" id="h0-1-18" class="d">-
</a> 		*w = MAX(*w, c-&gt;minw);
 		*h = MAX(*h, c-&gt;minh);
<a href="#h0-1-21" id="h0-1-21" class="d">-
</a> 		if(c-&gt;maxw)
 			*w = MIN(*w, c-&gt;maxw);
<a href="#h0-1-24" id="h0-1-24" class="d">-
</a> 		if(c-&gt;maxh)
 			*h = MIN(*h, c-&gt;maxh);
 	}
<a href="#h0-2" id="h0-2" class="h">@@ -438,7 +429,6 @@ buttonpress(XEvent *e) {
</a> 		focus(c);
 		click = ClkClientWin;
 	}
<a href="#h0-2-3" id="h0-2-3" class="d">-
</a> 	for(i = 0; i &lt; LENGTH(buttons); i++)
 		if(click == buttons[i].click &amp;&amp; buttons[i].func &amp;&amp; buttons[i].button == ev-&gt;button
 		   &amp;&amp; CLEANMASK(buttons[i].mask) == CLEANMASK(ev-&gt;state))
<a href="#h0-3" id="h0-3" class="h">@@ -449,7 +439,6 @@ void
</a> checkotherwm(void) {
 	otherwm = False;
 	xerrorxlib = XSetErrorHandler(xerrorstart);
<a href="#h0-3-3" id="h0-3-3" class="d">-
</a> 	/* this causes an error if some other window manager is running */
 	XSelectInput(dpy, DefaultRootWindow(dpy), SubstructureRedirectMask);
 	XSync(dpy, False);
<a href="#h0-4" id="h0-4" class="h">@@ -644,7 +633,6 @@ drawbar(Monitor *m) {
</a> 		if(c-&gt;isurgent)
 			urg |= c-&gt;tags;
 	}
<a href="#h0-4-3" id="h0-4-3" class="d">-
</a> 	dc.x = 0;
 	if(mons-&gt;next) { /* more than a single monitor */
 		dc.w = TEXTW(monsyms[m-&gt;screen_number]);
<a href="#h0-5" id="h0-5" class="h">@@ -676,9 +664,8 @@ drawbar(Monitor *m) {
</a> 		}
 		drawtext(stext, dc.norm, False);
 	}
<a href="#h0-5-3" id="h0-5-3" class="d">-	else {
</a><a href="#h0-5-4" id="h0-5-4" class="i">+	else
</a> 		dc.x = m-&gt;ww;
<a href="#h0-5-6" id="h0-5-6" class="d">-	}
</a> 	if((dc.w = dc.x - x) &gt; bh) {
 		dc.x = x;
 		if(m-&gt;sel) {
<a href="#h0-6" id="h0-6" class="h">@@ -860,6 +847,7 @@ getrootpointer(int *x, int *y) {
</a> 	int di;
 	unsigned int dui;
 	Window dummy;
<a href="#h0-6-3" id="h0-6-3" class="i">+
</a> 	return XQueryPointer(dpy, root, &amp;dummy, &amp;dummy, x, y, &amp;di, &amp;di, &amp;dui);
 }
 
<a href="#h0-7" id="h0-7" class="h">@@ -931,7 +919,7 @@ grabbuttons(Client *c, Bool focused) {
</a> void
 grabkeys(void) {
 	updatenumlockmask();
<a href="#h0-7-3" id="h0-7-3" class="d">-	{ /* grab keys */
</a><a href="#h0-7-4" id="h0-7-4" class="i">+	{
</a> 		unsigned int i, j;
 		unsigned int modifiers[] = { 0, LockMask, numlockmask, numlockmask|LockMask };
 		KeyCode code;
<a href="#h0-8" id="h0-8" class="h">@@ -1050,7 +1038,6 @@ manage(Window w, XWindowAttributes *wa) {
</a> 		die(&quot;fatal: could not malloc() %u bytes\n&quot;, sizeof(Client));
 	*c = cz;
 	c-&gt;win = w;
<a href="#h0-8-3" id="h0-8-3" class="d">-
</a> 	if(XGetTransientForHint(dpy, w, &amp;trans))
 		t = wintoclient(trans);
 	if(t) {
<a href="#h0-9" id="h0-9" class="h">@@ -1061,7 +1048,6 @@ manage(Window w, XWindowAttributes *wa) {
</a> 		c-&gt;mon = selmon;
 		applyrules(c);
 	}
<a href="#h0-9-3" id="h0-9-3" class="d">-
</a> 	/* geometry */
 	c-&gt;x = wa-&gt;x + c-&gt;mon-&gt;wx;
 	c-&gt;y = wa-&gt;y + c-&gt;mon-&gt;wy;
<a href="#h0-10" id="h0-10" class="h">@@ -1084,7 +1070,6 @@ manage(Window w, XWindowAttributes *wa) {
</a> 		           &amp;&amp; (c-&gt;x + (c-&gt;w / 2) &lt; c-&gt;mon-&gt;wx + c-&gt;mon-&gt;ww)) ? bh : c-&gt;mon-&gt;my);
 		c-&gt;bw = borderpx;
 	}
<a href="#h0-10-3" id="h0-10-3" class="d">-
</a> 	wc.border_width = c-&gt;bw;
 	XConfigureWindow(dpy, w, CWBorderWidth, &amp;wc);
 	XSetWindowBorder(dpy, w, dc.norm[ColBorder]);
<a href="#h0-11" id="h0-11" class="h">@@ -1290,7 +1275,6 @@ resizemouse(const Arg *arg) {
</a> 		case MotionNotify:
 			nw = MAX(ev.xmotion.x - ocx - 2 * c-&gt;bw + 1, 1);
 			nh = MAX(ev.xmotion.y - ocy - 2 * c-&gt;bw + 1, 1);
<a href="#h0-11-3" id="h0-11-3" class="d">-
</a> 			if(snap &amp;&amp; nw &gt;= selmon-&gt;wx &amp;&amp; nw &lt;= selmon-&gt;wx + selmon-&gt;ww
 			        &amp;&amp; nh &gt;= selmon-&gt;wy &amp;&amp; nh &lt;= selmon-&gt;wy + selmon-&gt;wh) {
 				if(!c-&gt;isfloating &amp;&amp; lt[selmon-&gt;sellt]-&gt;arrange
<a href="#h0-12" id="h0-12" class="h">@@ -1440,19 +1424,16 @@ setup(void) {
</a> 	lt[0] = &amp;layouts[0];
 	lt[1] = &amp;layouts[1 % LENGTH(layouts)];
 	updategeom();
<a href="#h0-12-3" id="h0-12-3" class="d">-
</a> 	/* init atoms */
 	wmatom[WMProtocols] = XInternAtom(dpy, &quot;WM_PROTOCOLS&quot;, False);
 	wmatom[WMDelete] = XInternAtom(dpy, &quot;WM_DELETE_WINDOW&quot;, False);
 	wmatom[WMState] = XInternAtom(dpy, &quot;WM_STATE&quot;, False);
 	netatom[NetSupported] = XInternAtom(dpy, &quot;_NET_SUPPORTED&quot;, False);
 	netatom[NetWMName] = XInternAtom(dpy, &quot;_NET_WM_NAME&quot;, False);
<a href="#h0-12-10" id="h0-12-10" class="d">-
</a> 	/* init cursors */
 	cursor[CurNormal] = XCreateFontCursor(dpy, XC_left_ptr);
 	cursor[CurResize] = XCreateFontCursor(dpy, XC_sizing);
 	cursor[CurMove] = XCreateFontCursor(dpy, XC_fleur);
<a href="#h0-12-15" id="h0-12-15" class="d">-
</a> 	/* init appearance */
 	dc.norm[ColBorder] = getcolor(normbordercolor);
 	dc.norm[ColBG] = getcolor(normbgcolor);
<a href="#h0-13" id="h0-13" class="h">@@ -1465,7 +1446,6 @@ setup(void) {
</a> 	XSetLineAttributes(dpy, dc.gc, 1, LineSolid, CapButt, JoinMiter);
 	if(!dc.font.set)
 		XSetFont(dpy, dc.gc, dc.font.xfont-&gt;fid);
<a href="#h0-13-3" id="h0-13-3" class="d">-
</a> 	/* init bars */
 	for(blw = i = 0; LENGTH(layouts) &gt; 1 &amp;&amp; i &lt; LENGTH(layouts); i++) {
 		w = TEXTW(layouts[i].symbol);
<a href="#h0-14" id="h0-14" class="h">@@ -1473,11 +1453,9 @@ setup(void) {
</a> 	}
 	updatebars();
 	updatestatus();
<a href="#h0-14-3" id="h0-14-3" class="d">-
</a> 	/* EWMH support per view */
 	XChangeProperty(dpy, root, netatom[NetSupported], XA_ATOM, 32,
 			PropModeReplace, (unsigned char *) netatom, NetLast);
<a href="#h0-14-7" id="h0-14-7" class="d">-
</a> 	/* select for events */
 	wa.cursor = cursor[CurNormal];
 	wa.event_mask = SubstructureRedirectMask|SubstructureNotifyMask|ButtonPressMask
<a href="#h0-15" id="h0-15" class="h">@@ -1485,7 +1463,6 @@ setup(void) {
</a> 			|PropertyChangeMask;
 	XChangeWindowAttributes(dpy, root, CWEventMask|CWCursor, &amp;wa);
 	XSelectInput(dpy, root, wa.event_mask);
<a href="#h0-15-3" id="h0-15-3" class="d">-
</a> 	grabkeys();
 }
 
<a href="#h0-16" id="h0-16" class="h">@@ -1562,15 +1539,12 @@ tile(Monitor *m) {
</a> 	for(n = 0, c = nexttiled(m-&gt;clients); c; c = nexttiled(c-&gt;next), n++);
 	if(n == 0)
 		return;
<a href="#h0-16-3" id="h0-16-3" class="d">-
</a> 	/* master */
 	c = nexttiled(m-&gt;clients);
 	mw = m-&gt;mfact * m-&gt;ww;
 	resize(c, m-&gt;wx, m-&gt;wy, (n == 1 ? m-&gt;ww : mw) - 2 * c-&gt;bw, m-&gt;wh - 2 * c-&gt;bw, False);
<a href="#h0-16-8" id="h0-16-8" class="d">-
</a> 	if(--n == 0)
 		return;
<a href="#h0-16-11" id="h0-16-11" class="d">-
</a> 	/* tile stack */
 	x = (m-&gt;wx + mw &gt; c-&gt;x + c-&gt;w) ? c-&gt;x + c-&gt;w + 2 * c-&gt;bw : m-&gt;wx + mw;
 	y = m-&gt;wy;
<a href="#h0-17" id="h0-17" class="h">@@ -1578,7 +1552,6 @@ tile(Monitor *m) {
</a> 	h = m-&gt;wh / n;
 	if(h &lt; bh)
 		h = m-&gt;wh;
<a href="#h0-17-3" id="h0-17-3" class="d">-
</a> 	for(i = 0, c = nexttiled(c-&gt;next); c; c = nexttiled(c-&gt;next), i++) {
 		resize(c, x, y, w - 2 * c-&gt;bw, /* remainder */ ((i + 1 == n)
 		       ? m-&gt;wy + m-&gt;wh - y - 2 * c-&gt;bw : h - 2 * c-&gt;bw), False);
<a href="#h0-18" id="h0-18" class="h">@@ -1612,7 +1585,6 @@ toggletag(const Arg *arg) {
</a> 
 	if(!selmon-&gt;sel)
 		return;
<a href="#h0-18-3" id="h0-18-3" class="d">-	
</a> 	mask = selmon-&gt;sel-&gt;tags ^ (arg-&gt;ui &amp; TAGMASK);
 	if(mask) {
 		selmon-&gt;sel-&gt;tags = mask;
<a href="#h0-19" id="h0-19" class="h">@@ -1677,10 +1649,8 @@ updatebars(void) {
</a> 	wa.override_redirect = True;
 	wa.background_pixmap = ParentRelative;
 	wa.event_mask = ButtonPressMask|ExposureMask;
<a href="#h0-19-3" id="h0-19-3" class="d">-
</a> 	for(m = mons; m; m = m-&gt;next) {
 		m-&gt;barwin = XCreateWindow(dpy, root, m-&gt;wx, m-&gt;by, m-&gt;ww, bh, 0, DefaultDepth(dpy, screen),
<a href="#h0-19-6" id="h0-19-6" class="d">-
</a> 		                          CopyFromParent, DefaultVisual(dpy, screen),
 		                          CWOverrideRedirect|CWBackPixmap|CWEventMask, &amp;wa);
 		XDefineCursor(dpy, m-&gt;barwin, cursor[CurNormal]);
<a href="#h0-20" id="h0-20" class="h">@@ -1719,7 +1689,6 @@ updategeom(void) {
</a> 		m-&gt;next = newmons;
 		newmons = m;
 	}
<a href="#h0-20-3" id="h0-20-3" class="d">-
</a> 	/* initialise monitor(s) */
 #ifdef XINERAMA
 	if(XineramaIsActive(dpy)) {
<a href="#h0-21" id="h0-21" class="h">@@ -1742,7 +1711,6 @@ updategeom(void) {
</a> 		m-&gt;mw = m-&gt;ww = sw;
 		m-&gt;mh = m-&gt;wh = sh;
 	}
<a href="#h0-21-3" id="h0-21-3" class="d">-
</a> 	/* bar geometry setup */
 	for(m = newmons; m; m = m-&gt;next) {
 		m-&gt;sel = m-&gt;stack = m-&gt;clients = NULL;
<a href="#h0-22" id="h0-22" class="h">@@ -1754,7 +1722,6 @@ updategeom(void) {
</a> 		m-&gt;topbar = TOPBAR;
 		updatebarpos(m);
 	}
<a href="#h0-22-3" id="h0-22-3" class="d">-
</a> 	/* reassign left over clients of disappeared monitors */
 	for(tm = mons; tm; tm = tm-&gt;next)
 		while(tm-&gt;clients) {
<a href="#h0-23" id="h0-23" class="h">@@ -1765,7 +1732,6 @@ updategeom(void) {
</a> 			attach(c);
 			attachstack(c);
 		}
<a href="#h0-23-3" id="h0-23-3" class="d">-
</a> 	/* select focused monitor */
 	cleanupmons();
 	selmon = mons = newmons;
<a href="#h0-24" id="h0-24" class="h">@@ -1861,7 +1827,6 @@ updatewmhints(Client *c) {
</a> 		}
 		else
 			c-&gt;isurgent = (wmh-&gt;flags &amp; XUrgencyHint) ? True : False;
<a href="#h0-24-3" id="h0-24-3" class="d">-
</a> 		XFree(wmh);
 	}
 }
<a href="#h0-25" id="h0-25" class="h">@@ -1941,7 +1906,9 @@ void
</a> zoom(const Arg *arg) {
 	Client *c = selmon-&gt;sel;
 
<a href="#h0-25-3" id="h0-25-3" class="d">-	if(!lt[selmon-&gt;sellt]-&gt;arrange || lt[selmon-&gt;sellt]-&gt;arrange == monocle || (selmon-&gt;sel &amp;&amp; selmon-&gt;sel-&gt;isfloating))
</a><a href="#h0-25-4" id="h0-25-4" class="i">+	if(!lt[selmon-&gt;sellt]-&gt;arrange
</a><a href="#h0-25-5" id="h0-25-5" class="i">+	|| lt[selmon-&gt;sellt]-&gt;arrange == monocle
</a><a href="#h0-25-6" id="h0-25-6" class="i">+	|| (selmon-&gt;sel &amp;&amp; selmon-&gt;sel-&gt;isfloating))
</a> 		return;
 	if(c == nexttiled(selmon-&gt;clients))
 		if(!c || !(c = nexttiled(c-&gt;next)))
<a href="#h0-26" id="h0-26" class="h">@@ -1958,19 +1925,15 @@ main(int argc, char *argv[]) {
</a> 		die(&quot;dwm-&quot;VERSION&quot;, © 2006-2009 dwm engineers, see LICENSE for details\n&quot;);
 	else if(argc != 1)
 		die(&quot;usage: dwm [-v]\n&quot;);
<a href="#h0-26-3" id="h0-26-3" class="d">-
</a> 	if(!setlocale(LC_CTYPE, &quot;&quot;) || !XSupportsLocale())
 		fputs(&quot;warning: no locale support\n&quot;, stderr);
<a href="#h0-26-6" id="h0-26-6" class="d">-
</a> 	if(!(dpy = XOpenDisplay(NULL)))
 		die(&quot;dwm: cannot open display\n&quot;);
<a href="#h0-26-9" id="h0-26-9" class="d">-
</a> 	checkotherwm();
 	setup();
 	scan();
 	run();
 	cleanup();
<a href="#h0-26-15" id="h0-26-15" class="d">-
</a> 	XCloseDisplay(dpy);
 	return 0;
 }
</pre>
</div>
</body>
</html>
