<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>add several patches - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/4b0b04c96b172bdf31db2e4f24eae71df1119c86.html">4b0b04c96b172bdf31db2e4f24eae71df1119c86</a>
<b>parent</b> <a href="../commit/cb3f58ad06993f7ef3a7d8f61468012e2b786cab.html">cb3f58ad06993f7ef3a7d8f61468012e2b786cab</a>
<b>Author:</b> Mark Feller &lt;<a href="mailto:mfeller@recurly.com">mfeller@recurly.com</a>&gt;
<b>Date:</b>   Mon, 30 Mar 2020 22:42:31 -0600

add several patches

Signed-off-by: Mark Feller &lt;mfeller@recurly.com&gt;

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.def.h</a></td><td> | </td><td class="num">37</td><td><span class="i">+++++++++++++++++++++</span><span class="d">----------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">dwm.c</a></td><td> | </td><td class="num">44</td><td><span class="i">+++++++++++++++++++++++++++++++++++++</span><span class="d">-------</span></td></tr>
</table></pre><pre>2 files changed, 58 insertions(+), 23 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.def.h.html">config.def.h</a> b/<a href="../file/config.def.h.html">config.def.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,17 +1,17 @@
</a> /* See LICENSE file for copyright and license details. */
 
 /* appearance */
<a href="#h0-0-3" id="h0-0-3" class="d">-static const unsigned int borderpx  = 1;        /* border pixel of windows */
</a><a href="#h0-0-4" id="h0-0-4" class="i">+static const unsigned int borderpx  = 2;        /* border pixel of windows */
</a><a href="#h0-0-5" id="h0-0-5" class="i">+static const unsigned int gappx     = 40;       /* gaps between windows */
</a> static const unsigned int snap      = 32;       /* snap pixel */
<a href="#h0-0-7" id="h0-0-7" class="d">-static const int showbar            = 1;        /* 0 means no bar */
</a><a href="#h0-0-8" id="h0-0-8" class="i">+static const int showbar            = 0;        /* 0 means no bar */
</a> static const int topbar             = 1;        /* 0 means bottom bar */
<a href="#h0-0-10" id="h0-0-10" class="d">-static const char *fonts[]          = { &quot;monospace:size=10&quot; };
</a><a href="#h0-0-11" id="h0-0-11" class="d">-static const char dmenufont[]       = &quot;monospace:size=10&quot;;
</a><a href="#h0-0-12" id="h0-0-12" class="i">+static const char *fonts[]          = { &quot;Fira Mono:size=11&quot; };
</a> static const char col_gray1[]       = &quot;#222222&quot;;
<a href="#h0-0-14" id="h0-0-14" class="d">-static const char col_gray2[]       = &quot;#444444&quot;;
</a><a href="#h0-0-15" id="h0-0-15" class="i">+static const char col_gray2[]       = &quot;#333333&quot;;
</a> static const char col_gray3[]       = &quot;#bbbbbb&quot;;
 static const char col_gray4[]       = &quot;#eeeeee&quot;;
<a href="#h0-0-18" id="h0-0-18" class="d">-static const char col_cyan[]        = &quot;#005577&quot;;
</a><a href="#h0-0-19" id="h0-0-19" class="i">+static const char col_cyan[]        = &quot;#666666&quot;;
</a> static const char *colors[][3]      = {
 	/*               fg         bg         border   */
 	[SchemeNorm] = { col_gray3, col_gray1, col_gray2 },
<a href="#h0-1" id="h0-1" class="h">@@ -26,9 +26,10 @@ static const Rule rules[] = {
</a> 	 *	WM_CLASS(STRING) = instance, class
 	 *	WM_NAME(STRING) = title
 	 */
<a href="#h0-1-3" id="h0-1-3" class="d">-	/* class      instance    title       tags mask     isfloating   monitor */
</a><a href="#h0-1-4" id="h0-1-4" class="d">-	{ &quot;Gimp&quot;,     NULL,       NULL,       0,            1,           -1 },
</a><a href="#h0-1-5" id="h0-1-5" class="d">-	{ &quot;Firefox&quot;,  NULL,       NULL,       1 &lt;&lt; 8,       0,           -1 },
</a><a href="#h0-1-6" id="h0-1-6" class="i">+	/* class      instance    title       tags mask     iscentered   isfloating   monitor */
</a><a href="#h0-1-7" id="h0-1-7" class="i">+	{ &quot;Gimp&quot;,     NULL,       NULL,       0,            0,           1,           -1 },
</a><a href="#h0-1-8" id="h0-1-8" class="i">+	{ &quot;Firefox&quot;,  NULL,       NULL,       1 &lt;&lt; 8,       0,           0,           -1 },
</a><a href="#h0-1-9" id="h0-1-9" class="i">+	{ &quot;Center&quot;,   NULL,       NULL,       0,            1,           1,           -1 },
</a> };
 
 /* layout(s) */
<a href="#h0-2" id="h0-2" class="h">@@ -44,7 +45,7 @@ static const Layout layouts[] = {
</a> };
 
 /* key definitions */
<a href="#h0-2-3" id="h0-2-3" class="d">-#define MODKEY Mod1Mask
</a><a href="#h0-2-4" id="h0-2-4" class="i">+#define MODKEY Mod4Mask
</a> #define TAGKEYS(KEY,TAG) \
 	{ MODKEY,                       KEY,      view,           {.ui = 1 &lt;&lt; TAG} }, \
 	{ MODKEY|ControlMask,           KEY,      toggleview,     {.ui = 1 &lt;&lt; TAG} }, \
<a href="#h0-3" id="h0-3" class="h">@@ -56,13 +57,19 @@ static const Layout layouts[] = {
</a> 
 /* commands */
 static char dmenumon[2] = &quot;0&quot;; /* component of dmenucmd, manipulated in spawn() */
<a href="#h0-3-3" id="h0-3-3" class="d">-static const char *dmenucmd[] = { &quot;dmenu_run&quot;, &quot;-m&quot;, dmenumon, &quot;-fn&quot;, dmenufont, &quot;-nb&quot;, col_gray1, &quot;-nf&quot;, col_gray3, &quot;-sb&quot;, col_cyan, &quot;-sf&quot;, col_gray4, NULL };
</a><a href="#h0-3-4" id="h0-3-4" class="d">-static const char *termcmd[]  = { &quot;st&quot;, NULL };
</a><a href="#h0-3-5" id="h0-3-5" class="i">+static const char *dmenucmd[] = { &quot;dwm_run&quot;, NULL };
</a><a href="#h0-3-6" id="h0-3-6" class="i">+static const char *mancmd[]   = { &quot;popup_man&quot;, NULL };
</a><a href="#h0-3-7" id="h0-3-7" class="i">+static const char *musiccmd[] = { &quot;popup_music&quot;, NULL };
</a><a href="#h0-3-8" id="h0-3-8" class="i">+static const char *termcmd[]  = { &quot;tabbed&quot;, &quot;-r&quot;, &quot;2&quot;, &quot;-c&quot;, &quot;st&quot;, &quot;-w&quot;, &quot;&#39;&#39;&quot;, &quot;-e&quot;, NULL };
</a><a href="#h0-3-9" id="h0-3-9" class="i">+static const char *surfcmd[]  = { &quot;tabbed&quot;, &quot;-c&quot;, &quot;surf&quot;, &quot;-e&quot;, NULL };
</a> 
 static Key keys[] = {
 	/* modifier                     key        function        argument */
 	{ MODKEY,                       XK_p,      spawn,          {.v = dmenucmd } },
<a href="#h0-3-14" id="h0-3-14" class="d">-	{ MODKEY|ShiftMask,             XK_Return, spawn,          {.v = termcmd } },
</a><a href="#h0-3-15" id="h0-3-15" class="i">+	{ MODKEY,                       XK_a,      spawn,          {.v = mancmd } },
</a><a href="#h0-3-16" id="h0-3-16" class="i">+	{ MODKEY,                       XK_m,      spawn,          {.v = musiccmd } },
</a><a href="#h0-3-17" id="h0-3-17" class="i">+	{ MODKEY,                       XK_Return, spawn,          {.v = termcmd } },
</a><a href="#h0-3-18" id="h0-3-18" class="i">+	{ MODKEY,                       XK_w,      spawn,          {.v = surfcmd } },
</a> 	{ MODKEY,                       XK_b,      togglebar,      {0} },
 	{ MODKEY,                       XK_j,      focusstack,     {.i = +1 } },
 	{ MODKEY,                       XK_k,      focusstack,     {.i = -1 } },
<a href="#h0-4" id="h0-4" class="h">@@ -70,12 +77,11 @@ static Key keys[] = {
</a> 	{ MODKEY,                       XK_d,      incnmaster,     {.i = -1 } },
 	{ MODKEY,                       XK_h,      setmfact,       {.f = -0.05} },
 	{ MODKEY,                       XK_l,      setmfact,       {.f = +0.05} },
<a href="#h0-4-3" id="h0-4-3" class="d">-	{ MODKEY,                       XK_Return, zoom,           {0} },
</a><a href="#h0-4-4" id="h0-4-4" class="i">+	{ MODKEY|ShiftMask,             XK_Return, zoom,           {0} },
</a> 	{ MODKEY,                       XK_Tab,    view,           {0} },
 	{ MODKEY|ShiftMask,             XK_c,      killclient,     {0} },
 	{ MODKEY,                       XK_t,      setlayout,      {.v = &amp;layouts[0]} },
 	{ MODKEY,                       XK_f,      setlayout,      {.v = &amp;layouts[1]} },
<a href="#h0-4-9" id="h0-4-9" class="d">-	{ MODKEY,                       XK_m,      setlayout,      {.v = &amp;layouts[2]} },
</a> 	{ MODKEY,                       XK_space,  setlayout,      {0} },
 	{ MODKEY|ShiftMask,             XK_space,  togglefloating, {0} },
 	{ MODKEY,                       XK_0,      view,           {.ui = ~0 } },
<a href="#h0-5" id="h0-5" class="h">@@ -112,4 +118,3 @@ static Button buttons[] = {
</a> 	{ ClkTagBar,            MODKEY,         Button1,        tag,            {0} },
 	{ ClkTagBar,            MODKEY,         Button3,        toggletag,      {0} },
 };
<a href="#h0-5-3" id="h0-5-3" class="d">-
</a><b>diff --git a/<a id="h1" href="../file/dwm.c.html">dwm.c</a> b/<a href="../file/dwm.c.html">dwm.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -52,8 +52,8 @@
</a> #define ISVISIBLE(C)            ((C-&gt;tags &amp; C-&gt;mon-&gt;tagset[C-&gt;mon-&gt;seltags]))
 #define LENGTH(X)               (sizeof X / sizeof X[0])
 #define MOUSEMASK               (BUTTONMASK|PointerMotionMask)
<a href="#h1-0-3" id="h1-0-3" class="d">-#define WIDTH(X)                ((X)-&gt;w + 2 * (X)-&gt;bw)
</a><a href="#h1-0-4" id="h1-0-4" class="d">-#define HEIGHT(X)               ((X)-&gt;h + 2 * (X)-&gt;bw)
</a><a href="#h1-0-5" id="h1-0-5" class="i">+#define WIDTH(X)                ((X)-&gt;w + 2 * (X)-&gt;bw + gappx)
</a><a href="#h1-0-6" id="h1-0-6" class="i">+#define HEIGHT(X)               ((X)-&gt;h + 2 * (X)-&gt;bw + gappx)
</a> #define TAGMASK                 ((1 &lt;&lt; LENGTH(tags)) - 1)
 #define TEXTW(X)                (drw_fontset_getwidth(drw, (X)) + lrpad)
 
<a href="#h1-1" id="h1-1" class="h">@@ -92,7 +92,7 @@ struct Client {
</a> 	int basew, baseh, incw, inch, maxw, maxh, minw, minh;
 	int bw, oldbw;
 	unsigned int tags;
<a href="#h1-1-3" id="h1-1-3" class="d">-	int isfixed, isfloating, isurgent, neverfocus, oldstate, isfullscreen;
</a><a href="#h1-1-4" id="h1-1-4" class="i">+	int isfixed, iscentered, isfloating, isurgent, neverfocus, oldstate, isfullscreen;
</a> 	Client *next;
 	Client *snext;
 	Monitor *mon;
<a href="#h1-2" id="h1-2" class="h">@@ -137,6 +137,7 @@ typedef struct {
</a> 	const char *instance;
 	const char *title;
 	unsigned int tags;
<a href="#h1-2-3" id="h1-2-3" class="i">+	int iscentered;
</a> 	int isfloating;
 	int monitor;
 } Rule;
<a href="#h1-3" id="h1-3" class="h">@@ -297,6 +298,7 @@ applyrules(Client *c)
</a> 		&amp;&amp; (!r-&gt;class || strstr(class, r-&gt;class))
 		&amp;&amp; (!r-&gt;instance || strstr(instance, r-&gt;instance)))
 		{
<a href="#h1-3-3" id="h1-3-3" class="i">+			c-&gt;iscentered = r-&gt;iscentered;
</a> 			c-&gt;isfloating = r-&gt;isfloating;
 			c-&gt;tags |= r-&gt;tags;
 			for (m = mons; m &amp;&amp; m-&gt;num != r-&gt;monitor; m = m-&gt;next);
<a href="#h1-4" id="h1-4" class="h">@@ -1049,6 +1051,11 @@ manage(Window w, XWindowAttributes *wa)
</a> 		&amp;&amp; (c-&gt;x + (c-&gt;w / 2) &lt; c-&gt;mon-&gt;wx + c-&gt;mon-&gt;ww)) ? bh : c-&gt;mon-&gt;my);
 	c-&gt;bw = borderpx;
 
<a href="#h1-4-3" id="h1-4-3" class="i">+	if(c-&gt;iscentered) {
</a><a href="#h1-4-4" id="h1-4-4" class="i">+		c-&gt;x = (c-&gt;mon-&gt;mw - WIDTH(c)) / 2;
</a><a href="#h1-4-5" id="h1-4-5" class="i">+		c-&gt;y = (c-&gt;mon-&gt;mh - HEIGHT(c)) / 2;
</a><a href="#h1-4-6" id="h1-4-6" class="i">+	}
</a><a href="#h1-4-7" id="h1-4-7" class="i">+
</a> 	wc.border_width = c-&gt;bw;
 	XConfigureWindow(dpy, w, CWBorderWidth, &amp;wc);
 	XSetWindowBorder(dpy, w, scheme[SchemeNorm][ColBorder].pixel);
<a href="#h1-5" id="h1-5" class="h">@@ -1276,12 +1283,35 @@ void
</a> resizeclient(Client *c, int x, int y, int w, int h)
 {
 	XWindowChanges wc;
<a href="#h1-5-3" id="h1-5-3" class="i">+	unsigned int n;
</a><a href="#h1-5-4" id="h1-5-4" class="i">+	unsigned int gapoffset;
</a><a href="#h1-5-5" id="h1-5-5" class="i">+	unsigned int gapincr;
</a><a href="#h1-5-6" id="h1-5-6" class="i">+	Client *nbc;
</a> 
<a href="#h1-5-8" id="h1-5-8" class="d">-	c-&gt;oldx = c-&gt;x; c-&gt;x = wc.x = x;
</a><a href="#h1-5-9" id="h1-5-9" class="d">-	c-&gt;oldy = c-&gt;y; c-&gt;y = wc.y = y;
</a><a href="#h1-5-10" id="h1-5-10" class="d">-	c-&gt;oldw = c-&gt;w; c-&gt;w = wc.width = w;
</a><a href="#h1-5-11" id="h1-5-11" class="d">-	c-&gt;oldh = c-&gt;h; c-&gt;h = wc.height = h;
</a> 	wc.border_width = c-&gt;bw;
<a href="#h1-5-13" id="h1-5-13" class="i">+
</a><a href="#h1-5-14" id="h1-5-14" class="i">+	/* Get number of clients for the selected monitor */
</a><a href="#h1-5-15" id="h1-5-15" class="i">+	for (n = 0, nbc = nexttiled(selmon-&gt;clients); nbc; nbc = nexttiled(nbc-&gt;next), n++);
</a><a href="#h1-5-16" id="h1-5-16" class="i">+
</a><a href="#h1-5-17" id="h1-5-17" class="i">+	/* Do nothing if layout is floating */
</a><a href="#h1-5-18" id="h1-5-18" class="i">+	if (c-&gt;isfloating || selmon-&gt;lt[selmon-&gt;sellt]-&gt;arrange == NULL) {
</a><a href="#h1-5-19" id="h1-5-19" class="i">+		gapincr = gapoffset = 0;
</a><a href="#h1-5-20" id="h1-5-20" class="i">+	} else {
</a><a href="#h1-5-21" id="h1-5-21" class="i">+		/* Remove border and gap if layout is monocole or only one client */
</a><a href="#h1-5-22" id="h1-5-22" class="i">+		if (selmon-&gt;lt[selmon-&gt;sellt]-&gt;arrange == monocle || n == 1) {
</a><a href="#h1-5-23" id="h1-5-23" class="i">+			gapoffset = 0;
</a><a href="#h1-5-24" id="h1-5-24" class="i">+			gapincr = -2 * borderpx;
</a><a href="#h1-5-25" id="h1-5-25" class="i">+			wc.border_width = 0;
</a><a href="#h1-5-26" id="h1-5-26" class="i">+		} else {
</a><a href="#h1-5-27" id="h1-5-27" class="i">+			gapoffset = gappx;
</a><a href="#h1-5-28" id="h1-5-28" class="i">+			gapincr = 2 * gappx;
</a><a href="#h1-5-29" id="h1-5-29" class="i">+		}
</a><a href="#h1-5-30" id="h1-5-30" class="i">+	}
</a><a href="#h1-5-31" id="h1-5-31" class="i">+
</a><a href="#h1-5-32" id="h1-5-32" class="i">+	c-&gt;oldx = c-&gt;x; c-&gt;x = wc.x = x + gapoffset;
</a><a href="#h1-5-33" id="h1-5-33" class="i">+	c-&gt;oldy = c-&gt;y; c-&gt;y = wc.y = y + gapoffset;
</a><a href="#h1-5-34" id="h1-5-34" class="i">+	c-&gt;oldw = c-&gt;w; c-&gt;w = wc.width = w - gapincr;
</a><a href="#h1-5-35" id="h1-5-35" class="i">+	c-&gt;oldh = c-&gt;h; c-&gt;h = wc.height = h - gapincr;
</a> 	XConfigureWindow(dpy, c-&gt;win, CWX|CWY|CWWidth|CWHeight|CWBorderWidth, &amp;wc);
 	configure(c);
 	XSync(dpy, False);
</pre>
</div>
</body>
</html>
