<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>made bar togglalble - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/2aef8b9b4ce0900d241c60cb3a07e111c825d13a.html">2aef8b9b4ce0900d241c60cb3a07e111c825d13a</a>
<b>parent</b> <a href="../commit/d96307cbe4f8beee03811754f6304a810a7860e5.html">d96307cbe4f8beee03811754f6304a810a7860e5</a>
<b>Author:</b> Anselm R. Garbe &lt;<a href="mailto:arg@suckless.org">arg@suckless.org</a>&gt;
<b>Date:</b>   Tue, 15 May 2007 12:09:18 +0200

made bar togglalble
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.arg.h</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">config.default.h</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">dwm.h</a></td><td> | </td><td class="num">21</td><td><span class="i">++++++++++++</span><span class="d">---------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">layout.c</a></td><td> | </td><td class="num">6</td><td><span class="i">++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">main.c</a></td><td> | </td><td class="num">32</td><td><span class="i">+++++++++++++++++++++++++</span><span class="d">-------</span></td></tr>
</table></pre><pre>5 files changed, 47 insertions(+), 18 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.arg.h.html">config.arg.h</a> b/<a href="../file/config.arg.h.html">config.arg.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -3,6 +3,7 @@
</a>  * See LICENSE file for license details. */
 
 /* appearance */
<a href="#h0-0-3" id="h0-0-3" class="i">+#define BARPOS			BarTop /* BarBot, BarOff */
</a> #define BORDERPX		1
 #define FONT			&quot;-*-pixelcarnage monospace-*-r-*-*-14-*-*-*-*-*-*-*&quot;
 #define NORMBORDERCOLOR		&quot;#333&quot;
<a href="#h0-1" id="h0-1" class="h">@@ -11,7 +12,6 @@
</a> #define SELBORDERCOLOR		&quot;#8c8&quot;
 #define SELBGCOLOR		&quot;#555&quot;
 #define SELFGCOLOR		&quot;#fff&quot;
<a href="#h0-1-3" id="h0-1-3" class="d">-#define TOPBAR			True		/* False */
</a> 
 /* tagging */
 #define TAGS \
<a href="#h0-2" id="h0-2" class="h">@@ -47,6 +47,7 @@ static Key key[] = { \
</a> 	{ MODKEY|ShiftMask,		XK_Return,	spawn, \
 		&quot;exec urxvtcd -tr -bg &#39;#222&#39; -fg &#39;#eee&#39; -cr &#39;#eee&#39; +sb -fn &#39;&quot;FONT&quot;&#39;&quot; }, \
 	{ MODKEY,			XK_space,	setlayout,	NULL }, \
<a href="#h0-2-3" id="h0-2-3" class="i">+	{ MODKEY,			XK_b,		togglebar,	NULL }, \
</a> 	{ MODKEY,			XK_h,		incmasterw,	&quot;-32&quot; }, \
 	{ MODKEY,			XK_l,		incmasterw,	&quot;32&quot; }, \
 	{ MODKEY|ShiftMask,		XK_j,		incnmaster,	&quot;1&quot; }, \
<b>diff --git a/<a id="h1" href="../file/config.default.h.html">config.default.h</a> b/<a href="../file/config.default.h.html">config.default.h</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -3,6 +3,7 @@
</a>  * See LICENSE file for license details. */
 
 /* appearance */
<a href="#h1-0-3" id="h1-0-3" class="i">+#define BARPOS			BarTop /* BarBot, BarOff */
</a> #define BORDERPX		1
 #define FONT			&quot;-*-fixed-medium-r-normal-*-13-*-*-*-*-*-*-*&quot;
 #define NORMBORDERCOLOR		&quot;#dddddd&quot;
<a href="#h1-1" id="h1-1" class="h">@@ -11,7 +12,6 @@
</a> #define SELBORDERCOLOR		&quot;#ff0000&quot;
 #define SELBGCOLOR		&quot;#006699&quot;
 #define SELFGCOLOR		&quot;#ffffff&quot;
<a href="#h1-1-3" id="h1-1-3" class="d">-#define TOPBAR			True		/* False */
</a> 
 /* tagging */
 #define TAGS \
<a href="#h1-2" id="h1-2" class="h">@@ -45,6 +45,7 @@ static Key key[] = { \
</a> 	{ MODKEY|ShiftMask,		XK_Return,	spawn,		&quot;exec xterm&quot; }, \
 	{ MODKEY,			XK_p,		spawn, 		&quot;exe=`dmenu_path | dmenu` &amp;&amp; exec $exe&quot; }, \
 	{ MODKEY,			XK_space,	setlayout,	NULL }, \
<a href="#h1-2-3" id="h1-2-3" class="i">+	{ MODKEY,			XK_b,		togglebar,	NULL }, \
</a> 	{ MODKEY,			XK_h,		incmasterw,	&quot;-32&quot; }, \
 	{ MODKEY,			XK_l,		incmasterw,	&quot;32&quot; }, \
 	{ MODKEY|ShiftMask,		XK_j,		incnmaster,	&quot;1&quot; }, \
<b>diff --git a/<a id="h2" href="../file/dwm.h.html">dwm.h</a> b/<a href="../file/dwm.h.html">dwm.h</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -37,10 +37,11 @@
</a> /* mask shorthands, used in event.c and client.c */
 #define BUTTONMASK		(ButtonPressMask | ButtonReleaseMask)
 
<a href="#h2-0-3" id="h2-0-3" class="d">-enum { NetSupported, NetWMName, NetLast };		/* EWMH atoms */
</a><a href="#h2-0-4" id="h2-0-4" class="d">-enum { WMProtocols, WMDelete, WMState, WMLast };	/* default atoms */
</a><a href="#h2-0-5" id="h2-0-5" class="i">+enum { BarTop, BarBot, BarOff };			/* bar position */
</a> enum { CurNormal, CurResize, CurMove, CurLast };	/* cursor */
 enum { ColBorder, ColFG, ColBG, ColLast };		/* color */
<a href="#h2-0-8" id="h2-0-8" class="i">+enum { NetSupported, NetWMName, NetLast };		/* EWMH atoms */
</a><a href="#h2-0-9" id="h2-0-9" class="i">+enum { WMProtocols, WMDelete, WMState, WMLast };	/* default atoms */
</a> 
 typedef struct Client Client;
 struct Client {
<a href="#h2-1" id="h2-1" class="h">@@ -83,7 +84,7 @@ extern const char *tags[];		/* all tags */
</a> char stext[256];			/* status text */
 int screen, sx, sy, sw, sh;		/* screen geometry */
 int wax, way, wah, waw;			/* windowarea geometry */
<a href="#h2-1-3" id="h2-1-3" class="d">-unsigned int bh, blw;			/* bar height, bar layout label width */
</a><a href="#h2-1-4" id="h2-1-4" class="i">+unsigned int bh, blw, bpos;		/* bar height, bar layout label width, bar position */
</a> unsigned int ntags, numlockmask;	/* number of tags, dynamic lock mask */
 void (*handler[LASTEvent])(XEvent *);	/* event handler */
 Atom wmatom[WMLast], netatom[NetLast];
<a href="#h2-2" id="h2-2" class="h">@@ -100,13 +101,13 @@ void attach(Client *c);			/* attaches c to global client list */
</a> void configure(Client *c);		/* send synthetic configure event */
 void detach(Client *c);			/* detaches c from global client list */
 void focus(Client *c);			/* focus c, c may be NULL */
<a href="#h2-2-3" id="h2-2-3" class="d">-void focustopvisible(void);	    /* focus top visible window on stack */
</a><a href="#h2-2-4" id="h2-2-4" class="d">-void killclient(const char *arg);		/* kill sel  nicely */
</a><a href="#h2-2-5" id="h2-2-5" class="i">+void focustopvisible(void);		/* focus top visible window on stack */
</a><a href="#h2-2-6" id="h2-2-6" class="i">+void killclient(const char *arg);	/* kill sel  nicely */
</a> void manage(Window w, XWindowAttributes *wa);	/* manage new client */
 void resize(Client *c, int x, int y,
 		int w, int h, Bool sizehints);	/* resize with given coordinates c*/
 void togglefloating(const char *arg);	/* toggles sel between floating/tiled state */
<a href="#h2-2-11" id="h2-2-11" class="d">-void updatesizehints(Client *c);		/* update the size hint variables of c */
</a><a href="#h2-2-12" id="h2-2-12" class="i">+void updatesizehints(Client *c);	/* update the size hint variables of c */
</a> void updatetitle(Client *c);		/* update the name of c */
 void unmanage(Client *c);		/* destroy c */
 
<a href="#h2-3" id="h2-3" class="h">@@ -126,11 +127,13 @@ void incnmaster(const char *arg);	/* increments nmaster with arg&#39;s index value *
</a> void initlayouts(void);			/* initialize layout array */
 Client *nexttiled(Client *c);		/* returns tiled successor of c */
 void restack(void);			/* restores z layers of all clients */
<a href="#h2-3-3" id="h2-3-3" class="d">-void setlayout(const char *arg);		/* sets layout, -1 toggles */
</a><a href="#h2-3-4" id="h2-3-4" class="d">-void togglemax(const char *arg);		/* toggles maximization of floating client */
</a><a href="#h2-3-5" id="h2-3-5" class="i">+void setlayout(const char *arg);	/* sets layout, -1 toggles */
</a><a href="#h2-3-6" id="h2-3-6" class="i">+void togglebar(const char *arg);	/* shows/hides the bar */
</a><a href="#h2-3-7" id="h2-3-7" class="i">+void togglemax(const char *arg);	/* toggles maximization of floating client */
</a> void zoom(const char *arg);		/* zooms the focused client to master area, arg is ignored */
 
 /* main.c */
<a href="#h2-3-11" id="h2-3-11" class="i">+void updatebarpos(void);		/* updates the bar position */
</a> void quit(const char *arg);		/* quit dwm nicely */
 int xerror(Display *dsply, XErrorEvent *ee);	/* dwm&#39;s X error handler */
 
<a href="#h2-4" id="h2-4" class="h">@@ -139,7 +142,7 @@ void compileregs(void);			/* initialize regexps of rules defined in config.h */
</a> Bool isvisible(Client *c);		/* returns True if client is visible */
 void settags(Client *c, Client *trans);	/* sets tags of c */
 void tag(const char *arg);		/* tags sel with arg&#39;s index */
<a href="#h2-4-3" id="h2-4-3" class="d">-void toggletag(const char *arg);		/* toggles sel tags with arg&#39;s index */
</a><a href="#h2-4-4" id="h2-4-4" class="i">+void toggletag(const char *arg);	/* toggles sel tags with arg&#39;s index */
</a> void toggleview(const char *arg);	/* toggles the tag with arg&#39;s index (in)visible */
 void view(const char *arg);		/* views the tag with arg&#39;s index */
 
<b>diff --git a/<a id="h3" href="../file/layout.c.html">layout.c</a> b/<a href="../file/layout.c.html">layout.c</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -217,6 +217,12 @@ setlayout(const char *arg) {
</a> }
 
 void
<a href="#h3-0-3" id="h3-0-3" class="i">+togglebar(const char *arg) {
</a><a href="#h3-0-4" id="h3-0-4" class="i">+	bpos = (bpos == BarOff) ? BARPOS : BarOff;
</a><a href="#h3-0-5" id="h3-0-5" class="i">+	updatebarpos();
</a><a href="#h3-0-6" id="h3-0-6" class="i">+}
</a><a href="#h3-0-7" id="h3-0-7" class="i">+
</a><a href="#h3-0-8" id="h3-0-8" class="i">+void
</a> togglemax(const char *arg) {
 	XEvent ev;
 
<b>diff --git a/<a id="h4" href="../file/main.c.html">main.c</a> b/<a href="../file/main.c.html">main.c</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -18,7 +18,7 @@
</a> 
 char stext[256];
 int screen, sx, sy, sw, sh, wax, way, waw, wah;
<a href="#h4-0-3" id="h4-0-3" class="d">-unsigned int bh, ntags, numlockmask;
</a><a href="#h4-0-4" id="h4-0-4" class="i">+unsigned int bh, bpos, ntags, numlockmask;
</a> Atom wmatom[WMLast], netatom[NetLast];
 Bool *seltag;
 Bool selscreen = True;
<a href="#h4-1" id="h4-1" class="h">@@ -190,17 +190,13 @@ setup(void) {
</a> 	wa.override_redirect = 1;
 	wa.background_pixmap = ParentRelative;
 	wa.event_mask = ButtonPressMask | ExposureMask;
<a href="#h4-1-3" id="h4-1-3" class="d">-	barwin = XCreateWindow(dpy, root, sx, sy + (TOPBAR ? 0 : sh - bh), sw, bh, 0,
</a><a href="#h4-1-4" id="h4-1-4" class="i">+	barwin = XCreateWindow(dpy, root, sx, sy - bh, sw, bh, 0,
</a> 			DefaultDepth(dpy, screen), CopyFromParent, DefaultVisual(dpy, screen),
 			CWOverrideRedirect | CWBackPixmap | CWEventMask, &amp;wa);
 	XDefineCursor(dpy, barwin, cursor[CurNormal]);
<a href="#h4-1-8" id="h4-1-8" class="i">+	updatebarpos();
</a> 	XMapRaised(dpy, barwin);
 	strcpy(stext, &quot;dwm-&quot;VERSION);
<a href="#h4-1-11" id="h4-1-11" class="d">-	/* windowarea */
</a><a href="#h4-1-12" id="h4-1-12" class="d">-	wax = sx;
</a><a href="#h4-1-13" id="h4-1-13" class="d">-	way = sy + (TOPBAR ? bh : 0);
</a><a href="#h4-1-14" id="h4-1-14" class="d">-	wah = sh - bh;
</a><a href="#h4-1-15" id="h4-1-15" class="d">-	waw = sw;
</a> 	/* pixmap for everything */
 	dc.drawable = XCreatePixmap(dpy, root, sw, bh, DefaultDepth(dpy, screen));
 	dc.gc = XCreateGC(dpy, root, 0, 0);
<a href="#h4-2" id="h4-2" class="h">@@ -228,6 +224,28 @@ quit(const char *arg) {
</a> 	readin = running = False;
 }
 
<a href="#h4-2-3" id="h4-2-3" class="i">+void
</a><a href="#h4-2-4" id="h4-2-4" class="i">+updatebarpos(void) {
</a><a href="#h4-2-5" id="h4-2-5" class="i">+	wax = sx;
</a><a href="#h4-2-6" id="h4-2-6" class="i">+	way = sy;
</a><a href="#h4-2-7" id="h4-2-7" class="i">+	wah = sh;
</a><a href="#h4-2-8" id="h4-2-8" class="i">+	waw = sw;
</a><a href="#h4-2-9" id="h4-2-9" class="i">+	switch(bpos) {
</a><a href="#h4-2-10" id="h4-2-10" class="i">+	case BarTop:
</a><a href="#h4-2-11" id="h4-2-11" class="i">+		wah -= bh;
</a><a href="#h4-2-12" id="h4-2-12" class="i">+		way += bh;
</a><a href="#h4-2-13" id="h4-2-13" class="i">+		XMoveWindow(dpy, barwin, sx, sy);
</a><a href="#h4-2-14" id="h4-2-14" class="i">+		break;
</a><a href="#h4-2-15" id="h4-2-15" class="i">+	case BarBot:
</a><a href="#h4-2-16" id="h4-2-16" class="i">+		wah -= bh;
</a><a href="#h4-2-17" id="h4-2-17" class="i">+		XMoveWindow(dpy, barwin, sx, sy + wah);
</a><a href="#h4-2-18" id="h4-2-18" class="i">+		break;
</a><a href="#h4-2-19" id="h4-2-19" class="i">+	case BarOff:
</a><a href="#h4-2-20" id="h4-2-20" class="i">+		XMoveWindow(dpy, barwin, sx, sy - bh);
</a><a href="#h4-2-21" id="h4-2-21" class="i">+	}
</a><a href="#h4-2-22" id="h4-2-22" class="i">+	lt-&gt;arrange();
</a><a href="#h4-2-23" id="h4-2-23" class="i">+}
</a><a href="#h4-2-24" id="h4-2-24" class="i">+
</a> /* There&#39;s no way to check accesses to destroyed windows, thus those cases are
  * ignored (especially on UnmapNotify&#39;s).  Other types of errors call Xlibs
  * default error handler, which may call exit.
</pre>
</div>
</body>
</html>
