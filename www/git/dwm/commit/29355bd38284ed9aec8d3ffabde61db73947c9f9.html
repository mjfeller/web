<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>rearranged - dwm - dynamic window manager
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dwm Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dwm</h1><span class="desc">dynamic window manager
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/29355bd38284ed9aec8d3ffabde61db73947c9f9.html">29355bd38284ed9aec8d3ffabde61db73947c9f9</a>
<b>parent</b> <a href="../commit/91a1f6926e2594156219c1caaf4729c5d86498a5.html">91a1f6926e2594156219c1caaf4729c5d86498a5</a>
<b>Author:</b> Anselm R. Garbe &lt;<a href="mailto:garbeam@wmii.de">garbeam@wmii.de</a>&gt;
<b>Date:</b>   Fri, 14 Jul 2006 22:33:38 +0200

rearranged

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">Makefile</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="D">D</td><td><a href="#h1">bar.c</a></td><td> | </td><td class="num">54</td><td><span class="i"></span><span class="d">------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">client.c</a></td><td> | </td><td class="num">230</td><td><span class="i">++</span><span class="d">-----------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h3">dev.c</a></td><td> | </td><td class="num">151</td><td><span class="i"></span><span class="d">------------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">draw.c</a></td><td> | </td><td class="num">67</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">dwm.h</a></td><td> | </td><td class="num">31</td><td><span class="i">++++++++++++</span><span class="d">-------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">event.c</a></td><td> | </td><td class="num">96</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">---------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h7">key.c</a></td><td> | </td><td class="num">192</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">main.c</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h9">screen.c</a></td><td> | </td><td class="num">100</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>10 files changed, 461 insertions(+), 464 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/Makefile.html">Makefile</a> b/<a href="../file/Makefile.html">Makefile</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -3,7 +3,7 @@
</a> 
 include config.mk
 
<a href="#h0-0-3" id="h0-0-3" class="d">-SRC = bar.c client.c dev.c draw.c event.c main.c util.c
</a><a href="#h0-0-4" id="h0-0-4" class="i">+SRC = client.c draw.c event.c key.c main.c screen.c util.c
</a> OBJ = ${SRC:.c=.o}
 MAN1 = dwm.1 
 BIN = dwm
<b>diff --git a/<a id="h1" href="../file/bar.c.html">bar.c</a> b/<a href="../file/bar.c.html">bar.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -1,54 +0,0 @@
</a><a href="#h1-0-0" id="h1-0-0" class="d">-/*
</a><a href="#h1-0-1" id="h1-0-1" class="d">- * (C)opyright MMVI Anselm R. Garbe &lt;garbeam at gmail dot com&gt;
</a><a href="#h1-0-2" id="h1-0-2" class="d">- * See LICENSE file for license details.
</a><a href="#h1-0-3" id="h1-0-3" class="d">- */
</a><a href="#h1-0-4" id="h1-0-4" class="d">-
</a><a href="#h1-0-5" id="h1-0-5" class="d">-#include &quot;dwm.h&quot;
</a><a href="#h1-0-6" id="h1-0-6" class="d">-
</a><a href="#h1-0-7" id="h1-0-7" class="d">-void
</a><a href="#h1-0-8" id="h1-0-8" class="d">-barclick(XButtonPressedEvent *e)
</a><a href="#h1-0-9" id="h1-0-9" class="d">-{
</a><a href="#h1-0-10" id="h1-0-10" class="d">-	int x = 0;
</a><a href="#h1-0-11" id="h1-0-11" class="d">-	Arg a;
</a><a href="#h1-0-12" id="h1-0-12" class="d">-	for(a.i = 0; a.i &lt; TLast; a.i++) {
</a><a href="#h1-0-13" id="h1-0-13" class="d">-		x += textw(tags[a.i]) + dc.font.height;
</a><a href="#h1-0-14" id="h1-0-14" class="d">-		if(e-&gt;x &lt; x) {
</a><a href="#h1-0-15" id="h1-0-15" class="d">-			view(&amp;a);
</a><a href="#h1-0-16" id="h1-0-16" class="d">-			return;
</a><a href="#h1-0-17" id="h1-0-17" class="d">-		}
</a><a href="#h1-0-18" id="h1-0-18" class="d">-	}
</a><a href="#h1-0-19" id="h1-0-19" class="d">-}
</a><a href="#h1-0-20" id="h1-0-20" class="d">-
</a><a href="#h1-0-21" id="h1-0-21" class="d">-void
</a><a href="#h1-0-22" id="h1-0-22" class="d">-draw_bar()
</a><a href="#h1-0-23" id="h1-0-23" class="d">-{
</a><a href="#h1-0-24" id="h1-0-24" class="d">-	int i, modw;
</a><a href="#h1-0-25" id="h1-0-25" class="d">-	char *mode = arrange == tiling ? &quot;#&quot; : &quot;~&quot;;
</a><a href="#h1-0-26" id="h1-0-26" class="d">-
</a><a href="#h1-0-27" id="h1-0-27" class="d">-	dc.x = dc.y = 0;
</a><a href="#h1-0-28" id="h1-0-28" class="d">-	dc.w = bw;
</a><a href="#h1-0-29" id="h1-0-29" class="d">-	drawtext(NULL, False, False);
</a><a href="#h1-0-30" id="h1-0-30" class="d">-
</a><a href="#h1-0-31" id="h1-0-31" class="d">-	modw = textw(mode) + dc.font.height;
</a><a href="#h1-0-32" id="h1-0-32" class="d">-	dc.w = 0;
</a><a href="#h1-0-33" id="h1-0-33" class="d">-	for(i = 0; i &lt; TLast; i++) {
</a><a href="#h1-0-34" id="h1-0-34" class="d">-		dc.x += dc.w;
</a><a href="#h1-0-35" id="h1-0-35" class="d">-		dc.w = textw(tags[i]) + dc.font.height;
</a><a href="#h1-0-36" id="h1-0-36" class="d">-		drawtext(tags[i], i == tsel, True);
</a><a href="#h1-0-37" id="h1-0-37" class="d">-	}
</a><a href="#h1-0-38" id="h1-0-38" class="d">-	if(sel) {
</a><a href="#h1-0-39" id="h1-0-39" class="d">-		dc.x += dc.w;
</a><a href="#h1-0-40" id="h1-0-40" class="d">-		dc.w = textw(sel-&gt;name) + dc.font.height;
</a><a href="#h1-0-41" id="h1-0-41" class="d">-		drawtext(sel-&gt;name, True, True);
</a><a href="#h1-0-42" id="h1-0-42" class="d">-	}
</a><a href="#h1-0-43" id="h1-0-43" class="d">-	dc.w = textw(stext) + dc.font.height;
</a><a href="#h1-0-44" id="h1-0-44" class="d">-	dc.x = bx + bw - dc.w - modw;
</a><a href="#h1-0-45" id="h1-0-45" class="d">-	drawtext(stext, False, False);
</a><a href="#h1-0-46" id="h1-0-46" class="d">-
</a><a href="#h1-0-47" id="h1-0-47" class="d">-	dc.x = bx + bw - modw;
</a><a href="#h1-0-48" id="h1-0-48" class="d">-	dc.w = modw;
</a><a href="#h1-0-49" id="h1-0-49" class="d">-	drawtext(mode, True, True);
</a><a href="#h1-0-50" id="h1-0-50" class="d">-
</a><a href="#h1-0-51" id="h1-0-51" class="d">-	XCopyArea(dpy, dc.drawable, barwin, dc.gc, 0, 0, bw, bh, 0, 0);
</a><a href="#h1-0-52" id="h1-0-52" class="d">-	XFlush(dpy);
</a><a href="#h1-0-53" id="h1-0-53" class="d">-}
</a><b>diff --git a/<a id="h2" href="../file/client.c.html">client.c</a> b/<a href="../file/client.c.html">client.c</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -11,14 +11,12 @@
</a> 
 #include &quot;dwm.h&quot;
 
<a href="#h2-0-3" id="h2-0-3" class="d">-void (*arrange)(Arg *) = tiling;
</a><a href="#h2-0-4" id="h2-0-4" class="d">-
</a> static Rule rule[] = {
 	/* class			instance	tags						floating */
 	{ &quot;Firefox-bin&quot;,	&quot;Gecko&quot;,	{ [Twww] = &quot;www&quot; },			False },
 };
 
<a href="#h2-0-10" id="h2-0-10" class="d">-static Client *
</a><a href="#h2-0-11" id="h2-0-11" class="i">+Client *
</a> next(Client *c)
 {
 	for(; c &amp;&amp; !c-&gt;tags[tsel]; c = c-&gt;next);
<a href="#h2-1" id="h2-1" class="h">@@ -26,202 +24,12 @@ next(Client *c)
</a> }
 
 void
<a href="#h2-1-3" id="h2-1-3" class="d">-zoom(Arg *arg)
</a><a href="#h2-1-4" id="h2-1-4" class="d">-{
</a><a href="#h2-1-5" id="h2-1-5" class="d">-	Client **l, *c;
</a><a href="#h2-1-6" id="h2-1-6" class="d">-
</a><a href="#h2-1-7" id="h2-1-7" class="d">-	if(!sel)
</a><a href="#h2-1-8" id="h2-1-8" class="d">-		return;
</a><a href="#h2-1-9" id="h2-1-9" class="d">-
</a><a href="#h2-1-10" id="h2-1-10" class="d">-	if(sel == next(clients) &amp;&amp; sel-&gt;next)  {
</a><a href="#h2-1-11" id="h2-1-11" class="d">-		if((c = next(sel-&gt;next)))
</a><a href="#h2-1-12" id="h2-1-12" class="d">-			sel = c;
</a><a href="#h2-1-13" id="h2-1-13" class="d">-	}
</a><a href="#h2-1-14" id="h2-1-14" class="d">-
</a><a href="#h2-1-15" id="h2-1-15" class="d">-	for(l = &amp;clients; *l &amp;&amp; *l != sel; l = &amp;(*l)-&gt;next);
</a><a href="#h2-1-16" id="h2-1-16" class="d">-	*l = sel-&gt;next;
</a><a href="#h2-1-17" id="h2-1-17" class="d">-
</a><a href="#h2-1-18" id="h2-1-18" class="d">-	sel-&gt;next = clients; /* pop */
</a><a href="#h2-1-19" id="h2-1-19" class="d">-	clients = sel;
</a><a href="#h2-1-20" id="h2-1-20" class="d">-	arrange(NULL);
</a><a href="#h2-1-21" id="h2-1-21" class="d">-	focus(sel);
</a><a href="#h2-1-22" id="h2-1-22" class="d">-}
</a><a href="#h2-1-23" id="h2-1-23" class="d">-
</a><a href="#h2-1-24" id="h2-1-24" class="d">-void
</a><a href="#h2-1-25" id="h2-1-25" class="d">-max(Arg *arg)
</a><a href="#h2-1-26" id="h2-1-26" class="d">-{
</a><a href="#h2-1-27" id="h2-1-27" class="d">-	if(!sel)
</a><a href="#h2-1-28" id="h2-1-28" class="d">-		return;
</a><a href="#h2-1-29" id="h2-1-29" class="d">-	sel-&gt;x = sx;
</a><a href="#h2-1-30" id="h2-1-30" class="d">-	sel-&gt;y = sy + bh;
</a><a href="#h2-1-31" id="h2-1-31" class="d">-	sel-&gt;w = sw - 2 * sel-&gt;border;
</a><a href="#h2-1-32" id="h2-1-32" class="d">-	sel-&gt;h = sh - 2 * sel-&gt;border - bh;
</a><a href="#h2-1-33" id="h2-1-33" class="d">-	craise(sel);
</a><a href="#h2-1-34" id="h2-1-34" class="d">-	resize(sel, False);
</a><a href="#h2-1-35" id="h2-1-35" class="d">-}
</a><a href="#h2-1-36" id="h2-1-36" class="d">-
</a><a href="#h2-1-37" id="h2-1-37" class="d">-void
</a><a href="#h2-1-38" id="h2-1-38" class="d">-view(Arg *arg)
</a><a href="#h2-1-39" id="h2-1-39" class="d">-{
</a><a href="#h2-1-40" id="h2-1-40" class="d">-	Client *c;
</a><a href="#h2-1-41" id="h2-1-41" class="d">-
</a><a href="#h2-1-42" id="h2-1-42" class="d">-	tsel = arg-&gt;i;
</a><a href="#h2-1-43" id="h2-1-43" class="d">-	arrange(NULL);
</a><a href="#h2-1-44" id="h2-1-44" class="d">-
</a><a href="#h2-1-45" id="h2-1-45" class="d">-	for(c = clients; c; c = next(c-&gt;next))
</a><a href="#h2-1-46" id="h2-1-46" class="d">-		draw_client(c);
</a><a href="#h2-1-47" id="h2-1-47" class="d">-	draw_bar();
</a><a href="#h2-1-48" id="h2-1-48" class="d">-}
</a><a href="#h2-1-49" id="h2-1-49" class="d">-
</a><a href="#h2-1-50" id="h2-1-50" class="d">-void
</a><a href="#h2-1-51" id="h2-1-51" class="d">-tappend(Arg *arg)
</a><a href="#h2-1-52" id="h2-1-52" class="d">-{
</a><a href="#h2-1-53" id="h2-1-53" class="d">-	if(!sel)
</a><a href="#h2-1-54" id="h2-1-54" class="d">-		return;
</a><a href="#h2-1-55" id="h2-1-55" class="d">-
</a><a href="#h2-1-56" id="h2-1-56" class="d">-	sel-&gt;tags[arg-&gt;i] = tags[arg-&gt;i];
</a><a href="#h2-1-57" id="h2-1-57" class="d">-	arrange(NULL);
</a><a href="#h2-1-58" id="h2-1-58" class="d">-}
</a><a href="#h2-1-59" id="h2-1-59" class="d">-
</a><a href="#h2-1-60" id="h2-1-60" class="d">-void
</a><a href="#h2-1-61" id="h2-1-61" class="d">-ttrunc(Arg *arg)
</a><a href="#h2-1-62" id="h2-1-62" class="d">-{
</a><a href="#h2-1-63" id="h2-1-63" class="d">-	int i;
</a><a href="#h2-1-64" id="h2-1-64" class="d">-	if(!sel)
</a><a href="#h2-1-65" id="h2-1-65" class="d">-		return;
</a><a href="#h2-1-66" id="h2-1-66" class="d">-
</a><a href="#h2-1-67" id="h2-1-67" class="d">-	for(i = 0; i &lt; TLast; i++)
</a><a href="#h2-1-68" id="h2-1-68" class="d">-		sel-&gt;tags[i] = NULL;
</a><a href="#h2-1-69" id="h2-1-69" class="d">-	tappend(arg);
</a><a href="#h2-1-70" id="h2-1-70" class="d">-}
</a><a href="#h2-1-71" id="h2-1-71" class="d">-
</a><a href="#h2-1-72" id="h2-1-72" class="d">-static void
</a> ban_client(Client *c)
 {
 	XMoveWindow(dpy, c-&gt;win, c-&gt;x + 2 * sw, c-&gt;y);
 	XMoveWindow(dpy, c-&gt;title, c-&gt;tx + 2 * sw, c-&gt;ty);
 }
 
<a href="#h2-1-79" id="h2-1-79" class="d">-void
</a><a href="#h2-1-80" id="h2-1-80" class="d">-floating(Arg *arg)
</a><a href="#h2-1-81" id="h2-1-81" class="d">-{
</a><a href="#h2-1-82" id="h2-1-82" class="d">-	Client *c;
</a><a href="#h2-1-83" id="h2-1-83" class="d">-
</a><a href="#h2-1-84" id="h2-1-84" class="d">-	arrange = floating;
</a><a href="#h2-1-85" id="h2-1-85" class="d">-	for(c = clients; c; c = c-&gt;next) {
</a><a href="#h2-1-86" id="h2-1-86" class="d">-		if(c-&gt;tags[tsel])
</a><a href="#h2-1-87" id="h2-1-87" class="d">-			resize(c, True);
</a><a href="#h2-1-88" id="h2-1-88" class="d">-		else
</a><a href="#h2-1-89" id="h2-1-89" class="d">-			ban_client(c);
</a><a href="#h2-1-90" id="h2-1-90" class="d">-	}
</a><a href="#h2-1-91" id="h2-1-91" class="d">-	if(sel &amp;&amp; !sel-&gt;tags[tsel]) {
</a><a href="#h2-1-92" id="h2-1-92" class="d">-		if((sel = next(clients))) {
</a><a href="#h2-1-93" id="h2-1-93" class="d">-			craise(sel);
</a><a href="#h2-1-94" id="h2-1-94" class="d">-			focus(sel);
</a><a href="#h2-1-95" id="h2-1-95" class="d">-		}
</a><a href="#h2-1-96" id="h2-1-96" class="d">-	}
</a><a href="#h2-1-97" id="h2-1-97" class="d">-	draw_bar();
</a><a href="#h2-1-98" id="h2-1-98" class="d">-}
</a><a href="#h2-1-99" id="h2-1-99" class="d">-
</a><a href="#h2-1-100" id="h2-1-100" class="d">-void
</a><a href="#h2-1-101" id="h2-1-101" class="d">-tiling(Arg *arg)
</a><a href="#h2-1-102" id="h2-1-102" class="d">-{
</a><a href="#h2-1-103" id="h2-1-103" class="d">-	Client *c;
</a><a href="#h2-1-104" id="h2-1-104" class="d">-	int n, i, w, h;
</a><a href="#h2-1-105" id="h2-1-105" class="d">-
</a><a href="#h2-1-106" id="h2-1-106" class="d">-	w = sw - mw;
</a><a href="#h2-1-107" id="h2-1-107" class="d">-	arrange = tiling;
</a><a href="#h2-1-108" id="h2-1-108" class="d">-	for(n = 0, c = clients; c; c = c-&gt;next)
</a><a href="#h2-1-109" id="h2-1-109" class="d">-		if(c-&gt;tags[tsel] &amp;&amp; !c-&gt;floating)
</a><a href="#h2-1-110" id="h2-1-110" class="d">-			n++;
</a><a href="#h2-1-111" id="h2-1-111" class="d">-
</a><a href="#h2-1-112" id="h2-1-112" class="d">-	if(n &gt; 1)
</a><a href="#h2-1-113" id="h2-1-113" class="d">-		h = (sh - bh) / (n - 1);
</a><a href="#h2-1-114" id="h2-1-114" class="d">-	else
</a><a href="#h2-1-115" id="h2-1-115" class="d">-		h = sh - bh;
</a><a href="#h2-1-116" id="h2-1-116" class="d">-
</a><a href="#h2-1-117" id="h2-1-117" class="d">-	for(i = 0, c = clients; c; c = c-&gt;next) {
</a><a href="#h2-1-118" id="h2-1-118" class="d">-		if(c-&gt;tags[tsel]) {
</a><a href="#h2-1-119" id="h2-1-119" class="d">-			if(c-&gt;floating) {
</a><a href="#h2-1-120" id="h2-1-120" class="d">-				craise(c);
</a><a href="#h2-1-121" id="h2-1-121" class="d">-				resize(c, True);
</a><a href="#h2-1-122" id="h2-1-122" class="d">-				continue;
</a><a href="#h2-1-123" id="h2-1-123" class="d">-			}
</a><a href="#h2-1-124" id="h2-1-124" class="d">-			if(n == 1) {
</a><a href="#h2-1-125" id="h2-1-125" class="d">-				c-&gt;x = sx;
</a><a href="#h2-1-126" id="h2-1-126" class="d">-				c-&gt;y = sy + bh;
</a><a href="#h2-1-127" id="h2-1-127" class="d">-				c-&gt;w = sw - 2 * c-&gt;border;
</a><a href="#h2-1-128" id="h2-1-128" class="d">-				c-&gt;h = sh - 2 * c-&gt;border - bh;
</a><a href="#h2-1-129" id="h2-1-129" class="d">-			}
</a><a href="#h2-1-130" id="h2-1-130" class="d">-			else if(i == 0) {
</a><a href="#h2-1-131" id="h2-1-131" class="d">-				c-&gt;x = sx;
</a><a href="#h2-1-132" id="h2-1-132" class="d">-				c-&gt;y = sy + bh;
</a><a href="#h2-1-133" id="h2-1-133" class="d">-				c-&gt;w = mw - 2 * c-&gt;border;
</a><a href="#h2-1-134" id="h2-1-134" class="d">-				c-&gt;h = sh - 2 * c-&gt;border - bh;
</a><a href="#h2-1-135" id="h2-1-135" class="d">-			}
</a><a href="#h2-1-136" id="h2-1-136" class="d">-			else {
</a><a href="#h2-1-137" id="h2-1-137" class="d">-				c-&gt;x = sx + mw;
</a><a href="#h2-1-138" id="h2-1-138" class="d">-				c-&gt;y = sy + (i - 1) * h + bh;
</a><a href="#h2-1-139" id="h2-1-139" class="d">-				c-&gt;w = w - 2 * c-&gt;border;
</a><a href="#h2-1-140" id="h2-1-140" class="d">-				c-&gt;h = h - 2 * c-&gt;border;
</a><a href="#h2-1-141" id="h2-1-141" class="d">-			}
</a><a href="#h2-1-142" id="h2-1-142" class="d">-			resize(c, False);
</a><a href="#h2-1-143" id="h2-1-143" class="d">-			i++;
</a><a href="#h2-1-144" id="h2-1-144" class="d">-		}
</a><a href="#h2-1-145" id="h2-1-145" class="d">-		else
</a><a href="#h2-1-146" id="h2-1-146" class="d">-			ban_client(c);
</a><a href="#h2-1-147" id="h2-1-147" class="d">-	}
</a><a href="#h2-1-148" id="h2-1-148" class="d">-	if(!sel || (sel &amp;&amp; !sel-&gt;tags[tsel])) {
</a><a href="#h2-1-149" id="h2-1-149" class="d">-		if((sel = next(clients))) {
</a><a href="#h2-1-150" id="h2-1-150" class="d">-			craise(sel);
</a><a href="#h2-1-151" id="h2-1-151" class="d">-			focus(sel);
</a><a href="#h2-1-152" id="h2-1-152" class="d">-		}
</a><a href="#h2-1-153" id="h2-1-153" class="d">-	}
</a><a href="#h2-1-154" id="h2-1-154" class="d">-	draw_bar();
</a><a href="#h2-1-155" id="h2-1-155" class="d">-}
</a><a href="#h2-1-156" id="h2-1-156" class="d">-
</a><a href="#h2-1-157" id="h2-1-157" class="d">-void
</a><a href="#h2-1-158" id="h2-1-158" class="d">-prevc(Arg *arg)
</a><a href="#h2-1-159" id="h2-1-159" class="d">-{
</a><a href="#h2-1-160" id="h2-1-160" class="d">-	Client *c;
</a><a href="#h2-1-161" id="h2-1-161" class="d">-
</a><a href="#h2-1-162" id="h2-1-162" class="d">-	if(!sel)
</a><a href="#h2-1-163" id="h2-1-163" class="d">-		return;
</a><a href="#h2-1-164" id="h2-1-164" class="d">-
</a><a href="#h2-1-165" id="h2-1-165" class="d">-	if((c = sel-&gt;revert &amp;&amp; sel-&gt;revert-&gt;tags[tsel] ? sel-&gt;revert : NULL)) {
</a><a href="#h2-1-166" id="h2-1-166" class="d">-		craise(c);
</a><a href="#h2-1-167" id="h2-1-167" class="d">-		focus(c);
</a><a href="#h2-1-168" id="h2-1-168" class="d">-	}
</a><a href="#h2-1-169" id="h2-1-169" class="d">-}
</a><a href="#h2-1-170" id="h2-1-170" class="d">-
</a><a href="#h2-1-171" id="h2-1-171" class="d">-void
</a><a href="#h2-1-172" id="h2-1-172" class="d">-nextc(Arg *arg)
</a><a href="#h2-1-173" id="h2-1-173" class="d">-{
</a><a href="#h2-1-174" id="h2-1-174" class="d">-	Client *c;
</a><a href="#h2-1-175" id="h2-1-175" class="d">-   
</a><a href="#h2-1-176" id="h2-1-176" class="d">-	if(!sel)
</a><a href="#h2-1-177" id="h2-1-177" class="d">-		return;
</a><a href="#h2-1-178" id="h2-1-178" class="d">-
</a><a href="#h2-1-179" id="h2-1-179" class="d">-	if(!(c = next(sel-&gt;next)))
</a><a href="#h2-1-180" id="h2-1-180" class="d">-		c = next(clients);
</a><a href="#h2-1-181" id="h2-1-181" class="d">-	if(c) {
</a><a href="#h2-1-182" id="h2-1-182" class="d">-		craise(c);
</a><a href="#h2-1-183" id="h2-1-183" class="d">-		c-&gt;revert = sel;
</a><a href="#h2-1-184" id="h2-1-184" class="d">-		focus(c);
</a><a href="#h2-1-185" id="h2-1-185" class="d">-	}
</a><a href="#h2-1-186" id="h2-1-186" class="d">-}
</a><a href="#h2-1-187" id="h2-1-187" class="d">-
</a><a href="#h2-1-188" id="h2-1-188" class="d">-void
</a><a href="#h2-1-189" id="h2-1-189" class="d">-ckill(Arg *arg)
</a><a href="#h2-1-190" id="h2-1-190" class="d">-{
</a><a href="#h2-1-191" id="h2-1-191" class="d">-	if(!sel)
</a><a href="#h2-1-192" id="h2-1-192" class="d">-		return;
</a><a href="#h2-1-193" id="h2-1-193" class="d">-	if(sel-&gt;proto &amp; WM_PROTOCOL_DELWIN)
</a><a href="#h2-1-194" id="h2-1-194" class="d">-		send_message(sel-&gt;win, wm_atom[WMProtocols], wm_atom[WMDelete]);
</a><a href="#h2-1-195" id="h2-1-195" class="d">-	else
</a><a href="#h2-1-196" id="h2-1-196" class="d">-		XKillClient(dpy, sel-&gt;win);
</a><a href="#h2-1-197" id="h2-1-197" class="d">-}
</a><a href="#h2-1-198" id="h2-1-198" class="d">-
</a> static void
 resize_title(Client *c)
 {
<a href="#h2-2" id="h2-2" class="h">@@ -230,8 +38,8 @@ resize_title(Client *c)
</a> 	c-&gt;tw = 0;
 	for(i = 0; i &lt; TLast; i++)
 		if(c-&gt;tags[i])
<a href="#h2-2-3" id="h2-2-3" class="d">-			c-&gt;tw += textw(c-&gt;tags[i]) + dc.font.height;
</a><a href="#h2-2-4" id="h2-2-4" class="d">-	c-&gt;tw += textw(c-&gt;name) + dc.font.height;
</a><a href="#h2-2-5" id="h2-2-5" class="i">+			c-&gt;tw += textw(c-&gt;tags[i]);
</a><a href="#h2-2-6" id="h2-2-6" class="i">+	c-&gt;tw += textw(c-&gt;name);
</a> 	if(c-&gt;tw &gt; c-&gt;w)
 		c-&gt;tw = c-&gt;w + 2;
 	c-&gt;tx = c-&gt;x + c-&gt;w - c-&gt;tw + 2;
<a href="#h2-3" id="h2-3" class="h">@@ -584,35 +392,3 @@ getclient(Window w)
</a> 			return c;
 	return NULL;
 }
<a href="#h2-3-3" id="h2-3-3" class="d">-
</a><a href="#h2-3-4" id="h2-3-4" class="d">-void
</a><a href="#h2-3-5" id="h2-3-5" class="d">-draw_client(Client *c)
</a><a href="#h2-3-6" id="h2-3-6" class="d">-{
</a><a href="#h2-3-7" id="h2-3-7" class="d">-	int i;
</a><a href="#h2-3-8" id="h2-3-8" class="d">-	if(c == sel) {
</a><a href="#h2-3-9" id="h2-3-9" class="d">-		draw_bar();
</a><a href="#h2-3-10" id="h2-3-10" class="d">-		XUnmapWindow(dpy, c-&gt;title);
</a><a href="#h2-3-11" id="h2-3-11" class="d">-		XSetWindowBorder(dpy, c-&gt;win, dc.fg);
</a><a href="#h2-3-12" id="h2-3-12" class="d">-		return;
</a><a href="#h2-3-13" id="h2-3-13" class="d">-	}
</a><a href="#h2-3-14" id="h2-3-14" class="d">-
</a><a href="#h2-3-15" id="h2-3-15" class="d">-	XSetWindowBorder(dpy, c-&gt;win, dc.bg);
</a><a href="#h2-3-16" id="h2-3-16" class="d">-	XMapWindow(dpy, c-&gt;title);
</a><a href="#h2-3-17" id="h2-3-17" class="d">-
</a><a href="#h2-3-18" id="h2-3-18" class="d">-	dc.x = dc.y = 0;
</a><a href="#h2-3-19" id="h2-3-19" class="d">-
</a><a href="#h2-3-20" id="h2-3-20" class="d">-	dc.w = 0;
</a><a href="#h2-3-21" id="h2-3-21" class="d">-	for(i = 0; i &lt; TLast; i++) {
</a><a href="#h2-3-22" id="h2-3-22" class="d">-		if(c-&gt;tags[i]) {
</a><a href="#h2-3-23" id="h2-3-23" class="d">-			dc.x += dc.w;
</a><a href="#h2-3-24" id="h2-3-24" class="d">-			dc.w = textw(c-&gt;tags[i]) + dc.font.height;
</a><a href="#h2-3-25" id="h2-3-25" class="d">-			drawtext(c-&gt;tags[i], False, True);
</a><a href="#h2-3-26" id="h2-3-26" class="d">-		}
</a><a href="#h2-3-27" id="h2-3-27" class="d">-	}
</a><a href="#h2-3-28" id="h2-3-28" class="d">-	dc.x += dc.w;
</a><a href="#h2-3-29" id="h2-3-29" class="d">-	dc.w = textw(c-&gt;name) + dc.font.height;
</a><a href="#h2-3-30" id="h2-3-30" class="d">-	drawtext(c-&gt;name, False, True);
</a><a href="#h2-3-31" id="h2-3-31" class="d">-	XCopyArea(dpy, dc.drawable, c-&gt;title, dc.gc,
</a><a href="#h2-3-32" id="h2-3-32" class="d">-			0, 0, c-&gt;tw, c-&gt;th, 0, 0);
</a><a href="#h2-3-33" id="h2-3-33" class="d">-	XFlush(dpy);
</a><a href="#h2-3-34" id="h2-3-34" class="d">-}
</a><b>diff --git a/<a id="h3" href="../file/dev.c.html">dev.c</a> b/<a href="../file/dev.c.html">dev.c</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -1,151 +0,0 @@
</a><a href="#h3-0-0" id="h3-0-0" class="d">-/*
</a><a href="#h3-0-1" id="h3-0-1" class="d">- * (C)opyright MMVI Anselm R. Garbe &lt;garbeam at gmail dot com&gt;
</a><a href="#h3-0-2" id="h3-0-2" class="d">- * See LICENSE file for license details.
</a><a href="#h3-0-3" id="h3-0-3" class="d">- */
</a><a href="#h3-0-4" id="h3-0-4" class="d">-
</a><a href="#h3-0-5" id="h3-0-5" class="d">-#include &quot;dwm.h&quot;
</a><a href="#h3-0-6" id="h3-0-6" class="d">-
</a><a href="#h3-0-7" id="h3-0-7" class="d">-#include &lt;stdlib.h&gt;
</a><a href="#h3-0-8" id="h3-0-8" class="d">-#include &lt;string.h&gt;
</a><a href="#h3-0-9" id="h3-0-9" class="d">-#include &lt;unistd.h&gt;
</a><a href="#h3-0-10" id="h3-0-10" class="d">-#include &lt;X11/keysym.h&gt;
</a><a href="#h3-0-11" id="h3-0-11" class="d">-
</a><a href="#h3-0-12" id="h3-0-12" class="d">-/********** CUSTOMIZE **********/
</a><a href="#h3-0-13" id="h3-0-13" class="d">-
</a><a href="#h3-0-14" id="h3-0-14" class="d">-const char *term[] = { 
</a><a href="#h3-0-15" id="h3-0-15" class="d">-	&quot;urxvtc&quot;, &quot;-tr&quot;, &quot;+sb&quot;, &quot;-bg&quot;, &quot;black&quot;, &quot;-fg&quot;, &quot;white&quot;, &quot;-fn&quot;,
</a><a href="#h3-0-16" id="h3-0-16" class="d">-	&quot;-*-terminus-medium-*-*-*-13-*-*-*-*-*-iso10646-*&quot;,NULL
</a><a href="#h3-0-17" id="h3-0-17" class="d">-};
</a><a href="#h3-0-18" id="h3-0-18" class="d">-const char *browse[] = { &quot;firefox&quot;, NULL };
</a><a href="#h3-0-19" id="h3-0-19" class="d">-const char *xlock[] = { &quot;xlock&quot;, NULL };
</a><a href="#h3-0-20" id="h3-0-20" class="d">-
</a><a href="#h3-0-21" id="h3-0-21" class="d">-static Key key[] = {
</a><a href="#h3-0-22" id="h3-0-22" class="d">-	/* modifier				key			function	arguments */
</a><a href="#h3-0-23" id="h3-0-23" class="d">-	{ Mod1Mask,				XK_Return,	zoom,		{ 0 } },
</a><a href="#h3-0-24" id="h3-0-24" class="d">-	{ Mod1Mask,				XK_k,		prevc,		{ 0 } },
</a><a href="#h3-0-25" id="h3-0-25" class="d">-	{ Mod1Mask,				XK_j,		nextc,		{ 0 } }, 
</a><a href="#h3-0-26" id="h3-0-26" class="d">-	{ Mod1Mask,				XK_m,		max,		{ 0 } }, 
</a><a href="#h3-0-27" id="h3-0-27" class="d">-	{ Mod1Mask,				XK_0,		view,		{ .i = Tscratch } }, 
</a><a href="#h3-0-28" id="h3-0-28" class="d">-	{ Mod1Mask,				XK_1,		view,		{ .i = Tdev } }, 
</a><a href="#h3-0-29" id="h3-0-29" class="d">-	{ Mod1Mask,				XK_2,		view,		{ .i = Twww } }, 
</a><a href="#h3-0-30" id="h3-0-30" class="d">-	{ Mod1Mask,				XK_3,		view,		{ .i = Twork } }, 
</a><a href="#h3-0-31" id="h3-0-31" class="d">-	{ Mod1Mask,				XK_space,	tiling,		{ 0 } }, 
</a><a href="#h3-0-32" id="h3-0-32" class="d">-	{ Mod1Mask|ShiftMask,	XK_space,	floating,	{ 0 } }, 
</a><a href="#h3-0-33" id="h3-0-33" class="d">-	{ Mod1Mask|ShiftMask,	XK_0,		ttrunc,		{ .i = Tscratch } }, 
</a><a href="#h3-0-34" id="h3-0-34" class="d">-	{ Mod1Mask|ShiftMask,	XK_1,		ttrunc,		{ .i = Tdev } }, 
</a><a href="#h3-0-35" id="h3-0-35" class="d">-	{ Mod1Mask|ShiftMask,	XK_2,		ttrunc,		{ .i = Twww } }, 
</a><a href="#h3-0-36" id="h3-0-36" class="d">-	{ Mod1Mask|ShiftMask,	XK_3,		ttrunc,		{ .i = Twork } }, 
</a><a href="#h3-0-37" id="h3-0-37" class="d">-	{ Mod1Mask|ShiftMask,	XK_c,		ckill,		{ 0 } }, 
</a><a href="#h3-0-38" id="h3-0-38" class="d">-	{ Mod1Mask|ShiftMask,	XK_q,		quit,		{ 0 } },
</a><a href="#h3-0-39" id="h3-0-39" class="d">-	{ Mod1Mask|ShiftMask,	XK_Return,	spawn,		{ .argv = term } },
</a><a href="#h3-0-40" id="h3-0-40" class="d">-	{ Mod1Mask|ShiftMask,	XK_w,		spawn,		{ .argv = browse } },
</a><a href="#h3-0-41" id="h3-0-41" class="d">-	{ Mod1Mask|ShiftMask,	XK_l,		spawn,		{ .argv = xlock } },
</a><a href="#h3-0-42" id="h3-0-42" class="d">-	{ ControlMask,			XK_0,		tappend,	{ .i = Tscratch } }, 
</a><a href="#h3-0-43" id="h3-0-43" class="d">-	{ ControlMask,			XK_1,		tappend,	{ .i = Tdev } }, 
</a><a href="#h3-0-44" id="h3-0-44" class="d">-	{ ControlMask,			XK_2,		tappend,	{ .i = Twww } }, 
</a><a href="#h3-0-45" id="h3-0-45" class="d">-	{ ControlMask,			XK_3,		tappend,	{ .i = Twork } }, 
</a><a href="#h3-0-46" id="h3-0-46" class="d">-};
</a><a href="#h3-0-47" id="h3-0-47" class="d">-
</a><a href="#h3-0-48" id="h3-0-48" class="d">-/********** CUSTOMIZE **********/
</a><a href="#h3-0-49" id="h3-0-49" class="d">-
</a><a href="#h3-0-50" id="h3-0-50" class="d">-void
</a><a href="#h3-0-51" id="h3-0-51" class="d">-update_keys(void)
</a><a href="#h3-0-52" id="h3-0-52" class="d">-{
</a><a href="#h3-0-53" id="h3-0-53" class="d">-	static unsigned int len = key ? sizeof(key) / sizeof(key[0]) : 0;
</a><a href="#h3-0-54" id="h3-0-54" class="d">-	unsigned int i;
</a><a href="#h3-0-55" id="h3-0-55" class="d">-	KeyCode code;
</a><a href="#h3-0-56" id="h3-0-56" class="d">-
</a><a href="#h3-0-57" id="h3-0-57" class="d">-	for(i = 0; i &lt; len; i++) {
</a><a href="#h3-0-58" id="h3-0-58" class="d">-		code = XKeysymToKeycode(dpy, key[i].keysym);
</a><a href="#h3-0-59" id="h3-0-59" class="d">-		XUngrabKey(dpy, code, key[i].mod, root);
</a><a href="#h3-0-60" id="h3-0-60" class="d">-		XGrabKey(dpy, code, key[i].mod, root, True, GrabModeAsync, GrabModeAsync);
</a><a href="#h3-0-61" id="h3-0-61" class="d">-	}
</a><a href="#h3-0-62" id="h3-0-62" class="d">-}
</a><a href="#h3-0-63" id="h3-0-63" class="d">-
</a><a href="#h3-0-64" id="h3-0-64" class="d">-void
</a><a href="#h3-0-65" id="h3-0-65" class="d">-keypress(XEvent *e)
</a><a href="#h3-0-66" id="h3-0-66" class="d">-{
</a><a href="#h3-0-67" id="h3-0-67" class="d">-	XKeyEvent *ev = &amp;e-&gt;xkey;
</a><a href="#h3-0-68" id="h3-0-68" class="d">-	static unsigned int len = key ? sizeof(key) / sizeof(key[0]) : 0;
</a><a href="#h3-0-69" id="h3-0-69" class="d">-	unsigned int i;
</a><a href="#h3-0-70" id="h3-0-70" class="d">-	KeySym keysym;
</a><a href="#h3-0-71" id="h3-0-71" class="d">-
</a><a href="#h3-0-72" id="h3-0-72" class="d">-	keysym = XKeycodeToKeysym(dpy, (KeyCode)ev-&gt;keycode, 0);
</a><a href="#h3-0-73" id="h3-0-73" class="d">-	for(i = 0; i &lt; len; i++)
</a><a href="#h3-0-74" id="h3-0-74" class="d">-		if((keysym == key[i].keysym) &amp;&amp; (key[i].mod == ev-&gt;state)) {
</a><a href="#h3-0-75" id="h3-0-75" class="d">-			if(key[i].func)
</a><a href="#h3-0-76" id="h3-0-76" class="d">-				key[i].func(&amp;key[i].arg);
</a><a href="#h3-0-77" id="h3-0-77" class="d">-			return;
</a><a href="#h3-0-78" id="h3-0-78" class="d">-		}
</a><a href="#h3-0-79" id="h3-0-79" class="d">-}
</a><a href="#h3-0-80" id="h3-0-80" class="d">-
</a><a href="#h3-0-81" id="h3-0-81" class="d">-#define ButtonMask      (ButtonPressMask | ButtonReleaseMask)
</a><a href="#h3-0-82" id="h3-0-82" class="d">-#define MouseMask       (ButtonMask | PointerMotionMask)
</a><a href="#h3-0-83" id="h3-0-83" class="d">-
</a><a href="#h3-0-84" id="h3-0-84" class="d">-void
</a><a href="#h3-0-85" id="h3-0-85" class="d">-mresize(Client *c)
</a><a href="#h3-0-86" id="h3-0-86" class="d">-{
</a><a href="#h3-0-87" id="h3-0-87" class="d">-	XEvent ev;
</a><a href="#h3-0-88" id="h3-0-88" class="d">-	int ocx, ocy;
</a><a href="#h3-0-89" id="h3-0-89" class="d">-
</a><a href="#h3-0-90" id="h3-0-90" class="d">-	ocx = c-&gt;x;
</a><a href="#h3-0-91" id="h3-0-91" class="d">-	ocy = c-&gt;y;
</a><a href="#h3-0-92" id="h3-0-92" class="d">-	if(XGrabPointer(dpy, root, False, MouseMask, GrabModeAsync, GrabModeAsync,
</a><a href="#h3-0-93" id="h3-0-93" class="d">-				None, cursor[CurResize], CurrentTime) != GrabSuccess)
</a><a href="#h3-0-94" id="h3-0-94" class="d">-		return;
</a><a href="#h3-0-95" id="h3-0-95" class="d">-	XWarpPointer(dpy, None, c-&gt;win, 0, 0, 0, 0, c-&gt;w, c-&gt;h);
</a><a href="#h3-0-96" id="h3-0-96" class="d">-	for(;;) {
</a><a href="#h3-0-97" id="h3-0-97" class="d">-		XMaskEvent(dpy, MouseMask | ExposureMask, &amp;ev);
</a><a href="#h3-0-98" id="h3-0-98" class="d">-		switch(ev.type) {
</a><a href="#h3-0-99" id="h3-0-99" class="d">-		default: break;
</a><a href="#h3-0-100" id="h3-0-100" class="d">-		case Expose:
</a><a href="#h3-0-101" id="h3-0-101" class="d">-			handler[Expose](&amp;ev);
</a><a href="#h3-0-102" id="h3-0-102" class="d">-			break;
</a><a href="#h3-0-103" id="h3-0-103" class="d">-		case MotionNotify:
</a><a href="#h3-0-104" id="h3-0-104" class="d">-			XFlush(dpy);
</a><a href="#h3-0-105" id="h3-0-105" class="d">-			c-&gt;w = abs(ocx - ev.xmotion.x);
</a><a href="#h3-0-106" id="h3-0-106" class="d">-			c-&gt;h = abs(ocy - ev.xmotion.y);
</a><a href="#h3-0-107" id="h3-0-107" class="d">-			c-&gt;x = (ocx &lt;= ev.xmotion.x) ? ocx : ocx - c-&gt;w;
</a><a href="#h3-0-108" id="h3-0-108" class="d">-			c-&gt;y = (ocy &lt;= ev.xmotion.y) ? ocy : ocy - c-&gt;h;
</a><a href="#h3-0-109" id="h3-0-109" class="d">-			resize(c, True);
</a><a href="#h3-0-110" id="h3-0-110" class="d">-			break;
</a><a href="#h3-0-111" id="h3-0-111" class="d">-		case ButtonRelease:
</a><a href="#h3-0-112" id="h3-0-112" class="d">-			XUngrabPointer(dpy, CurrentTime);
</a><a href="#h3-0-113" id="h3-0-113" class="d">-			return;
</a><a href="#h3-0-114" id="h3-0-114" class="d">-		}
</a><a href="#h3-0-115" id="h3-0-115" class="d">-	}
</a><a href="#h3-0-116" id="h3-0-116" class="d">-}
</a><a href="#h3-0-117" id="h3-0-117" class="d">-
</a><a href="#h3-0-118" id="h3-0-118" class="d">-void
</a><a href="#h3-0-119" id="h3-0-119" class="d">-mmove(Client *c)
</a><a href="#h3-0-120" id="h3-0-120" class="d">-{
</a><a href="#h3-0-121" id="h3-0-121" class="d">-	XEvent ev;
</a><a href="#h3-0-122" id="h3-0-122" class="d">-	int x1, y1, ocx, ocy, di;
</a><a href="#h3-0-123" id="h3-0-123" class="d">-	unsigned int dui;
</a><a href="#h3-0-124" id="h3-0-124" class="d">-	Window dummy;
</a><a href="#h3-0-125" id="h3-0-125" class="d">-
</a><a href="#h3-0-126" id="h3-0-126" class="d">-	ocx = c-&gt;x;
</a><a href="#h3-0-127" id="h3-0-127" class="d">-	ocy = c-&gt;y;
</a><a href="#h3-0-128" id="h3-0-128" class="d">-	if(XGrabPointer(dpy, root, False, MouseMask, GrabModeAsync, GrabModeAsync,
</a><a href="#h3-0-129" id="h3-0-129" class="d">-				None, cursor[CurMove], CurrentTime) != GrabSuccess)
</a><a href="#h3-0-130" id="h3-0-130" class="d">-		return;
</a><a href="#h3-0-131" id="h3-0-131" class="d">-	XQueryPointer(dpy, root, &amp;dummy, &amp;dummy, &amp;x1, &amp;y1, &amp;di, &amp;di, &amp;dui);
</a><a href="#h3-0-132" id="h3-0-132" class="d">-	for(;;) {
</a><a href="#h3-0-133" id="h3-0-133" class="d">-		XMaskEvent(dpy, MouseMask | ExposureMask, &amp;ev);
</a><a href="#h3-0-134" id="h3-0-134" class="d">-		switch (ev.type) {
</a><a href="#h3-0-135" id="h3-0-135" class="d">-		default: break;
</a><a href="#h3-0-136" id="h3-0-136" class="d">-		case Expose:
</a><a href="#h3-0-137" id="h3-0-137" class="d">-			handler[Expose](&amp;ev);
</a><a href="#h3-0-138" id="h3-0-138" class="d">-			break;
</a><a href="#h3-0-139" id="h3-0-139" class="d">-		case MotionNotify:
</a><a href="#h3-0-140" id="h3-0-140" class="d">-			XFlush(dpy);
</a><a href="#h3-0-141" id="h3-0-141" class="d">-			c-&gt;x = ocx + (ev.xmotion.x - x1);
</a><a href="#h3-0-142" id="h3-0-142" class="d">-			c-&gt;y = ocy + (ev.xmotion.y - y1);
</a><a href="#h3-0-143" id="h3-0-143" class="d">-			resize(c, False);
</a><a href="#h3-0-144" id="h3-0-144" class="d">-			break;
</a><a href="#h3-0-145" id="h3-0-145" class="d">-		case ButtonRelease:
</a><a href="#h3-0-146" id="h3-0-146" class="d">-			XUngrabPointer(dpy, CurrentTime);
</a><a href="#h3-0-147" id="h3-0-147" class="d">-			return;
</a><a href="#h3-0-148" id="h3-0-148" class="d">-		}
</a><a href="#h3-0-149" id="h3-0-149" class="d">-	}
</a><a href="#h3-0-150" id="h3-0-150" class="d">-}
</a><b>diff --git a/<a id="h4" href="../file/draw.c.html">draw.c</a> b/<a href="../file/draw.c.html">draw.c</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -10,6 +10,71 @@
</a> 
 #include &quot;dwm.h&quot;
 
<a href="#h4-0-3" id="h4-0-3" class="i">+void
</a><a href="#h4-0-4" id="h4-0-4" class="i">+draw_bar()
</a><a href="#h4-0-5" id="h4-0-5" class="i">+{
</a><a href="#h4-0-6" id="h4-0-6" class="i">+	int i;
</a><a href="#h4-0-7" id="h4-0-7" class="i">+
</a><a href="#h4-0-8" id="h4-0-8" class="i">+	dc.x = dc.y = 0;
</a><a href="#h4-0-9" id="h4-0-9" class="i">+	dc.w = bw;
</a><a href="#h4-0-10" id="h4-0-10" class="i">+	drawtext(NULL, False, False);
</a><a href="#h4-0-11" id="h4-0-11" class="i">+
</a><a href="#h4-0-12" id="h4-0-12" class="i">+	if(arrange == floating) {
</a><a href="#h4-0-13" id="h4-0-13" class="i">+		dc.w = textw(&quot;~&quot;);
</a><a href="#h4-0-14" id="h4-0-14" class="i">+		drawtext(&quot;~&quot;, False, False);
</a><a href="#h4-0-15" id="h4-0-15" class="i">+	}
</a><a href="#h4-0-16" id="h4-0-16" class="i">+	else
</a><a href="#h4-0-17" id="h4-0-17" class="i">+		dc.w = 0;
</a><a href="#h4-0-18" id="h4-0-18" class="i">+	for(i = 0; i &lt; TLast; i++) {
</a><a href="#h4-0-19" id="h4-0-19" class="i">+		dc.x += dc.w;
</a><a href="#h4-0-20" id="h4-0-20" class="i">+		dc.w = textw(tags[i]);
</a><a href="#h4-0-21" id="h4-0-21" class="i">+		drawtext(tags[i], i == tsel, True);
</a><a href="#h4-0-22" id="h4-0-22" class="i">+	}
</a><a href="#h4-0-23" id="h4-0-23" class="i">+	if(sel) {
</a><a href="#h4-0-24" id="h4-0-24" class="i">+		dc.x += dc.w;
</a><a href="#h4-0-25" id="h4-0-25" class="i">+		dc.w = textw(sel-&gt;name);
</a><a href="#h4-0-26" id="h4-0-26" class="i">+		drawtext(sel-&gt;name, True, True);
</a><a href="#h4-0-27" id="h4-0-27" class="i">+	}
</a><a href="#h4-0-28" id="h4-0-28" class="i">+	dc.w = textw(stext);
</a><a href="#h4-0-29" id="h4-0-29" class="i">+	dc.x = bx + bw - dc.w;
</a><a href="#h4-0-30" id="h4-0-30" class="i">+	drawtext(stext, False, False);
</a><a href="#h4-0-31" id="h4-0-31" class="i">+
</a><a href="#h4-0-32" id="h4-0-32" class="i">+	XCopyArea(dpy, dc.drawable, barwin, dc.gc, 0, 0, bw, bh, 0, 0);
</a><a href="#h4-0-33" id="h4-0-33" class="i">+	XFlush(dpy);
</a><a href="#h4-0-34" id="h4-0-34" class="i">+}
</a><a href="#h4-0-35" id="h4-0-35" class="i">+
</a><a href="#h4-0-36" id="h4-0-36" class="i">+void
</a><a href="#h4-0-37" id="h4-0-37" class="i">+draw_client(Client *c)
</a><a href="#h4-0-38" id="h4-0-38" class="i">+{
</a><a href="#h4-0-39" id="h4-0-39" class="i">+	int i;
</a><a href="#h4-0-40" id="h4-0-40" class="i">+	if(c == sel) {
</a><a href="#h4-0-41" id="h4-0-41" class="i">+		draw_bar();
</a><a href="#h4-0-42" id="h4-0-42" class="i">+		XUnmapWindow(dpy, c-&gt;title);
</a><a href="#h4-0-43" id="h4-0-43" class="i">+		XSetWindowBorder(dpy, c-&gt;win, dc.fg);
</a><a href="#h4-0-44" id="h4-0-44" class="i">+		return;
</a><a href="#h4-0-45" id="h4-0-45" class="i">+	}
</a><a href="#h4-0-46" id="h4-0-46" class="i">+
</a><a href="#h4-0-47" id="h4-0-47" class="i">+	XSetWindowBorder(dpy, c-&gt;win, dc.bg);
</a><a href="#h4-0-48" id="h4-0-48" class="i">+	XMapWindow(dpy, c-&gt;title);
</a><a href="#h4-0-49" id="h4-0-49" class="i">+
</a><a href="#h4-0-50" id="h4-0-50" class="i">+	dc.x = dc.y = 0;
</a><a href="#h4-0-51" id="h4-0-51" class="i">+
</a><a href="#h4-0-52" id="h4-0-52" class="i">+	dc.w = 0;
</a><a href="#h4-0-53" id="h4-0-53" class="i">+	for(i = 0; i &lt; TLast; i++) {
</a><a href="#h4-0-54" id="h4-0-54" class="i">+		if(c-&gt;tags[i]) {
</a><a href="#h4-0-55" id="h4-0-55" class="i">+			dc.x += dc.w;
</a><a href="#h4-0-56" id="h4-0-56" class="i">+			dc.w = textw(c-&gt;tags[i]);
</a><a href="#h4-0-57" id="h4-0-57" class="i">+			drawtext(c-&gt;tags[i], False, True);
</a><a href="#h4-0-58" id="h4-0-58" class="i">+		}
</a><a href="#h4-0-59" id="h4-0-59" class="i">+	}
</a><a href="#h4-0-60" id="h4-0-60" class="i">+	dc.x += dc.w;
</a><a href="#h4-0-61" id="h4-0-61" class="i">+	dc.w = textw(c-&gt;name);
</a><a href="#h4-0-62" id="h4-0-62" class="i">+	drawtext(c-&gt;name, False, True);
</a><a href="#h4-0-63" id="h4-0-63" class="i">+	XCopyArea(dpy, dc.drawable, c-&gt;title, dc.gc,
</a><a href="#h4-0-64" id="h4-0-64" class="i">+			0, 0, c-&gt;tw, c-&gt;th, 0, 0);
</a><a href="#h4-0-65" id="h4-0-65" class="i">+	XFlush(dpy);
</a><a href="#h4-0-66" id="h4-0-66" class="i">+}
</a><a href="#h4-0-67" id="h4-0-67" class="i">+
</a> static void
 drawborder(void)
 {
<a href="#h4-1" id="h4-1" class="h">@@ -103,7 +168,7 @@ textnw(char *text, unsigned int len)
</a> unsigned int
 textw(char *text)
 {
<a href="#h4-1-3" id="h4-1-3" class="d">-	return textnw(text, strlen(text));
</a><a href="#h4-1-4" id="h4-1-4" class="i">+	return textnw(text, strlen(text)) + dc.font.height;
</a> }
 
 void
<b>diff --git a/<a id="h5" href="../file/dwm.h.html">dwm.h</a> b/<a href="../file/dwm.h.html">dwm.h</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -94,6 +94,7 @@ extern Cursor cursor[CurLast];
</a> extern Bool running, issel;
 extern void (*handler[LASTEvent])(XEvent *);
 extern void (*arrange)(Arg *);
<a href="#h5-0-3" id="h5-0-3" class="i">+extern Key key[];
</a> 
 extern int tsel, screen, sx, sy, sw, sh, bx, by, bw, bh, mw;
 extern char *tags[TLast], stext[1024];
<a href="#h5-1" id="h5-1" class="h">@@ -101,35 +102,24 @@ extern char *tags[TLast], stext[1024];
</a> extern DC dc;
 extern Client *clients, *sel;
 
<a href="#h5-1-3" id="h5-1-3" class="d">-/* bar.c */
</a><a href="#h5-1-4" id="h5-1-4" class="d">-extern void draw_bar();
</a><a href="#h5-1-5" id="h5-1-5" class="d">-extern void barclick(XButtonPressedEvent *e);
</a><a href="#h5-1-6" id="h5-1-6" class="d">-
</a> /* client.c */
 extern void manage(Window w, XWindowAttributes *wa);
 extern void unmanage(Client *c);
 extern Client *getclient(Window w);
 extern void focus(Client *c);
 extern void update_name(Client *c);
<a href="#h5-1-13" id="h5-1-13" class="d">-extern void draw_client(Client *c);
</a> extern void resize(Client *c, Bool inc);
 extern void update_size(Client *c);
 extern Client *gettitle(Window w);
 extern void craise(Client *c);
 extern void lower(Client *c);
<a href="#h5-1-19" id="h5-1-19" class="d">-extern void ckill(Arg *arg);
</a><a href="#h5-1-20" id="h5-1-20" class="d">-extern void nextc(Arg *arg);
</a><a href="#h5-1-21" id="h5-1-21" class="d">-extern void prevc(Arg *arg);
</a><a href="#h5-1-22" id="h5-1-22" class="d">-extern void max(Arg *arg);
</a><a href="#h5-1-23" id="h5-1-23" class="d">-extern void floating(Arg *arg);
</a><a href="#h5-1-24" id="h5-1-24" class="d">-extern void tiling(Arg *arg);
</a><a href="#h5-1-25" id="h5-1-25" class="d">-extern void ttrunc(Arg *arg);
</a><a href="#h5-1-26" id="h5-1-26" class="d">-extern void tappend(Arg *arg);
</a><a href="#h5-1-27" id="h5-1-27" class="d">-extern void view(Arg *arg);
</a><a href="#h5-1-28" id="h5-1-28" class="d">-extern void zoom(Arg *arg);
</a> extern void gravitate(Client *c, Bool invert);
<a href="#h5-1-30" id="h5-1-30" class="i">+extern void ban_client(Client *c);
</a><a href="#h5-1-31" id="h5-1-31" class="i">+extern Client *next(Client *c);
</a> 
 /* draw.c */
<a href="#h5-1-34" id="h5-1-34" class="i">+extern void draw_bar();
</a><a href="#h5-1-35" id="h5-1-35" class="i">+extern void draw_client(Client *c);
</a> extern void drawtext(const char *text, Bool invert, Bool border);
 extern unsigned long initcolor(const char *colstr);
 extern void initfont(const char *fontstr);
<a href="#h5-2" id="h5-2" class="h">@@ -137,11 +127,9 @@ extern unsigned int textnw(char *text, unsigned int len);
</a> extern unsigned int textw(char *text);
 extern unsigned int texth(void);
 
<a href="#h5-2-3" id="h5-2-3" class="d">-/* dev.c */
</a><a href="#h5-2-4" id="h5-2-4" class="d">-extern void update_keys(void);
</a><a href="#h5-2-5" id="h5-2-5" class="i">+/* key.c */
</a><a href="#h5-2-6" id="h5-2-6" class="i">+extern void grabkeys();
</a> extern void keypress(XEvent *e);
<a href="#h5-2-8" id="h5-2-8" class="d">-extern void mresize(Client *c);
</a><a href="#h5-2-9" id="h5-2-9" class="d">-extern void mmove(Client *c);
</a> 
 /* main.c */
 extern int error_handler(Display *dsply, XErrorEvent *e);
<a href="#h5-3" id="h5-3" class="h">@@ -149,6 +137,11 @@ extern void send_message(Window w, Atom a, long value);
</a> extern int win_proto(Window w);
 extern void quit(Arg *arg);
 
<a href="#h5-3-3" id="h5-3-3" class="i">+/* screen.c */
</a><a href="#h5-3-4" id="h5-3-4" class="i">+extern void floating(Arg *arg);
</a><a href="#h5-3-5" id="h5-3-5" class="i">+extern void tiling(Arg *arg);
</a><a href="#h5-3-6" id="h5-3-6" class="i">+extern void view(Arg *arg);
</a><a href="#h5-3-7" id="h5-3-7" class="i">+
</a> /* util.c */
 extern void error(const char *errstr, ...);
 extern void *emallocz(unsigned int size);
<b>diff --git a/<a id="h6" href="../file/event.c.html">event.c</a> b/<a href="../file/event.c.html">event.c</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -7,11 +7,15 @@
</a> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
<a href="#h6-0-3" id="h6-0-3" class="i">+#include &lt;unistd.h&gt;
</a> #include &lt;X11/keysym.h&gt;
 #include &lt;X11/Xatom.h&gt;
 
 #include &quot;dwm.h&quot;
 
<a href="#h6-0-9" id="h6-0-9" class="i">+#define ButtonMask      (ButtonPressMask | ButtonReleaseMask)
</a><a href="#h6-0-10" id="h6-0-10" class="i">+#define MouseMask       (ButtonMask | PointerMotionMask)
</a><a href="#h6-0-11" id="h6-0-11" class="i">+
</a> /* local functions */
 static void buttonpress(XEvent *e);
 static void configurerequest(XEvent *e);
<a href="#h6-1" id="h6-1" class="h">@@ -19,7 +23,6 @@ static void destroynotify(XEvent *e);
</a> static void enternotify(XEvent *e);
 static void leavenotify(XEvent *e);
 static void expose(XEvent *e);
<a href="#h6-1-3" id="h6-1-3" class="d">-static void keymapnotify(XEvent *e);
</a> static void maprequest(XEvent *e);
 static void propertynotify(XEvent *e);
 static void unmapnotify(XEvent *e);
<a href="#h6-2" id="h6-2" class="h">@@ -32,21 +35,100 @@ void (*handler[LASTEvent]) (XEvent *) = {
</a> 	[LeaveNotify] = leavenotify,
 	[Expose] = expose,
 	[KeyPress] = keypress,
<a href="#h6-2-3" id="h6-2-3" class="d">-	[KeymapNotify] = keymapnotify,
</a> 	[MapRequest] = maprequest,
 	[PropertyNotify] = propertynotify,
 	[UnmapNotify] = unmapnotify
 };
 
 static void
<a href="#h6-2-10" id="h6-2-10" class="i">+mresize(Client *c)
</a><a href="#h6-2-11" id="h6-2-11" class="i">+{
</a><a href="#h6-2-12" id="h6-2-12" class="i">+	XEvent ev;
</a><a href="#h6-2-13" id="h6-2-13" class="i">+	int ocx, ocy;
</a><a href="#h6-2-14" id="h6-2-14" class="i">+
</a><a href="#h6-2-15" id="h6-2-15" class="i">+	ocx = c-&gt;x;
</a><a href="#h6-2-16" id="h6-2-16" class="i">+	ocy = c-&gt;y;
</a><a href="#h6-2-17" id="h6-2-17" class="i">+	if(XGrabPointer(dpy, root, False, MouseMask, GrabModeAsync, GrabModeAsync,
</a><a href="#h6-2-18" id="h6-2-18" class="i">+				None, cursor[CurResize], CurrentTime) != GrabSuccess)
</a><a href="#h6-2-19" id="h6-2-19" class="i">+		return;
</a><a href="#h6-2-20" id="h6-2-20" class="i">+	XWarpPointer(dpy, None, c-&gt;win, 0, 0, 0, 0, c-&gt;w, c-&gt;h);
</a><a href="#h6-2-21" id="h6-2-21" class="i">+	for(;;) {
</a><a href="#h6-2-22" id="h6-2-22" class="i">+		XMaskEvent(dpy, MouseMask | ExposureMask, &amp;ev);
</a><a href="#h6-2-23" id="h6-2-23" class="i">+		switch(ev.type) {
</a><a href="#h6-2-24" id="h6-2-24" class="i">+		default: break;
</a><a href="#h6-2-25" id="h6-2-25" class="i">+		case Expose:
</a><a href="#h6-2-26" id="h6-2-26" class="i">+			handler[Expose](&amp;ev);
</a><a href="#h6-2-27" id="h6-2-27" class="i">+			break;
</a><a href="#h6-2-28" id="h6-2-28" class="i">+		case MotionNotify:
</a><a href="#h6-2-29" id="h6-2-29" class="i">+			XFlush(dpy);
</a><a href="#h6-2-30" id="h6-2-30" class="i">+			c-&gt;w = abs(ocx - ev.xmotion.x);
</a><a href="#h6-2-31" id="h6-2-31" class="i">+			c-&gt;h = abs(ocy - ev.xmotion.y);
</a><a href="#h6-2-32" id="h6-2-32" class="i">+			c-&gt;x = (ocx &lt;= ev.xmotion.x) ? ocx : ocx - c-&gt;w;
</a><a href="#h6-2-33" id="h6-2-33" class="i">+			c-&gt;y = (ocy &lt;= ev.xmotion.y) ? ocy : ocy - c-&gt;h;
</a><a href="#h6-2-34" id="h6-2-34" class="i">+			resize(c, True);
</a><a href="#h6-2-35" id="h6-2-35" class="i">+			break;
</a><a href="#h6-2-36" id="h6-2-36" class="i">+		case ButtonRelease:
</a><a href="#h6-2-37" id="h6-2-37" class="i">+			XUngrabPointer(dpy, CurrentTime);
</a><a href="#h6-2-38" id="h6-2-38" class="i">+			return;
</a><a href="#h6-2-39" id="h6-2-39" class="i">+		}
</a><a href="#h6-2-40" id="h6-2-40" class="i">+	}
</a><a href="#h6-2-41" id="h6-2-41" class="i">+}
</a><a href="#h6-2-42" id="h6-2-42" class="i">+
</a><a href="#h6-2-43" id="h6-2-43" class="i">+static void
</a><a href="#h6-2-44" id="h6-2-44" class="i">+mmove(Client *c)
</a><a href="#h6-2-45" id="h6-2-45" class="i">+{
</a><a href="#h6-2-46" id="h6-2-46" class="i">+	XEvent ev;
</a><a href="#h6-2-47" id="h6-2-47" class="i">+	int x1, y1, ocx, ocy, di;
</a><a href="#h6-2-48" id="h6-2-48" class="i">+	unsigned int dui;
</a><a href="#h6-2-49" id="h6-2-49" class="i">+	Window dummy;
</a><a href="#h6-2-50" id="h6-2-50" class="i">+
</a><a href="#h6-2-51" id="h6-2-51" class="i">+	ocx = c-&gt;x;
</a><a href="#h6-2-52" id="h6-2-52" class="i">+	ocy = c-&gt;y;
</a><a href="#h6-2-53" id="h6-2-53" class="i">+	if(XGrabPointer(dpy, root, False, MouseMask, GrabModeAsync, GrabModeAsync,
</a><a href="#h6-2-54" id="h6-2-54" class="i">+				None, cursor[CurMove], CurrentTime) != GrabSuccess)
</a><a href="#h6-2-55" id="h6-2-55" class="i">+		return;
</a><a href="#h6-2-56" id="h6-2-56" class="i">+	XQueryPointer(dpy, root, &amp;dummy, &amp;dummy, &amp;x1, &amp;y1, &amp;di, &amp;di, &amp;dui);
</a><a href="#h6-2-57" id="h6-2-57" class="i">+	for(;;) {
</a><a href="#h6-2-58" id="h6-2-58" class="i">+		XMaskEvent(dpy, MouseMask | ExposureMask, &amp;ev);
</a><a href="#h6-2-59" id="h6-2-59" class="i">+		switch (ev.type) {
</a><a href="#h6-2-60" id="h6-2-60" class="i">+		default: break;
</a><a href="#h6-2-61" id="h6-2-61" class="i">+		case Expose:
</a><a href="#h6-2-62" id="h6-2-62" class="i">+			handler[Expose](&amp;ev);
</a><a href="#h6-2-63" id="h6-2-63" class="i">+			break;
</a><a href="#h6-2-64" id="h6-2-64" class="i">+		case MotionNotify:
</a><a href="#h6-2-65" id="h6-2-65" class="i">+			XFlush(dpy);
</a><a href="#h6-2-66" id="h6-2-66" class="i">+			c-&gt;x = ocx + (ev.xmotion.x - x1);
</a><a href="#h6-2-67" id="h6-2-67" class="i">+			c-&gt;y = ocy + (ev.xmotion.y - y1);
</a><a href="#h6-2-68" id="h6-2-68" class="i">+			resize(c, False);
</a><a href="#h6-2-69" id="h6-2-69" class="i">+			break;
</a><a href="#h6-2-70" id="h6-2-70" class="i">+		case ButtonRelease:
</a><a href="#h6-2-71" id="h6-2-71" class="i">+			XUngrabPointer(dpy, CurrentTime);
</a><a href="#h6-2-72" id="h6-2-72" class="i">+			return;
</a><a href="#h6-2-73" id="h6-2-73" class="i">+		}
</a><a href="#h6-2-74" id="h6-2-74" class="i">+	}
</a><a href="#h6-2-75" id="h6-2-75" class="i">+}
</a><a href="#h6-2-76" id="h6-2-76" class="i">+
</a><a href="#h6-2-77" id="h6-2-77" class="i">+static void
</a> buttonpress(XEvent *e)
 {
<a href="#h6-2-80" id="h6-2-80" class="i">+	int x;
</a><a href="#h6-2-81" id="h6-2-81" class="i">+	Arg a;
</a> 	XButtonPressedEvent *ev = &amp;e-&gt;xbutton;
 	Client *c;
 
<a href="#h6-2-85" id="h6-2-85" class="d">-	if(barwin == ev-&gt;window)
</a><a href="#h6-2-86" id="h6-2-86" class="d">-		barclick(ev);
</a><a href="#h6-2-87" id="h6-2-87" class="i">+	if(barwin == ev-&gt;window) {
</a><a href="#h6-2-88" id="h6-2-88" class="i">+		x = (arrange == floating) ? textw(&quot;~&quot;) : 0;
</a><a href="#h6-2-89" id="h6-2-89" class="i">+		for(a.i = 0; a.i &lt; TLast; a.i++) {
</a><a href="#h6-2-90" id="h6-2-90" class="i">+			x += textw(tags[a.i]);
</a><a href="#h6-2-91" id="h6-2-91" class="i">+			if(ev-&gt;x &lt; x) {
</a><a href="#h6-2-92" id="h6-2-92" class="i">+				view(&amp;a);
</a><a href="#h6-2-93" id="h6-2-93" class="i">+				break;
</a><a href="#h6-2-94" id="h6-2-94" class="i">+			}
</a><a href="#h6-2-95" id="h6-2-95" class="i">+		}
</a><a href="#h6-2-96" id="h6-2-96" class="i">+	}
</a> 	else if((c = getclient(ev-&gt;window))) {
<a href="#h6-2-98" id="h6-2-98" class="i">+		if(arrange == tiling &amp;&amp; !c-&gt;floating)
</a><a href="#h6-2-99" id="h6-2-99" class="i">+			return;
</a> 		craise(c);
 		switch(ev-&gt;button) {
 		default:
<a href="#h6-3" id="h6-3" class="h">@@ -150,12 +232,6 @@ expose(XEvent *e)
</a> }
 
 static void
<a href="#h6-3-3" id="h6-3-3" class="d">-keymapnotify(XEvent *e)
</a><a href="#h6-3-4" id="h6-3-4" class="d">-{
</a><a href="#h6-3-5" id="h6-3-5" class="d">-	update_keys();
</a><a href="#h6-3-6" id="h6-3-6" class="d">-}
</a><a href="#h6-3-7" id="h6-3-7" class="d">-
</a><a href="#h6-3-8" id="h6-3-8" class="d">-static void
</a> maprequest(XEvent *e)
 {
 	XMapRequestEvent *ev = &amp;e-&gt;xmaprequest;
<b>diff --git a/<a id="h7" href="../file/key.c.html">key.c</a> b/<a href="../file/key.c.html">key.c</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -0,0 +1,192 @@
</a><a href="#h7-0-0" id="h7-0-0" class="i">+/*
</a><a href="#h7-0-1" id="h7-0-1" class="i">+ * (C)opyright MMVI Anselm R. Garbe &lt;garbeam at gmail dot com&gt;
</a><a href="#h7-0-2" id="h7-0-2" class="i">+ * See LICENSE file for license details.
</a><a href="#h7-0-3" id="h7-0-3" class="i">+ */
</a><a href="#h7-0-4" id="h7-0-4" class="i">+
</a><a href="#h7-0-5" id="h7-0-5" class="i">+#include &lt;fcntl.h&gt;
</a><a href="#h7-0-6" id="h7-0-6" class="i">+#include &lt;stdio.h&gt;
</a><a href="#h7-0-7" id="h7-0-7" class="i">+#include &lt;stdlib.h&gt;
</a><a href="#h7-0-8" id="h7-0-8" class="i">+#include &lt;string.h&gt;
</a><a href="#h7-0-9" id="h7-0-9" class="i">+#include &lt;unistd.h&gt;
</a><a href="#h7-0-10" id="h7-0-10" class="i">+#include &lt;X11/keysym.h&gt;
</a><a href="#h7-0-11" id="h7-0-11" class="i">+#include &lt;X11/Xatom.h&gt;
</a><a href="#h7-0-12" id="h7-0-12" class="i">+
</a><a href="#h7-0-13" id="h7-0-13" class="i">+#include &quot;dwm.h&quot;
</a><a href="#h7-0-14" id="h7-0-14" class="i">+
</a><a href="#h7-0-15" id="h7-0-15" class="i">+static void ckill(Arg *arg);
</a><a href="#h7-0-16" id="h7-0-16" class="i">+static void nextc(Arg *arg);
</a><a href="#h7-0-17" id="h7-0-17" class="i">+static void prevc(Arg *arg);
</a><a href="#h7-0-18" id="h7-0-18" class="i">+static void max(Arg *arg);
</a><a href="#h7-0-19" id="h7-0-19" class="i">+static void ttrunc(Arg *arg);
</a><a href="#h7-0-20" id="h7-0-20" class="i">+static void tappend(Arg *arg);
</a><a href="#h7-0-21" id="h7-0-21" class="i">+static void zoom(Arg *arg);
</a><a href="#h7-0-22" id="h7-0-22" class="i">+
</a><a href="#h7-0-23" id="h7-0-23" class="i">+/********** CUSTOMIZE **********/
</a><a href="#h7-0-24" id="h7-0-24" class="i">+
</a><a href="#h7-0-25" id="h7-0-25" class="i">+const char *term[] = { 
</a><a href="#h7-0-26" id="h7-0-26" class="i">+	&quot;urxvtc&quot;, &quot;-tr&quot;, &quot;+sb&quot;, &quot;-bg&quot;, &quot;black&quot;, &quot;-fg&quot;, &quot;white&quot;, &quot;-fn&quot;,
</a><a href="#h7-0-27" id="h7-0-27" class="i">+	&quot;-*-terminus-medium-*-*-*-13-*-*-*-*-*-iso10646-*&quot;,NULL
</a><a href="#h7-0-28" id="h7-0-28" class="i">+};
</a><a href="#h7-0-29" id="h7-0-29" class="i">+const char *browse[] = { &quot;firefox&quot;, NULL };
</a><a href="#h7-0-30" id="h7-0-30" class="i">+const char *xlock[] = { &quot;xlock&quot;, NULL };
</a><a href="#h7-0-31" id="h7-0-31" class="i">+
</a><a href="#h7-0-32" id="h7-0-32" class="i">+Key key[] = {
</a><a href="#h7-0-33" id="h7-0-33" class="i">+	/* modifier				key			function	arguments */
</a><a href="#h7-0-34" id="h7-0-34" class="i">+	{ Mod1Mask,				XK_Return,	zoom,		{ 0 } },
</a><a href="#h7-0-35" id="h7-0-35" class="i">+	{ Mod1Mask,				XK_k,		prevc,		{ 0 } },
</a><a href="#h7-0-36" id="h7-0-36" class="i">+	{ Mod1Mask,				XK_j,		nextc,		{ 0 } }, 
</a><a href="#h7-0-37" id="h7-0-37" class="i">+	{ Mod1Mask,				XK_m,		max,		{ 0 } }, 
</a><a href="#h7-0-38" id="h7-0-38" class="i">+	{ Mod1Mask,				XK_0,		view,		{ .i = Tscratch } }, 
</a><a href="#h7-0-39" id="h7-0-39" class="i">+	{ Mod1Mask,				XK_1,		view,		{ .i = Tdev } }, 
</a><a href="#h7-0-40" id="h7-0-40" class="i">+	{ Mod1Mask,				XK_2,		view,		{ .i = Twww } }, 
</a><a href="#h7-0-41" id="h7-0-41" class="i">+	{ Mod1Mask,				XK_3,		view,		{ .i = Twork } }, 
</a><a href="#h7-0-42" id="h7-0-42" class="i">+	{ Mod1Mask,				XK_space,	tiling,		{ 0 } }, 
</a><a href="#h7-0-43" id="h7-0-43" class="i">+	{ Mod1Mask|ShiftMask,	XK_space,	floating,	{ 0 } }, 
</a><a href="#h7-0-44" id="h7-0-44" class="i">+	{ Mod1Mask|ShiftMask,	XK_0,		ttrunc,		{ .i = Tscratch } }, 
</a><a href="#h7-0-45" id="h7-0-45" class="i">+	{ Mod1Mask|ShiftMask,	XK_1,		ttrunc,		{ .i = Tdev } }, 
</a><a href="#h7-0-46" id="h7-0-46" class="i">+	{ Mod1Mask|ShiftMask,	XK_2,		ttrunc,		{ .i = Twww } }, 
</a><a href="#h7-0-47" id="h7-0-47" class="i">+	{ Mod1Mask|ShiftMask,	XK_3,		ttrunc,		{ .i = Twork } }, 
</a><a href="#h7-0-48" id="h7-0-48" class="i">+	{ Mod1Mask|ShiftMask,	XK_c,		ckill,		{ 0 } }, 
</a><a href="#h7-0-49" id="h7-0-49" class="i">+	{ Mod1Mask|ShiftMask,	XK_q,		quit,		{ 0 } },
</a><a href="#h7-0-50" id="h7-0-50" class="i">+	{ Mod1Mask|ShiftMask,	XK_Return,	spawn,		{ .argv = term } },
</a><a href="#h7-0-51" id="h7-0-51" class="i">+	{ Mod1Mask|ShiftMask,	XK_w,		spawn,		{ .argv = browse } },
</a><a href="#h7-0-52" id="h7-0-52" class="i">+	{ Mod1Mask|ShiftMask,	XK_l,		spawn,		{ .argv = xlock } },
</a><a href="#h7-0-53" id="h7-0-53" class="i">+	{ ControlMask,			XK_0,		tappend,	{ .i = Tscratch } }, 
</a><a href="#h7-0-54" id="h7-0-54" class="i">+	{ ControlMask,			XK_1,		tappend,	{ .i = Tdev } }, 
</a><a href="#h7-0-55" id="h7-0-55" class="i">+	{ ControlMask,			XK_2,		tappend,	{ .i = Twww } }, 
</a><a href="#h7-0-56" id="h7-0-56" class="i">+	{ ControlMask,			XK_3,		tappend,	{ .i = Twork } }, 
</a><a href="#h7-0-57" id="h7-0-57" class="i">+};
</a><a href="#h7-0-58" id="h7-0-58" class="i">+
</a><a href="#h7-0-59" id="h7-0-59" class="i">+/********** CUSTOMIZE **********/
</a><a href="#h7-0-60" id="h7-0-60" class="i">+
</a><a href="#h7-0-61" id="h7-0-61" class="i">+void
</a><a href="#h7-0-62" id="h7-0-62" class="i">+grabkeys()
</a><a href="#h7-0-63" id="h7-0-63" class="i">+{
</a><a href="#h7-0-64" id="h7-0-64" class="i">+	static unsigned int len = key ? sizeof(key) / sizeof(key[0]) : 0;
</a><a href="#h7-0-65" id="h7-0-65" class="i">+	unsigned int i;
</a><a href="#h7-0-66" id="h7-0-66" class="i">+	KeyCode code;
</a><a href="#h7-0-67" id="h7-0-67" class="i">+
</a><a href="#h7-0-68" id="h7-0-68" class="i">+	for(i = 0; i &lt; len; i++) {
</a><a href="#h7-0-69" id="h7-0-69" class="i">+		code = XKeysymToKeycode(dpy, key[i].keysym);
</a><a href="#h7-0-70" id="h7-0-70" class="i">+		XUngrabKey(dpy, code, key[i].mod, root);
</a><a href="#h7-0-71" id="h7-0-71" class="i">+		XGrabKey(dpy, code, key[i].mod, root, True,
</a><a href="#h7-0-72" id="h7-0-72" class="i">+				GrabModeAsync, GrabModeAsync);
</a><a href="#h7-0-73" id="h7-0-73" class="i">+	}
</a><a href="#h7-0-74" id="h7-0-74" class="i">+}
</a><a href="#h7-0-75" id="h7-0-75" class="i">+
</a><a href="#h7-0-76" id="h7-0-76" class="i">+void
</a><a href="#h7-0-77" id="h7-0-77" class="i">+keypress(XEvent *e)
</a><a href="#h7-0-78" id="h7-0-78" class="i">+{
</a><a href="#h7-0-79" id="h7-0-79" class="i">+	XKeyEvent *ev = &amp;e-&gt;xkey;
</a><a href="#h7-0-80" id="h7-0-80" class="i">+	static unsigned int len = key ? sizeof(key) / sizeof(key[0]) : 0;
</a><a href="#h7-0-81" id="h7-0-81" class="i">+	unsigned int i;
</a><a href="#h7-0-82" id="h7-0-82" class="i">+	KeySym keysym;
</a><a href="#h7-0-83" id="h7-0-83" class="i">+
</a><a href="#h7-0-84" id="h7-0-84" class="i">+	keysym = XKeycodeToKeysym(dpy, (KeyCode)ev-&gt;keycode, 0);
</a><a href="#h7-0-85" id="h7-0-85" class="i">+	for(i = 0; i &lt; len; i++)
</a><a href="#h7-0-86" id="h7-0-86" class="i">+		if((keysym == key[i].keysym) &amp;&amp; (key[i].mod == ev-&gt;state)) {
</a><a href="#h7-0-87" id="h7-0-87" class="i">+			if(key[i].func)
</a><a href="#h7-0-88" id="h7-0-88" class="i">+				key[i].func(&amp;key[i].arg);
</a><a href="#h7-0-89" id="h7-0-89" class="i">+			return;
</a><a href="#h7-0-90" id="h7-0-90" class="i">+		}
</a><a href="#h7-0-91" id="h7-0-91" class="i">+}
</a><a href="#h7-0-92" id="h7-0-92" class="i">+
</a><a href="#h7-0-93" id="h7-0-93" class="i">+static void
</a><a href="#h7-0-94" id="h7-0-94" class="i">+zoom(Arg *arg)
</a><a href="#h7-0-95" id="h7-0-95" class="i">+{
</a><a href="#h7-0-96" id="h7-0-96" class="i">+	Client **l, *c;
</a><a href="#h7-0-97" id="h7-0-97" class="i">+
</a><a href="#h7-0-98" id="h7-0-98" class="i">+	if(!sel)
</a><a href="#h7-0-99" id="h7-0-99" class="i">+		return;
</a><a href="#h7-0-100" id="h7-0-100" class="i">+
</a><a href="#h7-0-101" id="h7-0-101" class="i">+	if(sel == next(clients) &amp;&amp; sel-&gt;next)  {
</a><a href="#h7-0-102" id="h7-0-102" class="i">+		if((c = next(sel-&gt;next)))
</a><a href="#h7-0-103" id="h7-0-103" class="i">+			sel = c;
</a><a href="#h7-0-104" id="h7-0-104" class="i">+	}
</a><a href="#h7-0-105" id="h7-0-105" class="i">+
</a><a href="#h7-0-106" id="h7-0-106" class="i">+	for(l = &amp;clients; *l &amp;&amp; *l != sel; l = &amp;(*l)-&gt;next);
</a><a href="#h7-0-107" id="h7-0-107" class="i">+	*l = sel-&gt;next;
</a><a href="#h7-0-108" id="h7-0-108" class="i">+
</a><a href="#h7-0-109" id="h7-0-109" class="i">+	sel-&gt;next = clients; /* pop */
</a><a href="#h7-0-110" id="h7-0-110" class="i">+	clients = sel;
</a><a href="#h7-0-111" id="h7-0-111" class="i">+	arrange(NULL);
</a><a href="#h7-0-112" id="h7-0-112" class="i">+	focus(sel);
</a><a href="#h7-0-113" id="h7-0-113" class="i">+}
</a><a href="#h7-0-114" id="h7-0-114" class="i">+
</a><a href="#h7-0-115" id="h7-0-115" class="i">+static void
</a><a href="#h7-0-116" id="h7-0-116" class="i">+max(Arg *arg)
</a><a href="#h7-0-117" id="h7-0-117" class="i">+{
</a><a href="#h7-0-118" id="h7-0-118" class="i">+	if(!sel)
</a><a href="#h7-0-119" id="h7-0-119" class="i">+		return;
</a><a href="#h7-0-120" id="h7-0-120" class="i">+	sel-&gt;x = sx;
</a><a href="#h7-0-121" id="h7-0-121" class="i">+	sel-&gt;y = sy + bh;
</a><a href="#h7-0-122" id="h7-0-122" class="i">+	sel-&gt;w = sw - 2 * sel-&gt;border;
</a><a href="#h7-0-123" id="h7-0-123" class="i">+	sel-&gt;h = sh - 2 * sel-&gt;border - bh;
</a><a href="#h7-0-124" id="h7-0-124" class="i">+	craise(sel);
</a><a href="#h7-0-125" id="h7-0-125" class="i">+	resize(sel, False);
</a><a href="#h7-0-126" id="h7-0-126" class="i">+}
</a><a href="#h7-0-127" id="h7-0-127" class="i">+
</a><a href="#h7-0-128" id="h7-0-128" class="i">+static void
</a><a href="#h7-0-129" id="h7-0-129" class="i">+tappend(Arg *arg)
</a><a href="#h7-0-130" id="h7-0-130" class="i">+{
</a><a href="#h7-0-131" id="h7-0-131" class="i">+	if(!sel)
</a><a href="#h7-0-132" id="h7-0-132" class="i">+		return;
</a><a href="#h7-0-133" id="h7-0-133" class="i">+
</a><a href="#h7-0-134" id="h7-0-134" class="i">+	sel-&gt;tags[arg-&gt;i] = tags[arg-&gt;i];
</a><a href="#h7-0-135" id="h7-0-135" class="i">+	arrange(NULL);
</a><a href="#h7-0-136" id="h7-0-136" class="i">+}
</a><a href="#h7-0-137" id="h7-0-137" class="i">+
</a><a href="#h7-0-138" id="h7-0-138" class="i">+static void
</a><a href="#h7-0-139" id="h7-0-139" class="i">+ttrunc(Arg *arg)
</a><a href="#h7-0-140" id="h7-0-140" class="i">+{
</a><a href="#h7-0-141" id="h7-0-141" class="i">+	int i;
</a><a href="#h7-0-142" id="h7-0-142" class="i">+	if(!sel)
</a><a href="#h7-0-143" id="h7-0-143" class="i">+		return;
</a><a href="#h7-0-144" id="h7-0-144" class="i">+
</a><a href="#h7-0-145" id="h7-0-145" class="i">+	for(i = 0; i &lt; TLast; i++)
</a><a href="#h7-0-146" id="h7-0-146" class="i">+		sel-&gt;tags[i] = NULL;
</a><a href="#h7-0-147" id="h7-0-147" class="i">+	tappend(arg);
</a><a href="#h7-0-148" id="h7-0-148" class="i">+}
</a><a href="#h7-0-149" id="h7-0-149" class="i">+
</a><a href="#h7-0-150" id="h7-0-150" class="i">+static void
</a><a href="#h7-0-151" id="h7-0-151" class="i">+prevc(Arg *arg)
</a><a href="#h7-0-152" id="h7-0-152" class="i">+{
</a><a href="#h7-0-153" id="h7-0-153" class="i">+	Client *c;
</a><a href="#h7-0-154" id="h7-0-154" class="i">+
</a><a href="#h7-0-155" id="h7-0-155" class="i">+	if(!sel)
</a><a href="#h7-0-156" id="h7-0-156" class="i">+		return;
</a><a href="#h7-0-157" id="h7-0-157" class="i">+
</a><a href="#h7-0-158" id="h7-0-158" class="i">+	if((c = sel-&gt;revert &amp;&amp; sel-&gt;revert-&gt;tags[tsel] ? sel-&gt;revert : NULL)) {
</a><a href="#h7-0-159" id="h7-0-159" class="i">+		craise(c);
</a><a href="#h7-0-160" id="h7-0-160" class="i">+		focus(c);
</a><a href="#h7-0-161" id="h7-0-161" class="i">+	}
</a><a href="#h7-0-162" id="h7-0-162" class="i">+}
</a><a href="#h7-0-163" id="h7-0-163" class="i">+
</a><a href="#h7-0-164" id="h7-0-164" class="i">+static void
</a><a href="#h7-0-165" id="h7-0-165" class="i">+nextc(Arg *arg)
</a><a href="#h7-0-166" id="h7-0-166" class="i">+{
</a><a href="#h7-0-167" id="h7-0-167" class="i">+	Client *c;
</a><a href="#h7-0-168" id="h7-0-168" class="i">+   
</a><a href="#h7-0-169" id="h7-0-169" class="i">+	if(!sel)
</a><a href="#h7-0-170" id="h7-0-170" class="i">+		return;
</a><a href="#h7-0-171" id="h7-0-171" class="i">+
</a><a href="#h7-0-172" id="h7-0-172" class="i">+	if(!(c = next(sel-&gt;next)))
</a><a href="#h7-0-173" id="h7-0-173" class="i">+		c = next(clients);
</a><a href="#h7-0-174" id="h7-0-174" class="i">+	if(c) {
</a><a href="#h7-0-175" id="h7-0-175" class="i">+		craise(c);
</a><a href="#h7-0-176" id="h7-0-176" class="i">+		c-&gt;revert = sel;
</a><a href="#h7-0-177" id="h7-0-177" class="i">+		focus(c);
</a><a href="#h7-0-178" id="h7-0-178" class="i">+	}
</a><a href="#h7-0-179" id="h7-0-179" class="i">+}
</a><a href="#h7-0-180" id="h7-0-180" class="i">+
</a><a href="#h7-0-181" id="h7-0-181" class="i">+static void
</a><a href="#h7-0-182" id="h7-0-182" class="i">+ckill(Arg *arg)
</a><a href="#h7-0-183" id="h7-0-183" class="i">+{
</a><a href="#h7-0-184" id="h7-0-184" class="i">+	if(!sel)
</a><a href="#h7-0-185" id="h7-0-185" class="i">+		return;
</a><a href="#h7-0-186" id="h7-0-186" class="i">+	if(sel-&gt;proto &amp; WM_PROTOCOL_DELWIN)
</a><a href="#h7-0-187" id="h7-0-187" class="i">+		send_message(sel-&gt;win, wm_atom[WMProtocols], wm_atom[WMDelete]);
</a><a href="#h7-0-188" id="h7-0-188" class="i">+	else
</a><a href="#h7-0-189" id="h7-0-189" class="i">+		XKillClient(dpy, sel-&gt;win);
</a><a href="#h7-0-190" id="h7-0-190" class="i">+}
</a><a href="#h7-0-191" id="h7-0-191" class="i">+
</a><b>diff --git a/<a id="h8" href="../file/main.c.html">main.c</a> b/<a href="../file/main.c.html">main.c</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -239,7 +239,7 @@ main(int argc, char *argv[])
</a> 	cursor[CurResize] = XCreateFontCursor(dpy, XC_sizing);
 	cursor[CurMove] = XCreateFontCursor(dpy, XC_fleur);
 
<a href="#h8-0-3" id="h8-0-3" class="d">-	update_keys();
</a><a href="#h8-0-4" id="h8-0-4" class="i">+	grabkeys();
</a> 
 	/* style */
 	dc.bg = initcolor(BGCOLOR);
<b>diff --git a/<a id="h9" href="../file/screen.c.html">screen.c</a> b/<a href="../file/screen.c.html">screen.c</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -0,0 +1,100 @@
</a><a href="#h9-0-0" id="h9-0-0" class="i">+/*
</a><a href="#h9-0-1" id="h9-0-1" class="i">+ * (C)opyright MMVI Anselm R. Garbe &lt;garbeam at gmail dot com&gt;
</a><a href="#h9-0-2" id="h9-0-2" class="i">+ * See LICENSE file for license details.
</a><a href="#h9-0-3" id="h9-0-3" class="i">+ */
</a><a href="#h9-0-4" id="h9-0-4" class="i">+
</a><a href="#h9-0-5" id="h9-0-5" class="i">+#include &quot;dwm.h&quot;
</a><a href="#h9-0-6" id="h9-0-6" class="i">+
</a><a href="#h9-0-7" id="h9-0-7" class="i">+void (*arrange)(Arg *) = tiling;
</a><a href="#h9-0-8" id="h9-0-8" class="i">+
</a><a href="#h9-0-9" id="h9-0-9" class="i">+void
</a><a href="#h9-0-10" id="h9-0-10" class="i">+view(Arg *arg)
</a><a href="#h9-0-11" id="h9-0-11" class="i">+{
</a><a href="#h9-0-12" id="h9-0-12" class="i">+	Client *c;
</a><a href="#h9-0-13" id="h9-0-13" class="i">+
</a><a href="#h9-0-14" id="h9-0-14" class="i">+	tsel = arg-&gt;i;
</a><a href="#h9-0-15" id="h9-0-15" class="i">+	arrange(NULL);
</a><a href="#h9-0-16" id="h9-0-16" class="i">+
</a><a href="#h9-0-17" id="h9-0-17" class="i">+	for(c = clients; c; c = next(c-&gt;next))
</a><a href="#h9-0-18" id="h9-0-18" class="i">+		draw_client(c);
</a><a href="#h9-0-19" id="h9-0-19" class="i">+	draw_bar();
</a><a href="#h9-0-20" id="h9-0-20" class="i">+}
</a><a href="#h9-0-21" id="h9-0-21" class="i">+
</a><a href="#h9-0-22" id="h9-0-22" class="i">+void
</a><a href="#h9-0-23" id="h9-0-23" class="i">+floating(Arg *arg)
</a><a href="#h9-0-24" id="h9-0-24" class="i">+{
</a><a href="#h9-0-25" id="h9-0-25" class="i">+	Client *c;
</a><a href="#h9-0-26" id="h9-0-26" class="i">+
</a><a href="#h9-0-27" id="h9-0-27" class="i">+	arrange = floating;
</a><a href="#h9-0-28" id="h9-0-28" class="i">+	for(c = clients; c; c = c-&gt;next) {
</a><a href="#h9-0-29" id="h9-0-29" class="i">+		if(c-&gt;tags[tsel])
</a><a href="#h9-0-30" id="h9-0-30" class="i">+			resize(c, True);
</a><a href="#h9-0-31" id="h9-0-31" class="i">+		else
</a><a href="#h9-0-32" id="h9-0-32" class="i">+			ban_client(c);
</a><a href="#h9-0-33" id="h9-0-33" class="i">+	}
</a><a href="#h9-0-34" id="h9-0-34" class="i">+	if(sel &amp;&amp; !sel-&gt;tags[tsel]) {
</a><a href="#h9-0-35" id="h9-0-35" class="i">+		if((sel = next(clients))) {
</a><a href="#h9-0-36" id="h9-0-36" class="i">+			craise(sel);
</a><a href="#h9-0-37" id="h9-0-37" class="i">+			focus(sel);
</a><a href="#h9-0-38" id="h9-0-38" class="i">+		}
</a><a href="#h9-0-39" id="h9-0-39" class="i">+	}
</a><a href="#h9-0-40" id="h9-0-40" class="i">+	draw_bar();
</a><a href="#h9-0-41" id="h9-0-41" class="i">+}
</a><a href="#h9-0-42" id="h9-0-42" class="i">+
</a><a href="#h9-0-43" id="h9-0-43" class="i">+void
</a><a href="#h9-0-44" id="h9-0-44" class="i">+tiling(Arg *arg)
</a><a href="#h9-0-45" id="h9-0-45" class="i">+{
</a><a href="#h9-0-46" id="h9-0-46" class="i">+	Client *c;
</a><a href="#h9-0-47" id="h9-0-47" class="i">+	int n, i, w, h;
</a><a href="#h9-0-48" id="h9-0-48" class="i">+
</a><a href="#h9-0-49" id="h9-0-49" class="i">+	w = sw - mw;
</a><a href="#h9-0-50" id="h9-0-50" class="i">+	arrange = tiling;
</a><a href="#h9-0-51" id="h9-0-51" class="i">+	for(n = 0, c = clients; c; c = c-&gt;next)
</a><a href="#h9-0-52" id="h9-0-52" class="i">+		if(c-&gt;tags[tsel] &amp;&amp; !c-&gt;floating)
</a><a href="#h9-0-53" id="h9-0-53" class="i">+			n++;
</a><a href="#h9-0-54" id="h9-0-54" class="i">+
</a><a href="#h9-0-55" id="h9-0-55" class="i">+	if(n &gt; 1)
</a><a href="#h9-0-56" id="h9-0-56" class="i">+		h = (sh - bh) / (n - 1);
</a><a href="#h9-0-57" id="h9-0-57" class="i">+	else
</a><a href="#h9-0-58" id="h9-0-58" class="i">+		h = sh - bh;
</a><a href="#h9-0-59" id="h9-0-59" class="i">+
</a><a href="#h9-0-60" id="h9-0-60" class="i">+	for(i = 0, c = clients; c; c = c-&gt;next) {
</a><a href="#h9-0-61" id="h9-0-61" class="i">+		if(c-&gt;tags[tsel]) {
</a><a href="#h9-0-62" id="h9-0-62" class="i">+			if(c-&gt;floating) {
</a><a href="#h9-0-63" id="h9-0-63" class="i">+				craise(c);
</a><a href="#h9-0-64" id="h9-0-64" class="i">+				resize(c, True);
</a><a href="#h9-0-65" id="h9-0-65" class="i">+				continue;
</a><a href="#h9-0-66" id="h9-0-66" class="i">+			}
</a><a href="#h9-0-67" id="h9-0-67" class="i">+			if(n == 1) {
</a><a href="#h9-0-68" id="h9-0-68" class="i">+				c-&gt;x = sx;
</a><a href="#h9-0-69" id="h9-0-69" class="i">+				c-&gt;y = sy + bh;
</a><a href="#h9-0-70" id="h9-0-70" class="i">+				c-&gt;w = sw - 2 * c-&gt;border;
</a><a href="#h9-0-71" id="h9-0-71" class="i">+				c-&gt;h = sh - 2 * c-&gt;border - bh;
</a><a href="#h9-0-72" id="h9-0-72" class="i">+			}
</a><a href="#h9-0-73" id="h9-0-73" class="i">+			else if(i == 0) {
</a><a href="#h9-0-74" id="h9-0-74" class="i">+				c-&gt;x = sx;
</a><a href="#h9-0-75" id="h9-0-75" class="i">+				c-&gt;y = sy + bh;
</a><a href="#h9-0-76" id="h9-0-76" class="i">+				c-&gt;w = mw - 2 * c-&gt;border;
</a><a href="#h9-0-77" id="h9-0-77" class="i">+				c-&gt;h = sh - 2 * c-&gt;border - bh;
</a><a href="#h9-0-78" id="h9-0-78" class="i">+			}
</a><a href="#h9-0-79" id="h9-0-79" class="i">+			else {
</a><a href="#h9-0-80" id="h9-0-80" class="i">+				c-&gt;x = sx + mw;
</a><a href="#h9-0-81" id="h9-0-81" class="i">+				c-&gt;y = sy + (i - 1) * h + bh;
</a><a href="#h9-0-82" id="h9-0-82" class="i">+				c-&gt;w = w - 2 * c-&gt;border;
</a><a href="#h9-0-83" id="h9-0-83" class="i">+				c-&gt;h = h - 2 * c-&gt;border;
</a><a href="#h9-0-84" id="h9-0-84" class="i">+			}
</a><a href="#h9-0-85" id="h9-0-85" class="i">+			resize(c, False);
</a><a href="#h9-0-86" id="h9-0-86" class="i">+			i++;
</a><a href="#h9-0-87" id="h9-0-87" class="i">+		}
</a><a href="#h9-0-88" id="h9-0-88" class="i">+		else
</a><a href="#h9-0-89" id="h9-0-89" class="i">+			ban_client(c);
</a><a href="#h9-0-90" id="h9-0-90" class="i">+	}
</a><a href="#h9-0-91" id="h9-0-91" class="i">+	if(!sel || (sel &amp;&amp; !sel-&gt;tags[tsel])) {
</a><a href="#h9-0-92" id="h9-0-92" class="i">+		if((sel = next(clients))) {
</a><a href="#h9-0-93" id="h9-0-93" class="i">+			craise(sel);
</a><a href="#h9-0-94" id="h9-0-94" class="i">+			focus(sel);
</a><a href="#h9-0-95" id="h9-0-95" class="i">+		}
</a><a href="#h9-0-96" id="h9-0-96" class="i">+	}
</a><a href="#h9-0-97" id="h9-0-97" class="i">+	draw_bar();
</a><a href="#h9-0-98" id="h9-0-98" class="i">+}
</a><a href="#h9-0-99" id="h9-0-99" class="i">+
</a></pre>
</div>
</body>
</html>
