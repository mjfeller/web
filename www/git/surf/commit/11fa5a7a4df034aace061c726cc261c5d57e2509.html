<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Style update for indentation - surf - surf browser, a WebKit based browser
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="surf Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>surf</h1><span class="desc">surf browser, a WebKit based browser
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/11fa5a7a4df034aace061c726cc261c5d57e2509.html">11fa5a7a4df034aace061c726cc261c5d57e2509</a>
<b>parent</b> <a href="../commit/954a7181970f61acd54ce82cdff4195e72530db1.html">954a7181970f61acd54ce82cdff4195e72530db1</a>
<b>Author:</b> Quentin Rameau &lt;<a href="mailto:quinq@fifth.space">quinq@fifth.space</a>&gt;
<b>Date:</b>   Sun, 22 Nov 2015 01:42:34 +0100

Style update for indentation

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.def.h</a></td><td> | </td><td class="num">42</td><td><span class="i">+++++++++++++++++++++</span><span class="d">---------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">surf.c</a></td><td> | </td><td class="num">297</td><td><span class="i">++++++++++++++++++++++++++++++++++++</span><span class="d">-------------------------------------------</span></td></tr>
</table></pre><pre>2 files changed, 158 insertions(+), 181 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.def.h.html">config.def.h</a> b/<a href="../file/config.def.h.html">config.def.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -10,7 +10,7 @@ static Bool showindicators  = TRUE;  /* Show indicators in window title */
</a> static Bool runinfullscreen = FALSE; /* Run in fullscreen mode by default */
 
 static guint defaultfontsize = 12;   /* Default font size */
<a href="#h0-0-3" id="h0-0-3" class="d">-static gfloat zoomlevel = 1.0;       /* Default zoom level */
</a><a href="#h0-0-4" id="h0-0-4" class="i">+static gfloat zoomlevel     = 1.0;   /* Default zoom level */
</a> 
 /* Soup default features */
 static char *cookiefile     = &quot;~/.surf/cookies.txt&quot;;
<a href="#h0-1" id="h0-1" class="h">@@ -36,23 +36,23 @@ static WebKitFindOptions findopts = WEBKIT_FIND_OPTIONS_CASE_INSENSITIVE |
</a>                                     WEBKIT_FIND_OPTIONS_WRAP_AROUND;
 
 #define SETPROP(p, q) { \
<a href="#h0-1-3" id="h0-1-3" class="d">-	.v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-1-4" id="h0-1-4" class="d">-	     &quot;prop=\&quot;`xprop -id $2 $0 &quot; \
</a><a href="#h0-1-5" id="h0-1-5" class="d">-	     &quot;| sed \&quot;s/^$0(STRING) = \\(\\\\\&quot;\\?\\)\\(.*\\)\\1$/\\2/\&quot; &quot; \
</a><a href="#h0-1-6" id="h0-1-6" class="d">-	     &quot;| xargs -0 printf %b | dmenu`\&quot; &amp;&amp;&quot; \
</a><a href="#h0-1-7" id="h0-1-7" class="d">-	     &quot;xprop -id $2 -f $1 8s -set $1 \&quot;$prop\&quot;&quot;, \
</a><a href="#h0-1-8" id="h0-1-8" class="d">-	     p, q, winid, NULL \
</a><a href="#h0-1-9" id="h0-1-9" class="d">-	} \
</a><a href="#h0-1-10" id="h0-1-10" class="i">+        .v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-1-11" id="h0-1-11" class="i">+             &quot;prop=\&quot;`xprop -id $2 $0 &quot; \
</a><a href="#h0-1-12" id="h0-1-12" class="i">+             &quot;| sed \&quot;s/^$0(STRING) = \\(\\\\\&quot;\\?\\)\\(.*\\)\\1$/\\2/\&quot; &quot; \
</a><a href="#h0-1-13" id="h0-1-13" class="i">+             &quot;| xargs -0 printf %b | dmenu`\&quot; &amp;&amp;&quot; \
</a><a href="#h0-1-14" id="h0-1-14" class="i">+             &quot;xprop -id $2 -f $1 8s -set $1 \&quot;$prop\&quot;&quot;, \
</a><a href="#h0-1-15" id="h0-1-15" class="i">+             p, q, winid, NULL \
</a><a href="#h0-1-16" id="h0-1-16" class="i">+        } \
</a> }
 
 /* DOWNLOAD(URI, referer) */
 #define DOWNLOAD(d, r) { \
<a href="#h0-1-21" id="h0-1-21" class="d">-	.v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-1-22" id="h0-1-22" class="d">-	     &quot;st -e /bin/sh -c \&quot;curl -L -J -O --user-agent &#39;$1&#39;&quot; \
</a><a href="#h0-1-23" id="h0-1-23" class="d">-	     &quot; --referer &#39;$2&#39; -b $3 -c $3 &#39;$0&#39;;&quot; \
</a><a href="#h0-1-24" id="h0-1-24" class="d">-	     &quot; sleep 5;\&quot;&quot;, \
</a><a href="#h0-1-25" id="h0-1-25" class="d">-	     d, useragent, r, cookiefile, NULL \
</a><a href="#h0-1-26" id="h0-1-26" class="d">-	} \
</a><a href="#h0-1-27" id="h0-1-27" class="i">+        .v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-1-28" id="h0-1-28" class="i">+             &quot;st -e /bin/sh -c \&quot;curl -L -J -O --user-agent &#39;$1&#39;&quot; \
</a><a href="#h0-1-29" id="h0-1-29" class="i">+             &quot; --referer &#39;$2&#39; -b $3 -c $3 &#39;$0&#39;;&quot; \
</a><a href="#h0-1-30" id="h0-1-30" class="i">+             &quot; sleep 5;\&quot;&quot;, \
</a><a href="#h0-1-31" id="h0-1-31" class="i">+             d, useragent, r, cookiefile, NULL \
</a><a href="#h0-1-32" id="h0-1-32" class="i">+        } \
</a> }
 
 /* PLUMB(URI) */
<a href="#h0-2" id="h0-2" class="h">@@ -60,16 +60,16 @@ static WebKitFindOptions findopts = WEBKIT_FIND_OPTIONS_CASE_INSENSITIVE |
</a>  * &quot;http://&quot; or &quot;https://&quot; should be opened.
  */
 #define PLUMB(u) {\
<a href="#h0-2-3" id="h0-2-3" class="d">-	.v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-2-4" id="h0-2-4" class="d">-	     &quot;xdg-open \&quot;$0\&quot;&quot;, u, NULL \
</a><a href="#h0-2-5" id="h0-2-5" class="d">-	} \
</a><a href="#h0-2-6" id="h0-2-6" class="i">+        .v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-2-7" id="h0-2-7" class="i">+             &quot;xdg-open \&quot;$0\&quot;&quot;, u, NULL \
</a><a href="#h0-2-8" id="h0-2-8" class="i">+        } \
</a> }
 
 /* VIDEOPLAY(URI) */
 #define VIDEOPLAY(u) {\
<a href="#h0-2-13" id="h0-2-13" class="d">-	.v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-2-14" id="h0-2-14" class="d">-	    &quot;mpv --really-quiet \&quot;$0\&quot;&quot;, u, NULL \
</a><a href="#h0-2-15" id="h0-2-15" class="d">-	} \
</a><a href="#h0-2-16" id="h0-2-16" class="i">+        .v = (const char *[]){ &quot;/bin/sh&quot;, &quot;-c&quot;, \
</a><a href="#h0-2-17" id="h0-2-17" class="i">+             &quot;mpv --really-quiet \&quot;$0\&quot;&quot;, u, NULL \
</a><a href="#h0-2-18" id="h0-2-18" class="i">+        } \
</a> }
 
 /* styles */
<a href="#h0-3" id="h0-3" class="h">@@ -90,7 +90,7 @@ static SiteStyle styles[] = {
</a>  * edit the CLEANMASK() macro.
  */
 static Key keys[] = {
<a href="#h0-3-3" id="h0-3-3" class="d">-	/* modifier	         keyval          function    arg */
</a><a href="#h0-3-4" id="h0-3-4" class="i">+	/* modifier              keyval          function    arg */
</a> 	{ MODKEY,                GDK_KEY_g,      spawn,      SETPROP(&quot;_SURF_URI&quot;, &quot;_SURF_GO&quot;) },
 	{ MODKEY,                GDK_KEY_f,      spawn,      SETPROP(&quot;_SURF_FIND&quot;, &quot;_SURF_FIND&quot;) },
 	{ MODKEY,                GDK_KEY_slash,  spawn,      SETPROP(&quot;_SURF_FIND&quot;, &quot;_SURF_FIND&quot;) },
<b>diff --git a/<a id="h1" href="../file/surf.c.html">surf.c</a> b/<a href="../file/surf.c.html">surf.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -122,7 +122,7 @@ static void runscript(Client *c);
</a> static void evalscript(Client *c, const char *jsstr, ...);
 static void updatewinid(Client *c);
 static void handleplumb(Client *c, const gchar *uri);
<a href="#h1-0-3" id="h1-0-3" class="d">-static void newwindow(Client *c, const Arg *arg, gboolean noembed);
</a><a href="#h1-0-4" id="h1-0-4" class="i">+static void newwindow(Client *c, const Arg *a, gboolean noembed);
</a> static void spawn(Client *c, const Arg *a);
 static void destroyclient(Client *c);
 static void cleanup(void);
<a href="#h1-1" id="h1-1" class="h">@@ -130,7 +130,7 @@ static void cleanup(void);
</a> /* GTK/WebKit */
 static WebKitWebView *newview(Client *c, WebKitWebView *rv);
 static GtkWidget *createview(WebKitWebView *v, WebKitNavigationAction *a,
<a href="#h1-1-3" id="h1-1-3" class="d">-		Client *c);
</a><a href="#h1-1-4" id="h1-1-4" class="i">+                             Client *c);
</a> static gboolean buttonreleased(GtkWidget *w, GdkEventKey *e, Client *c);
 static gboolean keypress(GtkAccelGroup *group, GObject *obj, guint key,
                          GdkModifierType mods, Client *c);
<a href="#h1-2" id="h1-2" class="h">@@ -143,16 +143,16 @@ static void loadchanged(WebKitWebView *v, WebKitLoadEvent e, Client *c);
</a> static void progresschanged(WebKitWebView *v, GParamSpec *ps, Client *c);
 static void titlechanged(WebKitWebView *view, GParamSpec *ps, Client *c);
 static void mousetargetchanged(WebKitWebView *v, WebKitHitTestResult *h,
<a href="#h1-2-3" id="h1-2-3" class="d">-		guint modifiers, Client *c);
</a><a href="#h1-2-4" id="h1-2-4" class="i">+                               guint modifiers, Client *c);
</a> static gboolean permissionrequested(WebKitWebView *v,
<a href="#h1-2-6" id="h1-2-6" class="d">-		WebKitPermissionRequest *r, Client *c);
</a><a href="#h1-2-7" id="h1-2-7" class="i">+                                    WebKitPermissionRequest *r, Client *c);
</a> static gboolean decidepolicy(WebKitWebView *v, WebKitPolicyDecision *d,
<a href="#h1-2-9" id="h1-2-9" class="d">-    WebKitPolicyDecisionType dt, Client *c);
</a><a href="#h1-2-10" id="h1-2-10" class="i">+                             WebKitPolicyDecisionType dt, Client *c);
</a> static void decidenavigation(WebKitPolicyDecision *d, Client *c);
 static void decidenewwindow(WebKitPolicyDecision *d, Client *c);
 static void decideresource(WebKitPolicyDecision *d, Client *c);
 static void downloadstarted(WebKitWebContext *wc, WebKitDownload *d,
<a href="#h1-2-15" id="h1-2-15" class="d">-		Client *c);
</a><a href="#h1-2-16" id="h1-2-16" class="i">+                            Client *c);
</a> static void responsereceived(WebKitDownload *d, GParamSpec *ps, Client *c);
 static void download(Client *c, WebKitURIResponse *r);
 static void closeview(WebKitWebView *v, Client *c);
<a href="#h1-3" id="h1-3" class="h">@@ -160,18 +160,18 @@ static void destroywin(GtkWidget* w, Client *c);
</a> 
 /* Hotkeys */
 static void pasteuri(GtkClipboard *clipboard, const char *text, gpointer d);
<a href="#h1-3-3" id="h1-3-3" class="d">-static void reload(Client *c, const Arg *arg);
</a><a href="#h1-3-4" id="h1-3-4" class="i">+static void reload(Client *c, const Arg *a);
</a> static void print(Client *c, const Arg *a);
 static void clipboard(Client *c, const Arg *a);
 static void zoom(Client *c, const Arg *a);
 static void scroll_v(Client *c, const Arg *a);
 static void scroll_h(Client *c, const Arg *a);
 static void navigate(Client *c, const Arg *a);
<a href="#h1-3-11" id="h1-3-11" class="d">-static void stop(Client *c, const Arg *arg);
</a><a href="#h1-3-12" id="h1-3-12" class="i">+static void stop(Client *c, const Arg *a);
</a> static void toggle(Client *c, const Arg *a);
 static void togglefullscreen(Client *c, const Arg *a);
<a href="#h1-3-15" id="h1-3-15" class="d">-static void togglecookiepolicy(Client *c, const Arg *arg);
</a><a href="#h1-3-16" id="h1-3-16" class="d">-static void togglestyle(Client *c, const Arg *arg);
</a><a href="#h1-3-17" id="h1-3-17" class="i">+static void togglecookiepolicy(Client *c, const Arg *a);
</a><a href="#h1-3-18" id="h1-3-18" class="i">+static void togglestyle(Client *c, const Arg *a);
</a> static void toggleinspector(Client *c, const Arg *a);
 static void find(Client *c, const Arg *a);
 
<a href="#h1-4" id="h1-4" class="h">@@ -236,9 +236,9 @@ setup(void)
</a> 	scriptfile = buildfile(scriptfile);
 	cachedir   = buildpath(cachedir);
 
<a href="#h1-4-3" id="h1-4-3" class="d">-	if (stylefile == NULL) {
</a><a href="#h1-4-4" id="h1-4-4" class="i">+	if (!stylefile) {
</a> 		styledir = buildpath(styledir);
<a href="#h1-4-6" id="h1-4-6" class="d">-		for (i = 0; i &lt; LENGTH(styles); i++) {
</a><a href="#h1-4-7" id="h1-4-7" class="i">+		for (i = 0; i &lt; LENGTH(styles); ++i) {
</a> 			if (regcomp(&amp;(styles[i].re), styles[i].regex,
 			    REG_EXTENDED)) {
 				fprintf(stderr,
<a href="#h1-5" id="h1-5" class="h">@@ -247,7 +247,7 @@ setup(void)
</a> 				styles[i].regex = NULL;
 			}
 			styles[i].style = g_strconcat(styledir, &quot;/&quot;,
<a href="#h1-5-3" id="h1-5-3" class="d">-			    styles[i].style, NULL);
</a><a href="#h1-5-4" id="h1-5-4" class="i">+			                              styles[i].style, NULL);
</a> 		}
 		g_free(styledir);
 	} else {
<a href="#h1-6" id="h1-6" class="h">@@ -365,7 +365,7 @@ loaduri(Client *c, const Arg *a)
</a> {
 	struct stat st;
 	char *url, *path;
<a href="#h1-6-3" id="h1-6-3" class="d">-	const char *uri = (char *)a-&gt;v;
</a><a href="#h1-6-4" id="h1-6-4" class="i">+	const char *uri = a-&gt;v;
</a> 
 	if (g_strcmp0(uri, &quot;&quot;) == 0)
 		return;
<a href="#h1-7" id="h1-7" class="h">@@ -420,11 +420,10 @@ getatom(Client *c, int a)
</a> 	unsigned long ldummy;
 	unsigned char *p = NULL;
 
<a href="#h1-7-3" id="h1-7-3" class="d">-	XGetWindowProperty(dpy, c-&gt;xid,
</a><a href="#h1-7-4" id="h1-7-4" class="d">-			   atoms[a], 0L, BUFSIZ, False, XA_STRING,
</a><a href="#h1-7-5" id="h1-7-5" class="d">-			   &amp;adummy, &amp;idummy, &amp;ldummy, &amp;ldummy, &amp;p);
</a><a href="#h1-7-6" id="h1-7-6" class="i">+	XGetWindowProperty(dpy, c-&gt;xid, atoms[a], 0L, BUFSIZ, False, XA_STRING,
</a><a href="#h1-7-7" id="h1-7-7" class="i">+	                   &amp;adummy, &amp;idummy, &amp;ldummy, &amp;ldummy, &amp;p);
</a> 	if (p)
<a href="#h1-7-9" id="h1-7-9" class="d">-		strncpy(buf, (char *)p, LENGTH(buf)-1);
</a><a href="#h1-7-10" id="h1-7-10" class="i">+		strncpy(buf, (char *)p, LENGTH(buf) - 1);
</a> 	else
 		buf[0] = &#39;\0&#39;;
 	XFree(p);
<a href="#h1-8" id="h1-8" class="h">@@ -443,19 +442,19 @@ updatetitle(Client *c)
</a> 
 		if (c-&gt;progress != 100) {
 			title = g_strdup_printf(&quot;[%i%%] %s:%s | %s&quot;,
<a href="#h1-8-3" id="h1-8-3" class="d">-			    c-&gt;progress, togglestats, pagestats,
</a><a href="#h1-8-4" id="h1-8-4" class="d">-			    c-&gt;targeturi ? c-&gt;targeturi : c-&gt;title);
</a><a href="#h1-8-5" id="h1-8-5" class="i">+			        c-&gt;progress, togglestats, pagestats,
</a><a href="#h1-8-6" id="h1-8-6" class="i">+			        c-&gt;targeturi ? c-&gt;targeturi : c-&gt;title);
</a> 		} else {
 			title = g_strdup_printf(&quot;%s:%s | %s&quot;,
<a href="#h1-8-9" id="h1-8-9" class="d">-			    togglestats, pagestats,
</a><a href="#h1-8-10" id="h1-8-10" class="d">-			    c-&gt;targeturi ? c-&gt;targeturi : c-&gt;title);
</a><a href="#h1-8-11" id="h1-8-11" class="i">+			        togglestats, pagestats,
</a><a href="#h1-8-12" id="h1-8-12" class="i">+			        c-&gt;targeturi ? c-&gt;targeturi : c-&gt;title);
</a> 		}
 
 		gtk_window_set_title(GTK_WINDOW(c-&gt;win), title);
 		g_free(title);
 	} else {
 		gtk_window_set_title(GTK_WINDOW(c-&gt;win), c-&gt;title ?
<a href="#h1-8-19" id="h1-8-19" class="d">-		    c-&gt;title : &quot;&quot;);
</a><a href="#h1-8-20" id="h1-8-20" class="i">+		                     c-&gt;title : &quot;&quot;);
</a> 	}
 }
 
<a href="#h1-9" id="h1-9" class="h">@@ -463,13 +462,13 @@ void
</a> gettogglestats(Client *c)
 {
 	togglestats[0] = cookiepolicy_set(cookiepolicy_get());
<a href="#h1-9-3" id="h1-9-3" class="d">-	togglestats[1] = enablecaretbrowsing ? &#39;C&#39; : &#39;c&#39;;
</a><a href="#h1-9-4" id="h1-9-4" class="d">-	togglestats[2] = allowgeolocation ? &#39;G&#39; : &#39;g&#39;;
</a><a href="#h1-9-5" id="h1-9-5" class="d">-	togglestats[3] = enablecache ? &#39;D&#39; : &#39;d&#39;;
</a><a href="#h1-9-6" id="h1-9-6" class="d">-	togglestats[4] = loadimages ? &#39;I&#39; : &#39;i&#39;;
</a><a href="#h1-9-7" id="h1-9-7" class="d">-	togglestats[5] = enablescripts ? &#39;S&#39;: &#39;s&#39;;
</a><a href="#h1-9-8" id="h1-9-8" class="d">-	togglestats[6] = enableplugins ? &#39;V&#39; : &#39;v&#39;;
</a><a href="#h1-9-9" id="h1-9-9" class="d">-	togglestats[7] = enablestyle ? &#39;M&#39; : &#39;m&#39;;
</a><a href="#h1-9-10" id="h1-9-10" class="i">+	togglestats[1] = enablecaretbrowsing ?   &#39;C&#39; : &#39;c&#39;;
</a><a href="#h1-9-11" id="h1-9-11" class="i">+	togglestats[2] = allowgeolocation ?      &#39;G&#39; : &#39;g&#39;;
</a><a href="#h1-9-12" id="h1-9-12" class="i">+	togglestats[3] = enablecache ?           &#39;D&#39; : &#39;d&#39;;
</a><a href="#h1-9-13" id="h1-9-13" class="i">+	togglestats[4] = loadimages ?            &#39;I&#39; : &#39;i&#39;;
</a><a href="#h1-9-14" id="h1-9-14" class="i">+	togglestats[5] = enablescripts ?         &#39;S&#39; : &#39;s&#39;;
</a><a href="#h1-9-15" id="h1-9-15" class="i">+	togglestats[6] = enableplugins ?         &#39;V&#39; : &#39;v&#39;;
</a><a href="#h1-9-16" id="h1-9-16" class="i">+	togglestats[7] = enablestyle ?           &#39;M&#39; : &#39;m&#39;;
</a> 	togglestats[8] = enableframeflattening ? &#39;F&#39; : &#39;f&#39;;
 	togglestats[9] = &#39;\0&#39;;
 }
<a href="#h1-10" id="h1-10" class="h">@@ -478,7 +477,7 @@ void
</a> getpagestats(Client *c)
 {
 	pagestats[0] = c-&gt;tlsflags &gt; G_TLS_CERTIFICATE_VALIDATE_ALL ? &#39;-&#39; :
<a href="#h1-10-3" id="h1-10-3" class="d">-	    c-&gt;tlsflags &gt; 0 ? &#39;U&#39; : &#39;T&#39;;
</a><a href="#h1-10-4" id="h1-10-4" class="i">+	               c-&gt;tlsflags &gt; 0 ? &#39;U&#39; : &#39;T&#39;;
</a> 	pagestats[1] = &#39;\0&#39;;
 }
 
<a href="#h1-11" id="h1-11" class="h">@@ -499,9 +498,9 @@ cookiepolicy_get(void)
</a> }
 
 char
<a href="#h1-11-3" id="h1-11-3" class="d">-cookiepolicy_set(const WebKitCookieAcceptPolicy ep)
</a><a href="#h1-11-4" id="h1-11-4" class="i">+cookiepolicy_set(const WebKitCookieAcceptPolicy p)
</a> {
<a href="#h1-11-6" id="h1-11-6" class="d">-	switch (ep) {
</a><a href="#h1-11-7" id="h1-11-7" class="i">+	switch (p) {
</a> 	case WEBKIT_COOKIE_POLICY_ACCEPT_NEVER:
 		return &#39;a&#39;;
 	case WEBKIT_COOKIE_POLICY_ACCEPT_NO_THIRD_PARTY:
<a href="#h1-12" id="h1-12" class="h">@@ -519,12 +518,12 @@ getstyle(const char *uri)
</a> {
 	int i;
 
<a href="#h1-12-3" id="h1-12-3" class="d">-	if (stylefile != NULL)
</a><a href="#h1-12-4" id="h1-12-4" class="i">+	if (stylefile)
</a> 		return stylefile;
 
<a href="#h1-12-7" id="h1-12-7" class="d">-	for (i = 0; i &lt; LENGTH(styles); i++) {
</a><a href="#h1-12-8" id="h1-12-8" class="d">-		if (styles[i].regex &amp;&amp; !regexec(&amp;(styles[i].re), uri, 0,
</a><a href="#h1-12-9" id="h1-12-9" class="d">-		    NULL, 0))
</a><a href="#h1-12-10" id="h1-12-10" class="i">+	for (i = 0; i &lt; LENGTH(styles); ++i) {
</a><a href="#h1-12-11" id="h1-12-11" class="i">+		if (styles[i].regex &amp;&amp;
</a><a href="#h1-12-12" id="h1-12-12" class="i">+		    !regexec(&amp;(styles[i].re), uri, 0, NULL, 0))
</a> 			return styles[i].style;
 	}
 
<a href="#h1-13" id="h1-13" class="h">@@ -585,10 +584,8 @@ updatewinid(Client *c)
</a> void
 handleplumb(Client *c, const gchar *uri)
 {
<a href="#h1-13-3" id="h1-13-3" class="d">-	Arg arg;
</a><a href="#h1-13-4" id="h1-13-4" class="d">-
</a><a href="#h1-13-5" id="h1-13-5" class="d">-	arg = (Arg)PLUMB(uri);
</a><a href="#h1-13-6" id="h1-13-6" class="d">-	spawn(c, &amp;arg);
</a><a href="#h1-13-7" id="h1-13-7" class="i">+	Arg a = (Arg)PLUMB(uri);
</a><a href="#h1-13-8" id="h1-13-8" class="i">+	spawn(c, &amp;a);
</a> }
 
 void
<a href="#h1-14" id="h1-14" class="h">@@ -645,14 +642,14 @@ newwindow(Client *c, const Arg *a, int noembed)
</a> }
 
 void
<a href="#h1-14-3" id="h1-14-3" class="d">-spawn(Client *c, const Arg *arg)
</a><a href="#h1-14-4" id="h1-14-4" class="i">+spawn(Client *c, const Arg *a)
</a> {
 	if (fork() == 0) {
 		if (dpy)
 			close(ConnectionNumber(dpy));
 		setsid();
<a href="#h1-14-10" id="h1-14-10" class="d">-		execvp(((char **)arg-&gt;v)[0], (char **)arg-&gt;v);
</a><a href="#h1-14-11" id="h1-14-11" class="d">-		fprintf(stderr, &quot;surf: execvp %s&quot;, ((char **)arg-&gt;v)[0]);
</a><a href="#h1-14-12" id="h1-14-12" class="i">+		execvp(((char **)a-&gt;v)[0], (char **)a-&gt;v);
</a><a href="#h1-14-13" id="h1-14-13" class="i">+		fprintf(stderr, &quot;surf: execvp %s&quot;, ((char **)a-&gt;v)[0]);
</a> 		perror(&quot; failed&quot;);
 		exit(0);
 	}
<a href="#h1-15" id="h1-15" class="h">@@ -702,19 +699,19 @@ newview(Client *c, WebKitWebView *rv)
</a> 		    webkit_web_view_new_with_related_view(rv));
 	} else {
 		settings = webkit_settings_new_with_settings(
<a href="#h1-15-3" id="h1-15-3" class="d">-		    &quot;auto-load-images&quot;, loadimages,
</a><a href="#h1-15-4" id="h1-15-4" class="d">-		    &quot;default-font-size&quot;, defaultfontsize,
</a><a href="#h1-15-5" id="h1-15-5" class="d">-		    &quot;enable-caret-browsing&quot;, enablecaretbrowsing,
</a><a href="#h1-15-6" id="h1-15-6" class="d">-		    &quot;enable-developer-extras&quot;, enableinspector,
</a><a href="#h1-15-7" id="h1-15-7" class="d">-		    &quot;enable-dns-prefetching&quot;, enablednsprefetching,
</a><a href="#h1-15-8" id="h1-15-8" class="d">-		    &quot;enable-frame-flattening&quot;, enableframeflattening,
</a><a href="#h1-15-9" id="h1-15-9" class="d">-		    &quot;enable-html5-database&quot;, enablecache,
</a><a href="#h1-15-10" id="h1-15-10" class="d">-		    &quot;enable-html5-local-storage&quot;, enablecache,
</a><a href="#h1-15-11" id="h1-15-11" class="d">-		    &quot;enable-javascript&quot;, enablescripts,
</a><a href="#h1-15-12" id="h1-15-12" class="d">-		    &quot;enable-plugins&quot;, enableplugins,
</a><a href="#h1-15-13" id="h1-15-13" class="d">-		    NULL);
</a><a href="#h1-15-14" id="h1-15-14" class="d">-		/* Have a look at http://webkitgtk.org/reference/webkit2gtk/stable/WebKitSettings.html
</a><a href="#h1-15-15" id="h1-15-15" class="d">-		 * for more interesting settings */
</a><a href="#h1-15-16" id="h1-15-16" class="i">+		           &quot;auto-load-images&quot;, loadimages,
</a><a href="#h1-15-17" id="h1-15-17" class="i">+		           &quot;default-font-size&quot;, defaultfontsize,
</a><a href="#h1-15-18" id="h1-15-18" class="i">+		           &quot;enable-caret-browsing&quot;, enablecaretbrowsing,
</a><a href="#h1-15-19" id="h1-15-19" class="i">+		           &quot;enable-developer-extras&quot;, enableinspector,
</a><a href="#h1-15-20" id="h1-15-20" class="i">+		           &quot;enable-dns-prefetching&quot;, enablednsprefetching,
</a><a href="#h1-15-21" id="h1-15-21" class="i">+		           &quot;enable-frame-flattening&quot;, enableframeflattening,
</a><a href="#h1-15-22" id="h1-15-22" class="i">+		           &quot;enable-html5-database&quot;, enablecache,
</a><a href="#h1-15-23" id="h1-15-23" class="i">+		           &quot;enable-html5-local-storage&quot;, enablecache,
</a><a href="#h1-15-24" id="h1-15-24" class="i">+		           &quot;enable-javascript&quot;, enablescripts,
</a><a href="#h1-15-25" id="h1-15-25" class="i">+		           &quot;enable-plugins&quot;, enableplugins,
</a><a href="#h1-15-26" id="h1-15-26" class="i">+		           NULL);
</a><a href="#h1-15-27" id="h1-15-27" class="i">+/* For mor interesting settings, have a look at
</a><a href="#h1-15-28" id="h1-15-28" class="i">+ * http://webkitgtk.org/reference/webkit2gtk/stable/WebKitSettings.html */
</a> 
 		if (strcmp(fulluseragent, &quot;&quot;)) {
 			webkit_settings_set_user_agent(settings, fulluseragent);
<a href="#h1-16" id="h1-16" class="h">@@ -727,21 +724,23 @@ newview(Client *c, WebKitWebView *rv)
</a> 		contentmanager = webkit_user_content_manager_new();
 
 		context = webkit_web_context_new_with_website_data_manager(
<a href="#h1-16-3" id="h1-16-3" class="d">-		    webkit_website_data_manager_new(
</a><a href="#h1-16-4" id="h1-16-4" class="d">-		    &quot;base-cache-directory&quot;, cachedir,
</a><a href="#h1-16-5" id="h1-16-5" class="d">-		    &quot;base-data-directory&quot;, cachedir,
</a><a href="#h1-16-6" id="h1-16-6" class="d">-		    NULL));
</a><a href="#h1-16-7" id="h1-16-7" class="i">+		          webkit_website_data_manager_new(
</a><a href="#h1-16-8" id="h1-16-8" class="i">+		          &quot;base-cache-directory&quot;, cachedir,
</a><a href="#h1-16-9" id="h1-16-9" class="i">+		          &quot;base-data-directory&quot;, cachedir,
</a><a href="#h1-16-10" id="h1-16-10" class="i">+		          NULL));
</a> 
<a href="#h1-16-12" id="h1-16-12" class="d">-		/* rendering process model, can be a shared unique one or one for each
</a><a href="#h1-16-13" id="h1-16-13" class="d">-		 * view */
</a><a href="#h1-16-14" id="h1-16-14" class="i">+		/* rendering process model, can be a shared unique one
</a><a href="#h1-16-15" id="h1-16-15" class="i">+		 * or one for each view */
</a> 		webkit_web_context_set_process_model(context,
 		    WEBKIT_PROCESS_MODEL_MULTIPLE_SECONDARY_PROCESSES);
 		/* ssl */
 		webkit_web_context_set_tls_errors_policy(context, strictssl ?
<a href="#h1-16-20" id="h1-16-20" class="d">-		    WEBKIT_TLS_ERRORS_POLICY_FAIL : WEBKIT_TLS_ERRORS_POLICY_IGNORE);
</a><a href="#h1-16-21" id="h1-16-21" class="i">+		    WEBKIT_TLS_ERRORS_POLICY_FAIL :
</a><a href="#h1-16-22" id="h1-16-22" class="i">+		    WEBKIT_TLS_ERRORS_POLICY_IGNORE);
</a> 		/* disk cache */
 		webkit_web_context_set_cache_model(context, enablecache ?
<a href="#h1-16-25" id="h1-16-25" class="d">-		    WEBKIT_CACHE_MODEL_WEB_BROWSER : WEBKIT_CACHE_MODEL_DOCUMENT_VIEWER);
</a><a href="#h1-16-26" id="h1-16-26" class="i">+		    WEBKIT_CACHE_MODEL_WEB_BROWSER :
</a><a href="#h1-16-27" id="h1-16-27" class="i">+		    WEBKIT_CACHE_MODEL_DOCUMENT_VIEWER);
</a> 
 		/* Currently only works with text file to be compatible with curl */
 		webkit_cookie_manager_set_persistent_storage(
<a href="#h1-17" id="h1-17" class="h">@@ -753,7 +752,7 @@ newview(Client *c, WebKitWebView *rv)
</a> 		    cookiepolicy_get());
 
 		g_signal_connect(G_OBJECT(context), &quot;download-started&quot;,
<a href="#h1-17-3" id="h1-17-3" class="d">-		    G_CALLBACK(downloadstarted), c);
</a><a href="#h1-17-4" id="h1-17-4" class="i">+		                 G_CALLBACK(downloadstarted), c);
</a> 
 		v = g_object_new(WEBKIT_TYPE_WEB_VIEW,
 		    &quot;settings&quot;, settings,
<a href="#h1-18" id="h1-18" class="h">@@ -762,31 +761,23 @@ newview(Client *c, WebKitWebView *rv)
</a> 		    NULL);
 	}
 
<a href="#h1-18-3" id="h1-18-3" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-4" id="h1-18-4" class="d">-	                 &quot;notify::title&quot;,
</a><a href="#h1-18-5" id="h1-18-5" class="i">+	g_signal_connect(G_OBJECT(v), &quot;notify::title&quot;,
</a> 			 G_CALLBACK(titlechanged), c);
<a href="#h1-18-7" id="h1-18-7" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-8" id="h1-18-8" class="d">-	                 &quot;mouse-target-changed&quot;,
</a><a href="#h1-18-9" id="h1-18-9" class="i">+	g_signal_connect(G_OBJECT(v), &quot;mouse-target-changed&quot;,
</a> 			 G_CALLBACK(mousetargetchanged), c);
<a href="#h1-18-11" id="h1-18-11" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-12" id="h1-18-12" class="d">-	                 &quot;permission-request&quot;,
</a><a href="#h1-18-13" id="h1-18-13" class="i">+	g_signal_connect(G_OBJECT(v), &quot;permission-request&quot;,
</a> 			 G_CALLBACK(permissionrequested), c);
<a href="#h1-18-15" id="h1-18-15" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-16" id="h1-18-16" class="d">-	                 &quot;create&quot;,
</a><a href="#h1-18-17" id="h1-18-17" class="i">+	g_signal_connect(G_OBJECT(v), &quot;create&quot;,
</a> 			 G_CALLBACK(createview), c);
 	g_signal_connect(G_OBJECT(v), &quot;ready-to-show&quot;,
 			 G_CALLBACK(showview), c);
<a href="#h1-18-21" id="h1-18-21" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-22" id="h1-18-22" class="d">-	                 &quot;decide-policy&quot;,
</a><a href="#h1-18-23" id="h1-18-23" class="i">+	g_signal_connect(G_OBJECT(v), &quot;decide-policy&quot;,
</a> 			 G_CALLBACK(decidepolicy), c);
<a href="#h1-18-25" id="h1-18-25" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-26" id="h1-18-26" class="d">-	                 &quot;load-changed&quot;,
</a><a href="#h1-18-27" id="h1-18-27" class="i">+	g_signal_connect(G_OBJECT(v), &quot;load-changed&quot;,
</a> 			 G_CALLBACK(loadchanged), c);
<a href="#h1-18-29" id="h1-18-29" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-30" id="h1-18-30" class="d">-	                 &quot;notify::estimated-load-progress&quot;,
</a><a href="#h1-18-31" id="h1-18-31" class="i">+	g_signal_connect(G_OBJECT(v), &quot;notify::estimated-load-progress&quot;,
</a> 			 G_CALLBACK(progresschanged), c);
<a href="#h1-18-33" id="h1-18-33" class="d">-	g_signal_connect(G_OBJECT(v),
</a><a href="#h1-18-34" id="h1-18-34" class="d">-	                 &quot;button-release-event&quot;,
</a><a href="#h1-18-35" id="h1-18-35" class="i">+	g_signal_connect(G_OBJECT(v), &quot;button-release-event&quot;,
</a> 			 G_CALLBACK(buttonreleased), c);
 	g_signal_connect(G_OBJECT(v), &quot;close&quot;,
 			G_CALLBACK(closeview), c);
<a href="#h1-19" id="h1-19" class="h">@@ -806,10 +797,8 @@ createview(WebKitWebView *v, WebKitNavigationAction *a, Client *c)
</a> 		 * by user gesture, so inverse the logic here
 		 */
 /* instead of this, compare destination uri to mouse-over uri for validating window */
<a href="#h1-19-3" id="h1-19-3" class="d">-		if (webkit_navigation_action_is_user_gesture(a)) {
</a><a href="#h1-19-4" id="h1-19-4" class="i">+		if (webkit_navigation_action_is_user_gesture(a))
</a> 			return NULL;
<a href="#h1-19-6" id="h1-19-6" class="d">-			break;
</a><a href="#h1-19-7" id="h1-19-7" class="d">-		}
</a> 	case WEBKIT_NAVIGATION_TYPE_LINK_CLICKED: /* fallthrough */
 	case WEBKIT_NAVIGATION_TYPE_FORM_SUBMITTED: /* fallthrough */
 	case WEBKIT_NAVIGATION_TYPE_BACK_FORWARD: /* fallthrough */
<a href="#h1-20" id="h1-20" class="h">@@ -819,7 +808,6 @@ createview(WebKitWebView *v, WebKitNavigationAction *a, Client *c)
</a> 		break;
 	default:
 		return NULL;
<a href="#h1-20-3" id="h1-20-3" class="d">-		break;
</a> 	}
 
 	return GTK_WIDGET(n-&gt;view);
<a href="#h1-21" id="h1-21" class="h">@@ -874,7 +862,7 @@ processx(GdkXEvent *e, GdkEvent *event, gpointer d)
</a> {
 	Client *c = (Client *)d;
 	XPropertyEvent *ev;
<a href="#h1-21-3" id="h1-21-3" class="d">-	Arg arg;
</a><a href="#h1-21-4" id="h1-21-4" class="i">+	Arg a;
</a> 
 	if (((XEvent *)e)-&gt;type == PropertyNotify) {
 		ev = &amp;((XEvent *)e)-&gt;xproperty;
<a href="#h1-22" id="h1-22" class="h">@@ -884,8 +872,8 @@ processx(GdkXEvent *e, GdkEvent *event, gpointer d)
</a> 
 				return GDK_FILTER_REMOVE;
 			} else if (ev-&gt;atom == atoms[AtomGo]) {
<a href="#h1-22-3" id="h1-22-3" class="d">-				arg.v = getatom(c, AtomGo);
</a><a href="#h1-22-4" id="h1-22-4" class="d">-				loaduri(c, &amp;arg);
</a><a href="#h1-22-5" id="h1-22-5" class="i">+				a.v = getatom(c, AtomGo);
</a><a href="#h1-22-6" id="h1-22-6" class="i">+				loaduri(c, &amp;a);
</a> 
 				return GDK_FILTER_REMOVE;
 			}
<a href="#h1-23" id="h1-23" class="h">@@ -906,7 +894,7 @@ winevent(GtkWidget *w, GdkEvent *e, Client *c)
</a> 		if (e-&gt;window_state.changed_mask ==
 		    GDK_WINDOW_STATE_FULLSCREEN) {
 			c-&gt;fullscreen = e-&gt;window_state.new_window_state &amp;
<a href="#h1-23-3" id="h1-23-3" class="d">-			    GDK_WINDOW_STATE_FULLSCREEN;
</a><a href="#h1-23-4" id="h1-23-4" class="i">+			                GDK_WINDOW_STATE_FULLSCREEN;
</a> 			break;
 		}
 	default:
<a href="#h1-24" id="h1-24" class="h">@@ -923,49 +911,43 @@ showview(WebKitWebView *v, Client *c)
</a> 	GdkRGBA bgcolor = { 0 };
 	GdkWindow *gwin;
 
<a href="#h1-24-3" id="h1-24-3" class="d">-	c-&gt;win = createwindow(c);
</a><a href="#h1-24-4" id="h1-24-4" class="d">-
</a><a href="#h1-24-5" id="h1-24-5" class="i">+	c-&gt;finder = webkit_web_view_get_find_controller(c-&gt;view);
</a> 	if (enableinspector)
 		c-&gt;inspector = webkit_web_view_get_inspector(c-&gt;view);
 
<a href="#h1-24-9" id="h1-24-9" class="d">-	c-&gt;finder = webkit_web_view_get_find_controller(c-&gt;view);
</a><a href="#h1-24-10" id="h1-24-10" class="d">-
</a><a href="#h1-24-11" id="h1-24-11" class="d">-	if (!kioskmode)
</a><a href="#h1-24-12" id="h1-24-12" class="d">-		addaccelgroup(c);
</a><a href="#h1-24-13" id="h1-24-13" class="i">+	c-&gt;win = createwindow(c);
</a> 
<a href="#h1-24-15" id="h1-24-15" class="d">-	/* Arranging */
</a> 	gtk_container_add(GTK_CONTAINER(c-&gt;win), GTK_WIDGET(c-&gt;view));
<a href="#h1-24-17" id="h1-24-17" class="d">-
</a><a href="#h1-24-18" id="h1-24-18" class="d">-	/* Setup */
</a><a href="#h1-24-19" id="h1-24-19" class="i">+	gtk_window_set_geometry_hints(GTK_WINDOW(c-&gt;win), NULL, &amp;hints,
</a><a href="#h1-24-20" id="h1-24-20" class="i">+	                              GDK_HINT_MIN_SIZE);
</a><a href="#h1-24-21" id="h1-24-21" class="i">+	gtk_widget_show_all(c-&gt;win);
</a> 	gtk_widget_grab_focus(GTK_WIDGET(c-&gt;view));
<a href="#h1-24-23" id="h1-24-23" class="d">-	gtk_widget_show(GTK_WIDGET(c-&gt;view));
</a><a href="#h1-24-24" id="h1-24-24" class="d">-	gtk_widget_show(c-&gt;win);
</a><a href="#h1-24-25" id="h1-24-25" class="i">+
</a> 	gwin = gtk_widget_get_window(GTK_WIDGET(c-&gt;win));
 	c-&gt;xid = gdk_x11_window_get_xid(gwin);
<a href="#h1-24-28" id="h1-24-28" class="d">-	gtk_window_set_geometry_hints(GTK_WINDOW(c-&gt;win), NULL, &amp;hints,
</a><a href="#h1-24-29" id="h1-24-29" class="d">-				      GDK_HINT_MIN_SIZE);
</a><a href="#h1-24-30" id="h1-24-30" class="d">-	gdk_window_set_events(gwin, GDK_ALL_EVENTS_MASK);
</a><a href="#h1-24-31" id="h1-24-31" class="d">-	gdk_window_add_filter(gwin, processx, c);
</a><a href="#h1-24-32" id="h1-24-32" class="i">+	updatewinid(c);
</a><a href="#h1-24-33" id="h1-24-33" class="i">+	if (showxid) {
</a><a href="#h1-24-34" id="h1-24-34" class="i">+		gdk_display_sync(gtk_widget_get_display(c-&gt;win));
</a><a href="#h1-24-35" id="h1-24-35" class="i">+		puts(winid);
</a><a href="#h1-24-36" id="h1-24-36" class="i">+	}
</a> 
<a href="#h1-24-38" id="h1-24-38" class="d">-	if (zoomlevel != 1.0)
</a><a href="#h1-24-39" id="h1-24-39" class="d">-		webkit_web_view_set_zoom_level(c-&gt;view, zoomlevel);
</a><a href="#h1-24-40" id="h1-24-40" class="i">+	if (hidebackground)
</a><a href="#h1-24-41" id="h1-24-41" class="i">+		webkit_web_view_set_background_color(c-&gt;view, &amp;bgcolor);
</a><a href="#h1-24-42" id="h1-24-42" class="i">+
</a><a href="#h1-24-43" id="h1-24-43" class="i">+	if (!kioskmode) {
</a><a href="#h1-24-44" id="h1-24-44" class="i">+		addaccelgroup(c);
</a><a href="#h1-24-45" id="h1-24-45" class="i">+		gdk_window_set_events(gwin, GDK_ALL_EVENTS_MASK);
</a><a href="#h1-24-46" id="h1-24-46" class="i">+		gdk_window_add_filter(gwin, processx, c);
</a><a href="#h1-24-47" id="h1-24-47" class="i">+	}
</a> 
 	if (runinfullscreen)
 		togglefullscreen(c, NULL);
 
<a href="#h1-24-52" id="h1-24-52" class="i">+	if (zoomlevel != 1.0)
</a><a href="#h1-24-53" id="h1-24-53" class="i">+		webkit_web_view_set_zoom_level(c-&gt;view, zoomlevel);
</a><a href="#h1-24-54" id="h1-24-54" class="i">+
</a> 	setatom(c, AtomFind, &quot;&quot;);
 	setatom(c, AtomUri, &quot;about:blank&quot;);
<a href="#h1-24-57" id="h1-24-57" class="d">-	if (hidebackground)
</a><a href="#h1-24-58" id="h1-24-58" class="d">-		webkit_web_view_set_background_color(c-&gt;view, &amp;bgcolor);
</a><a href="#h1-24-59" id="h1-24-59" class="d">-
</a><a href="#h1-24-60" id="h1-24-60" class="d">-	if (showxid) {
</a><a href="#h1-24-61" id="h1-24-61" class="d">-		gdk_display_sync(gtk_widget_get_display(c-&gt;win));
</a><a href="#h1-24-62" id="h1-24-62" class="d">-		printf(&quot;%lu\n&quot;, c-&gt;xid);
</a><a href="#h1-24-63" id="h1-24-63" class="d">-		fflush(NULL);
</a><a href="#h1-24-64" id="h1-24-64" class="d">-                if (fclose(stdout) != 0) {
</a><a href="#h1-24-65" id="h1-24-65" class="d">-			die(&quot;Error closing stdout&quot;);
</a><a href="#h1-24-66" id="h1-24-66" class="d">-                }
</a><a href="#h1-24-67" id="h1-24-67" class="d">-	}
</a> }
 
 GtkWidget *
<a href="#h1-25" id="h1-25" class="h">@@ -996,11 +978,11 @@ createwindow(Client *c)
</a> 	}
 
 	g_signal_connect(G_OBJECT(w), &quot;destroy&quot;,
<a href="#h1-25-3" id="h1-25-3" class="d">-	    G_CALLBACK(destroywin), c);
</a><a href="#h1-25-4" id="h1-25-4" class="i">+	                 G_CALLBACK(destroywin), c);
</a> 	g_signal_connect(G_OBJECT(w), &quot;leave-notify-event&quot;,
<a href="#h1-25-6" id="h1-25-6" class="d">-	    G_CALLBACK(winevent), c);
</a><a href="#h1-25-7" id="h1-25-7" class="i">+	                 G_CALLBACK(winevent), c);
</a> 	g_signal_connect(G_OBJECT(w), &quot;window-state-event&quot;,
<a href="#h1-25-9" id="h1-25-9" class="d">-	    G_CALLBACK(winevent), c);
</a><a href="#h1-25-10" id="h1-25-10" class="i">+	                 G_CALLBACK(winevent), c);
</a> 
 	return w;
 }
<a href="#h1-26" id="h1-26" class="h">@@ -1016,7 +998,8 @@ loadchanged(WebKitWebView *v, WebKitLoadEvent e, Client *c)
</a> 		setatom(c, AtomUri, geturi(c));
 		break;
 	case WEBKIT_LOAD_COMMITTED:
<a href="#h1-26-3" id="h1-26-3" class="d">-		if (!webkit_web_view_get_tls_info(c-&gt;view, NULL, &amp;(c-&gt;tlsflags)))
</a><a href="#h1-26-4" id="h1-26-4" class="i">+		if (!webkit_web_view_get_tls_info(c-&gt;view, NULL,
</a><a href="#h1-26-5" id="h1-26-5" class="i">+		    &amp;(c-&gt;tlsflags)))
</a> 			c-&gt;tlsflags = G_TLS_CERTIFICATE_VALIDATE_ALL + 1;
 
 		setatom(c, AtomUri, geturi(c));
<a href="#h1-27" id="h1-27" class="h">@@ -1040,7 +1023,7 @@ void
</a> progresschanged(WebKitWebView *v, GParamSpec *ps, Client *c)
 {
 	c-&gt;progress = webkit_web_view_get_estimated_load_progress(c-&gt;view) *
<a href="#h1-27-3" id="h1-27-3" class="d">-	    100;
</a><a href="#h1-27-4" id="h1-27-4" class="i">+	              100;
</a> 	updatetitle(c);
 }
 
<a href="#h1-28" id="h1-28" class="h">@@ -1055,13 +1038,11 @@ void
</a> mousetargetchanged(WebKitWebView *v, WebKitHitTestResult *h, guint modifiers,
     Client *c)
 {
<a href="#h1-28-3" id="h1-28-3" class="d">-	WebKitHitTestResultContext hc;
</a><a href="#h1-28-4" id="h1-28-4" class="i">+	WebKitHitTestResultContext hc = webkit_hit_test_result_get_context(h);
</a> 
 	/* Keep the hit test to know where is the pointer on the next click */
 	c-&gt;mousepos = h;
 
<a href="#h1-28-9" id="h1-28-9" class="d">-	hc = webkit_hit_test_result_get_context(h);
</a><a href="#h1-28-10" id="h1-28-10" class="d">-
</a> 	if (hc &amp; OnLink)
 		c-&gt;targeturi = webkit_hit_test_result_get_link_uri(h);
 	else if (hc &amp; OnImg)
<a href="#h1-29" id="h1-29" class="h">@@ -1111,9 +1092,8 @@ decidepolicy(WebKitWebView *v, WebKitPolicyDecision *d,
</a> void
 decidenavigation(WebKitPolicyDecision *d, Client *c)
 {
<a href="#h1-29-3" id="h1-29-3" class="d">-	WebKitNavigationAction *a;
</a><a href="#h1-29-4" id="h1-29-4" class="d">-
</a><a href="#h1-29-5" id="h1-29-5" class="d">-	a = webkit_navigation_policy_decision_get_navigation_action(
</a><a href="#h1-29-6" id="h1-29-6" class="i">+	WebKitNavigationAction *a =
</a><a href="#h1-29-7" id="h1-29-7" class="i">+	    webkit_navigation_policy_decision_get_navigation_action(
</a> 	    WEBKIT_NAVIGATION_POLICY_DECISION(d));
 
 	switch (webkit_navigation_action_get_navigation_type(a)) {
<a href="#h1-30" id="h1-30" class="h">@@ -1121,7 +1101,7 @@ decidenavigation(WebKitPolicyDecision *d, Client *c)
</a> 	case WEBKIT_NAVIGATION_TYPE_FORM_SUBMITTED: /* fallthrough */
 	case WEBKIT_NAVIGATION_TYPE_BACK_FORWARD: /* fallthrough */
 	case WEBKIT_NAVIGATION_TYPE_RELOAD: /* fallthrough */
<a href="#h1-30-3" id="h1-30-3" class="d">-	case WEBKIT_NAVIGATION_TYPE_FORM_RESUBMITTED:
</a><a href="#h1-30-4" id="h1-30-4" class="i">+	case WEBKIT_NAVIGATION_TYPE_FORM_RESUBMITTED: /* fallthrough */
</a> 	case WEBKIT_NAVIGATION_TYPE_OTHER: /* fallthrough */
 	default:
 		/* Do not navigate to links with a &quot;_blank&quot; target (popup) */
<a href="#h1-31" id="h1-31" class="h">@@ -1141,12 +1121,12 @@ decidenavigation(WebKitPolicyDecision *d, Client *c)
</a> void
 decidenewwindow(WebKitPolicyDecision *d, Client *c)
 {
<a href="#h1-31-3" id="h1-31-3" class="d">-	WebKitNavigationAction *a;
</a> 	Arg arg;
<a href="#h1-31-5" id="h1-31-5" class="d">-
</a><a href="#h1-31-6" id="h1-31-6" class="d">-	a = webkit_navigation_policy_decision_get_navigation_action(
</a><a href="#h1-31-7" id="h1-31-7" class="i">+	WebKitNavigationAction *a =
</a><a href="#h1-31-8" id="h1-31-8" class="i">+	    webkit_navigation_policy_decision_get_navigation_action(
</a> 	    WEBKIT_NAVIGATION_POLICY_DECISION(d));
 
<a href="#h1-31-11" id="h1-31-11" class="i">+
</a> 	switch (webkit_navigation_action_get_navigation_type(a)) {
 	case WEBKIT_NAVIGATION_TYPE_LINK_CLICKED: /* fallthrough */
 	case WEBKIT_NAVIGATION_TYPE_FORM_SUBMITTED: /* fallthrough */
<a href="#h1-32" id="h1-32" class="h">@@ -1157,7 +1137,7 @@ decidenewwindow(WebKitPolicyDecision *d, Client *c)
</a> /* If the value of “mouse-button” is not 0, then the navigation was triggered by a mouse event.
  * test for link clicked but no button ? */
 		arg.v = webkit_uri_request_get_uri(
<a href="#h1-32-3" id="h1-32-3" class="d">-		    webkit_navigation_action_get_request(a));
</a><a href="#h1-32-4" id="h1-32-4" class="i">+		        webkit_navigation_action_get_request(a));
</a> 		newwindow(c, &amp;arg, 0);
 		break;
 	case WEBKIT_NAVIGATION_TYPE_OTHER: /* fallthrough */
<a href="#h1-33" id="h1-33" class="h">@@ -1171,13 +1151,11 @@ decidenewwindow(WebKitPolicyDecision *d, Client *c)
</a> void
 decideresource(WebKitPolicyDecision *d, Client *c)
 {
<a href="#h1-33-3" id="h1-33-3" class="d">-	const gchar *uri;
</a> 	int i, isascii = 1;
 	WebKitResponsePolicyDecision *r = WEBKIT_RESPONSE_POLICY_DECISION(d);
<a href="#h1-33-6" id="h1-33-6" class="d">-	WebKitURIResponse *res;
</a><a href="#h1-33-7" id="h1-33-7" class="d">-
</a><a href="#h1-33-8" id="h1-33-8" class="d">-	res = webkit_response_policy_decision_get_response(r);
</a><a href="#h1-33-9" id="h1-33-9" class="d">-	uri = webkit_uri_response_get_uri(res);
</a><a href="#h1-33-10" id="h1-33-10" class="i">+	WebKitURIResponse *res =
</a><a href="#h1-33-11" id="h1-33-11" class="i">+	    webkit_response_policy_decision_get_response(r);
</a><a href="#h1-33-12" id="h1-33-12" class="i">+	const gchar *uri = webkit_uri_response_get_uri(res);
</a> 
 	if (g_str_has_suffix(uri, &quot;/favicon.ico&quot;))
 		webkit_uri_request_set_uri(
<a href="#h1-34" id="h1-34" class="h">@@ -1215,7 +1193,7 @@ void
</a> downloadstarted(WebKitWebContext *wc, WebKitDownload *d, Client *c)
 {
 	g_signal_connect(G_OBJECT(d), &quot;notify::response&quot;,
<a href="#h1-34-3" id="h1-34-3" class="d">-	    G_CALLBACK(responsereceived), c);
</a><a href="#h1-34-4" id="h1-34-4" class="i">+	                 G_CALLBACK(responsereceived), c);
</a> }
 
 void
<a href="#h1-35" id="h1-35" class="h">@@ -1228,9 +1206,7 @@ responsereceived(WebKitDownload *d, GParamSpec *ps, Client *c)
</a> void
 download(Client *c, WebKitURIResponse *r)
 {
<a href="#h1-35-3" id="h1-35-3" class="d">-	Arg a;
</a><a href="#h1-35-4" id="h1-35-4" class="d">-
</a><a href="#h1-35-5" id="h1-35-5" class="d">-	a = (Arg)DOWNLOAD(webkit_uri_response_get_uri(r), geturi(c));
</a><a href="#h1-35-6" id="h1-35-6" class="i">+	Arg a = (Arg)DOWNLOAD(webkit_uri_response_get_uri(r), geturi(c));
</a> 	spawn(c, &amp;a);
 }
 
<a href="#h1-36" id="h1-36" class="h">@@ -1244,22 +1220,22 @@ void
</a> destroywin(GtkWidget* w, Client *c)
 {
 	destroyclient(c);
<a href="#h1-36-3" id="h1-36-3" class="d">-	if (clients == NULL)
</a><a href="#h1-36-4" id="h1-36-4" class="i">+	if (!clients)
</a> 		gtk_main_quit();
 }
 
 void
 pasteuri(GtkClipboard *clipboard, const char *text, gpointer d)
 {
<a href="#h1-36-11" id="h1-36-11" class="d">-	Arg arg = {.v = text };
</a><a href="#h1-36-12" id="h1-36-12" class="d">-	if (text != NULL)
</a><a href="#h1-36-13" id="h1-36-13" class="d">-		loaduri((Client *) d, &amp;arg);
</a><a href="#h1-36-14" id="h1-36-14" class="i">+	Arg a = {.v = text };
</a><a href="#h1-36-15" id="h1-36-15" class="i">+	if (!text)
</a><a href="#h1-36-16" id="h1-36-16" class="i">+		loaduri((Client *) d, &amp;a);
</a> }
 
 void
<a href="#h1-36-20" id="h1-36-20" class="d">-reload(Client *c, const Arg *arg)
</a><a href="#h1-36-21" id="h1-36-21" class="i">+reload(Client *c, const Arg *a)
</a> {
<a href="#h1-36-23" id="h1-36-23" class="d">-	gboolean nocache = *(gboolean *)arg;
</a><a href="#h1-36-24" id="h1-36-24" class="i">+	gboolean nocache = *(gboolean *)a;
</a> 	if (nocache)
 		webkit_web_view_reload_bypass_cache(c-&gt;view);
 	else
<a href="#h1-37" id="h1-37" class="h">@@ -1270,7 +1246,7 @@ void
</a> print(Client *c, const Arg *a)
 {
 	webkit_print_operation_run_dialog(webkit_print_operation_new(c-&gt;view),
<a href="#h1-37-3" id="h1-37-3" class="d">-	    GTK_WINDOW(c-&gt;win));
</a><a href="#h1-37-4" id="h1-37-4" class="i">+	                                  GTK_WINDOW(c-&gt;win));
</a> }
 
 void
<a href="#h1-38" id="h1-38" class="h">@@ -1304,14 +1280,14 @@ void
</a> scroll_v(Client *c, const Arg *a)
 {
 	evalscript(c, &quot;window.scrollBy(0, %d * (window.innerHeight / 100))&quot;,
<a href="#h1-38-3" id="h1-38-3" class="d">-	    a-&gt;i);
</a><a href="#h1-38-4" id="h1-38-4" class="i">+	           a-&gt;i);
</a> }
 
 void
 scroll_h(Client *c, const Arg *a)
 {
 	evalscript(c, &quot;window.scrollBy(%d * (window.innerWidth / 100), 0)&quot;,
<a href="#h1-38-11" id="h1-38-11" class="d">-	    a-&gt;i);
</a><a href="#h1-38-12" id="h1-38-12" class="i">+	           a-&gt;i);
</a> }
 
 void
<a href="#h1-39" id="h1-39" class="h">@@ -1324,7 +1300,7 @@ navigate(Client *c, const Arg *a)
</a> }
 
 void
<a href="#h1-39-3" id="h1-39-3" class="d">-stop(Client *c, const Arg *arg)
</a><a href="#h1-39-4" id="h1-39-4" class="i">+stop(Client *c, const Arg *a)
</a> {
 	webkit_web_view_stop_loading(c-&gt;view);
 }
<a href="#h1-40" id="h1-40" class="h">@@ -1332,9 +1308,7 @@ stop(Client *c, const Arg *arg)
</a> void
 toggle(Client *c, const Arg *a)
 {
<a href="#h1-40-3" id="h1-40-3" class="d">-	WebKitSettings *s;
</a><a href="#h1-40-4" id="h1-40-4" class="d">-
</a><a href="#h1-40-5" id="h1-40-5" class="d">-	s = webkit_web_view_get_settings(c-&gt;view);
</a><a href="#h1-40-6" id="h1-40-6" class="i">+	WebKitSettings *s = webkit_web_view_get_settings(c-&gt;view);
</a> 
 	switch ((unsigned int)a-&gt;i) {
 	case CaretBrowsing:
<a href="#h1-41" id="h1-41" class="h">@@ -1390,7 +1364,7 @@ togglefullscreen(Client *c, const Arg *a)
</a> }
 
 void
<a href="#h1-41-3" id="h1-41-3" class="d">-togglecookiepolicy(Client *c, const Arg *arg)
</a><a href="#h1-41-4" id="h1-41-4" class="i">+togglecookiepolicy(Client *c, const Arg *a)
</a> {
 	++cookiepolicy;
 	cookiepolicy %= strlen(cookiepolicies);
<a href="#h1-42" id="h1-42" class="h">@@ -1405,7 +1379,7 @@ togglecookiepolicy(Client *c, const Arg *arg)
</a> }
 
 void
<a href="#h1-42-3" id="h1-42-3" class="d">-togglestyle(Client *c, const Arg *arg)
</a><a href="#h1-42-4" id="h1-42-4" class="i">+togglestyle(Client *c, const Arg *a)
</a> {
 	enablestyle = !enablestyle;
 	setstyle(c, enablestyle ? getstyle(geturi(c)) : &quot;&quot;);
<a href="#h1-43" id="h1-43" class="h">@@ -1439,9 +1413,11 @@ find(Client *c, const Arg *a)
</a> 		f = webkit_find_controller_get_search_text(c-&gt;finder);
 
 		if (g_strcmp0(f, s) == 0) /* reset search */
<a href="#h1-43-3" id="h1-43-3" class="d">-			webkit_find_controller_search(c-&gt;finder, &quot;&quot;, findopts, G_MAXUINT);
</a><a href="#h1-43-4" id="h1-43-4" class="i">+			webkit_find_controller_search(c-&gt;finder, &quot;&quot;, findopts,
</a><a href="#h1-43-5" id="h1-43-5" class="i">+			                              G_MAXUINT);
</a> 
<a href="#h1-43-7" id="h1-43-7" class="d">-		webkit_find_controller_search(c-&gt;finder, s, findopts, G_MAXUINT);
</a><a href="#h1-43-8" id="h1-43-8" class="i">+		webkit_find_controller_search(c-&gt;finder, s, findopts,
</a><a href="#h1-43-9" id="h1-43-9" class="i">+		                              G_MAXUINT);
</a> 
 		if (strcmp(s, &quot;&quot;) == 0)
 			webkit_find_controller_search_finish(c-&gt;finder);
<a href="#h1-44" id="h1-44" class="h">@@ -1580,6 +1556,7 @@ main(int argc, char *argv[])
</a> 	setup();
 	c = newclient(NULL);
 	showview(NULL, c);
<a href="#h1-44-3" id="h1-44-3" class="i">+
</a> 	if (arg.v)
 		loaduri(clients, &amp;arg);
 	else
</pre>
</div>
</body>
</html>
