<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Adding search and urlbar. switching to getopt. - tabbed - tab interface for application supporting Xembed
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="tabbed Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>tabbed</h1><span class="desc">tab interface for application supporting Xembed
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/37deb47b84ba1382fe8b217f6c08935e6c59a7cb.html">37deb47b84ba1382fe8b217f6c08935e6c59a7cb</a>
<b>parent</b> <a href="../commit/0e956be80f0717d4b298ceb275172e0ae722730c.html">0e956be80f0717d4b298ceb275172e0ae722730c</a>
<b>Author:</b> Enno Boland (Gottox) &lt;<a href="mailto:gottox@s01.de">gottox@s01.de</a>&gt;
<b>Date:</b>   Sat,  6 Jun 2009 16:30:11 +0200

Adding search and urlbar. switching to getopt.
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">surf.c</a></td><td> | </td><td class="num">155</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">-----------------------------</span></td></tr>
</table></pre><pre>1 file changed, 99 insertions(+), 56 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/surf.c.html">surf.c</a> b/<a href="../file/surf.c.html">surf.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -10,28 +10,17 @@
</a> #include &lt;gdk/gdkkeysyms.h&gt;
 #include &lt;string.h&gt;
 #include &lt;unistd.h&gt;
<a href="#h0-0-3" id="h0-0-3" class="i">+#include &lt;getopt.h&gt;
</a> #include &lt;stdlib.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;webkit/webkit.h&gt;
 
 #define LENGTH(x) (sizeof x / sizeof x[0])
<a href="#h0-0-9" id="h0-0-9" class="d">-/* Plan9-style Argument parsing */
</a><a href="#h0-0-10" id="h0-0-10" class="d">-/* Vars: _c -&gt; count; _b -&gt; break; _a -&gt; argument */
</a><a href="#h0-0-11" id="h0-0-11" class="d">-#define ARG int _c, _b; char *_a; \
</a><a href="#h0-0-12" id="h0-0-12" class="d">-	for(_c = 1; _c &lt; argc &amp;&amp; argv[_c][0] == &#39;-&#39; &amp;&amp; argv[_c][1] &amp;&amp; \
</a><a href="#h0-0-13" id="h0-0-13" class="d">-			(strcmp(argv[_c], &quot;--&quot;) != 0); _c++) \
</a><a href="#h0-0-14" id="h0-0-14" class="d">-		for(_a = &amp;argv[_c][1], _b = 0; !_b &amp;&amp; *_a; _a++ ) \
</a><a href="#h0-0-15" id="h0-0-15" class="d">-			switch(*_a)
</a><a href="#h0-0-16" id="h0-0-16" class="d">-#define ARGVAL()	(!_b &amp;&amp; _a[1] &amp;&amp; (_b = 1) ? &amp;_a[1] : _c + 1 == argc ? \
</a><a href="#h0-0-17" id="h0-0-17" class="d">-		0 : argv[++_c])
</a><a href="#h0-0-18" id="h0-0-18" class="d">-#define ARGCHR()	(*_a)
</a><a href="#h0-0-19" id="h0-0-19" class="d">-#define ARGC()		_c
</a> 
 Display *dpy;
 Atom urlprop;
 typedef struct Client {
<a href="#h0-0-24" id="h0-0-24" class="d">-	GtkWidget *win;
</a><a href="#h0-0-25" id="h0-0-25" class="d">-	GtkWidget *browser;
</a><a href="#h0-0-26" id="h0-0-26" class="i">+	GtkWidget *win, *scroll, *vbox, *urlbar, *urllist, *searchbar;
</a> 	WebKitWebView *view;
 	gchar *title;
 	gint progress;
<a href="#h0-1" id="h0-1" class="h">@@ -41,6 +30,8 @@ Client *clients = NULL;
</a> gboolean embed = FALSE;
 gboolean showxid = FALSE;
 gboolean ignore_once = FALSE;
<a href="#h0-1-3" id="h0-1-3" class="i">+extern char *optarg;
</a><a href="#h0-1-4" id="h0-1-4" class="i">+extern int optind;
</a> 
 static Client *newclient();
 static void die(char *str);
<a href="#h0-2" id="h0-2" class="h">@@ -116,7 +107,8 @@ loadfile(const Client *c, const gchar *f) {
</a> 	
 }
 
<a href="#h0-2-3" id="h0-2-3" class="d">-static void loaduri(const Client *c, const gchar *uri) {
</a><a href="#h0-2-4" id="h0-2-4" class="i">+void
</a><a href="#h0-2-5" id="h0-2-5" class="i">+loaduri(const Client *c, const gchar *uri) {
</a> 	GString* u = g_string_new(uri);
 	if(g_strrstr(u-&gt;str, &quot;:&quot;) == NULL)
 		g_string_prepend(u, &quot;http://&quot;);
<a href="#h0-3" id="h0-3" class="h">@@ -134,11 +126,13 @@ gboolean
</a> newwindow(WebKitWebView *view, WebKitWebFrame *f,
 		WebKitNetworkRequest *r, WebKitWebNavigationAction *n,
 		WebKitWebPolicyDecision *p, gpointer d) {
<a href="#h0-3-3" id="h0-3-3" class="i">+	/* TODO */
</a> 	puts(&quot;new&quot;);
 	Client *c = newclient();
 	webkit_web_view_load_request(c-&gt;view, r);
 	return TRUE;
 }
<a href="#h0-3-9" id="h0-3-9" class="i">+
</a> void
 linkhover(WebKitWebView* page, const gchar* t, const gchar* l, gpointer d) {
 	Client *c = (Client *)d;
<a href="#h0-4" id="h0-4" class="h">@@ -200,7 +194,13 @@ destroywin(GtkWidget* w, gpointer d) {
</a> void
 destroyclient(Client *c) {
 	Client *p;
<a href="#h0-4-3" id="h0-4-3" class="i">+
</a> 	gtk_widget_destroy(c-&gt;win);
<a href="#h0-4-5" id="h0-4-5" class="i">+	gtk_widget_destroy(c-&gt;scroll);
</a><a href="#h0-4-6" id="h0-4-6" class="i">+	gtk_widget_destroy(c-&gt;vbox);
</a><a href="#h0-4-7" id="h0-4-7" class="i">+	gtk_widget_destroy(c-&gt;urlbar);
</a><a href="#h0-4-8" id="h0-4-8" class="i">+	gtk_widget_destroy(c-&gt;urllist);
</a><a href="#h0-4-9" id="h0-4-9" class="i">+	gtk_widget_destroy(c-&gt;searchbar);
</a> 	if(clients == c &amp;&amp; c-&gt;next == NULL)
 		gtk_main_quit();
 	for(p = clients; p &amp;&amp; p-&gt;next != c; p = p-&gt;next);
<a href="#h0-5" id="h0-5" class="h">@@ -225,11 +225,15 @@ keypress(GtkWidget* w, GdkEventKey *ev, gpointer d) {
</a> 			else
 				 webkit_web_view_reload(c-&gt;view);
 			return TRUE;
<a href="#h0-5-3" id="h0-5-3" class="i">+		case GDK_b:
</a><a href="#h0-5-4" id="h0-5-4" class="i">+			return TRUE;
</a> 		case GDK_g:
<a href="#h0-5-6" id="h0-5-6" class="d">-			/* TODO */
</a><a href="#h0-5-7" id="h0-5-7" class="i">+			gtk_widget_hide(c-&gt;searchbar);
</a><a href="#h0-5-8" id="h0-5-8" class="i">+			gtk_widget_show(c-&gt;urlbar);
</a> 			return TRUE;
 		case GDK_slash:
<a href="#h0-5-11" id="h0-5-11" class="d">-			/* TODO */
</a><a href="#h0-5-12" id="h0-5-12" class="i">+			gtk_widget_hide(c-&gt;urlbar);
</a><a href="#h0-5-13" id="h0-5-13" class="i">+			gtk_widget_show(c-&gt;searchbar);
</a> 			return TRUE;
 		case GDK_Left:
 			webkit_web_view_go_back(c-&gt;view);
<a href="#h0-6" id="h0-6" class="h">@@ -239,6 +243,11 @@ keypress(GtkWidget* w, GdkEventKey *ev, gpointer d) {
</a> 			return TRUE;
 		}
 	}
<a href="#h0-6-3" id="h0-6-3" class="i">+	else if(ev-&gt;type == GDK_KEY_PRESS &amp;&amp; ev-&gt;keyval == GDK_Escape) {
</a><a href="#h0-6-4" id="h0-6-4" class="i">+		gtk_widget_hide(c-&gt;urlbar);
</a><a href="#h0-6-5" id="h0-6-5" class="i">+		gtk_widget_hide(c-&gt;searchbar);
</a><a href="#h0-6-6" id="h0-6-6" class="i">+		return TRUE;
</a><a href="#h0-6-7" id="h0-6-7" class="i">+	}
</a> 	return FALSE;
 }
 
<a href="#h0-7" id="h0-7" class="h">@@ -257,6 +266,7 @@ newclient(void) {
</a> 	Client *c;
 	if(!(c = calloc(1, sizeof(Client))))
 		die(&quot;Cannot malloc!\n&quot;);
<a href="#h0-7-3" id="h0-7-3" class="i">+	/* Window */
</a> 	if(embed) {
 		c-&gt;win = gtk_plug_new(0);
 	}
<a href="#h0-8" id="h0-8" class="h">@@ -265,14 +275,19 @@ newclient(void) {
</a> 		gtk_window_set_wmclass(GTK_WINDOW(c-&gt;win), &quot;surf&quot;, &quot;surf&quot;);
 	}
 	gtk_window_set_default_size(GTK_WINDOW(c-&gt;win), 800, 600);
<a href="#h0-8-3" id="h0-8-3" class="d">-	c-&gt;browser = gtk_scrolled_window_new(NULL, NULL);
</a><a href="#h0-8-4" id="h0-8-4" class="d">-	g_signal_connect (G_OBJECT(c-&gt;win), &quot;destroy&quot;, G_CALLBACK(destroywin), c);
</a><a href="#h0-8-5" id="h0-8-5" class="d">-	g_signal_connect (G_OBJECT(c-&gt;win), &quot;key-press-event&quot;, G_CALLBACK(keypress), c);
</a><a href="#h0-8-6" id="h0-8-6" class="i">+	g_signal_connect(G_OBJECT(c-&gt;win), &quot;destroy&quot;, G_CALLBACK(destroywin), c);
</a><a href="#h0-8-7" id="h0-8-7" class="i">+	g_signal_connect(G_OBJECT(c-&gt;win), &quot;key-press-event&quot;, G_CALLBACK(keypress), c);
</a> 
<a href="#h0-8-9" id="h0-8-9" class="d">-	gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(c-&gt;browser),
</a><a href="#h0-8-10" id="h0-8-10" class="i">+	/* VBox */
</a><a href="#h0-8-11" id="h0-8-11" class="i">+	c-&gt;vbox = gtk_vbox_new(FALSE, 0);
</a><a href="#h0-8-12" id="h0-8-12" class="i">+
</a><a href="#h0-8-13" id="h0-8-13" class="i">+	/* scrolled window */
</a><a href="#h0-8-14" id="h0-8-14" class="i">+	c-&gt;scroll = gtk_scrolled_window_new(NULL, NULL);
</a><a href="#h0-8-15" id="h0-8-15" class="i">+	gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(c-&gt;scroll),
</a> 			GTK_POLICY_NEVER, GTK_POLICY_NEVER);
<a href="#h0-8-17" id="h0-8-17" class="i">+
</a><a href="#h0-8-18" id="h0-8-18" class="i">+	/* webview */
</a> 	c-&gt;view = WEBKIT_WEB_VIEW(webkit_web_view_new());
<a href="#h0-8-20" id="h0-8-20" class="d">-	gtk_container_add(GTK_CONTAINER(c-&gt;browser), GTK_WIDGET(c-&gt;view));
</a> 
 	g_signal_connect(G_OBJECT(c-&gt;view), &quot;title-changed&quot;, G_CALLBACK(titlechange), c);
 	g_signal_connect(G_OBJECT(c-&gt;view), &quot;load-progress-changed&quot;, G_CALLBACK(progresschange), c);
<a href="#h0-9" id="h0-9" class="h">@@ -281,55 +296,83 @@ newclient(void) {
</a> 	g_signal_connect(G_OBJECT(c-&gt;view), &quot;new-window-policy-decision-requested&quot;, G_CALLBACK(newwindow), c);
 	g_signal_connect(G_OBJECT(c-&gt;view), &quot;download-requested&quot;, G_CALLBACK(download), c);
 
<a href="#h0-9-3" id="h0-9-3" class="d">-	gtk_container_add(GTK_CONTAINER(c-&gt;win), c-&gt;browser);
</a><a href="#h0-9-4" id="h0-9-4" class="i">+	/* urlbar */
</a><a href="#h0-9-5" id="h0-9-5" class="i">+	c-&gt;urlbar = gtk_entry_new();
</a><a href="#h0-9-6" id="h0-9-6" class="i">+	gtk_entry_set_has_frame(GTK_ENTRY(c-&gt;urlbar), FALSE);
</a><a href="#h0-9-7" id="h0-9-7" class="i">+
</a><a href="#h0-9-8" id="h0-9-8" class="i">+	/* searchbar */
</a><a href="#h0-9-9" id="h0-9-9" class="i">+	c-&gt;searchbar = gtk_entry_new();
</a><a href="#h0-9-10" id="h0-9-10" class="i">+	gtk_entry_set_has_frame(GTK_ENTRY(c-&gt;searchbar), FALSE);
</a><a href="#h0-9-11" id="h0-9-11" class="i">+
</a><a href="#h0-9-12" id="h0-9-12" class="i">+	/* Arranging */
</a><a href="#h0-9-13" id="h0-9-13" class="i">+	gtk_container_add(GTK_CONTAINER(c-&gt;scroll), GTK_WIDGET(c-&gt;view));
</a><a href="#h0-9-14" id="h0-9-14" class="i">+	gtk_container_add(GTK_CONTAINER(c-&gt;vbox), c-&gt;scroll);
</a><a href="#h0-9-15" id="h0-9-15" class="i">+	gtk_container_add(GTK_CONTAINER(c-&gt;win), c-&gt;vbox);
</a><a href="#h0-9-16" id="h0-9-16" class="i">+	gtk_container_add(GTK_CONTAINER(c-&gt;vbox), c-&gt;searchbar);
</a><a href="#h0-9-17" id="h0-9-17" class="i">+	gtk_container_add(GTK_CONTAINER(c-&gt;vbox), c-&gt;urlbar);
</a><a href="#h0-9-18" id="h0-9-18" class="i">+
</a><a href="#h0-9-19" id="h0-9-19" class="i">+	/* Setup */
</a><a href="#h0-9-20" id="h0-9-20" class="i">+	gtk_box_set_child_packing(GTK_BOX(c-&gt;vbox), c-&gt;urlbar, FALSE, FALSE, 0, GTK_PACK_START);
</a><a href="#h0-9-21" id="h0-9-21" class="i">+	gtk_box_set_child_packing(GTK_BOX(c-&gt;vbox), c-&gt;searchbar, FALSE, FALSE, 0, GTK_PACK_START);
</a><a href="#h0-9-22" id="h0-9-22" class="i">+	gtk_box_set_child_packing(GTK_BOX(c-&gt;vbox), c-&gt;scroll, TRUE, TRUE, 0, GTK_PACK_START);
</a> 	gtk_widget_grab_focus(GTK_WIDGET(c-&gt;view));
<a href="#h0-9-24" id="h0-9-24" class="d">-	gtk_widget_show_all(c-&gt;win);
</a><a href="#h0-9-25" id="h0-9-25" class="d">-	if(showxid)
</a><a href="#h0-9-26" id="h0-9-26" class="d">-		printf(&quot;%u\n&quot;, (unsigned int)GDK_WINDOW_XID(GTK_WIDGET(c-&gt;win)-&gt;window));
</a><a href="#h0-9-27" id="h0-9-27" class="d">-	c-&gt;next = clients;
</a><a href="#h0-9-28" id="h0-9-28" class="d">-	clients = c;
</a><a href="#h0-9-29" id="h0-9-29" class="i">+	gtk_widget_hide_all(c-&gt;searchbar);
</a><a href="#h0-9-30" id="h0-9-30" class="i">+	gtk_widget_hide_all(c-&gt;urlbar);
</a><a href="#h0-9-31" id="h0-9-31" class="i">+	gtk_widget_show(c-&gt;vbox);
</a><a href="#h0-9-32" id="h0-9-32" class="i">+	gtk_widget_show(c-&gt;scroll);
</a><a href="#h0-9-33" id="h0-9-33" class="i">+	gtk_widget_show(GTK_WIDGET(c-&gt;view));
</a><a href="#h0-9-34" id="h0-9-34" class="i">+	gtk_widget_show(c-&gt;win);
</a> 	gdk_window_set_events(GTK_WIDGET(c-&gt;win)-&gt;window, GDK_ALL_EVENTS_MASK);
 	gdk_window_add_filter(GTK_WIDGET(c-&gt;win)-&gt;window, processx, c);
<a href="#h0-9-37" id="h0-9-37" class="i">+	c-&gt;next = clients;
</a><a href="#h0-9-38" id="h0-9-38" class="i">+	clients = c;
</a><a href="#h0-9-39" id="h0-9-39" class="i">+	if(showxid)
</a><a href="#h0-9-40" id="h0-9-40" class="i">+		printf(&quot;%u\n&quot;, (unsigned int)GDK_WINDOW_XID(GTK_WIDGET(c-&gt;win)-&gt;window));
</a> 	return c;
 }
 
 int main(int argc, char *argv[]) {
 	gchar *uri = NULL, *file = NULL;
 	Client *c;
<a href="#h0-9-47" id="h0-9-47" class="i">+	int o;
</a> 
 	gtk_init(NULL, NULL);
 	if (!g_thread_supported())
 		g_thread_init(NULL);
 	setup();
<a href="#h0-9-53" id="h0-9-53" class="d">-	ARG {
</a><a href="#h0-9-54" id="h0-9-54" class="d">-	case &#39;x&#39;:
</a><a href="#h0-9-55" id="h0-9-55" class="d">-		showxid = TRUE;
</a><a href="#h0-9-56" id="h0-9-56" class="d">-		break;
</a><a href="#h0-9-57" id="h0-9-57" class="d">-	case &#39;e&#39;:
</a><a href="#h0-9-58" id="h0-9-58" class="d">-		showxid = TRUE;
</a><a href="#h0-9-59" id="h0-9-59" class="d">-		embed = TRUE;
</a><a href="#h0-9-60" id="h0-9-60" class="d">-		break;
</a><a href="#h0-9-61" id="h0-9-61" class="d">-	case &#39;u&#39;:
</a><a href="#h0-9-62" id="h0-9-62" class="d">-		if(!(uri = ARGVAL()))
</a><a href="#h0-9-63" id="h0-9-63" class="d">-			goto argerr;
</a><a href="#h0-9-64" id="h0-9-64" class="d">-		c = newclient();
</a><a href="#h0-9-65" id="h0-9-65" class="d">-		loaduri(c, uri);
</a><a href="#h0-9-66" id="h0-9-66" class="d">-		updatetitle(c);
</a><a href="#h0-9-67" id="h0-9-67" class="d">-		break;
</a><a href="#h0-9-68" id="h0-9-68" class="d">-	case &#39;f&#39;:
</a><a href="#h0-9-69" id="h0-9-69" class="d">-		if(!(file = ARGVAL()))
</a><a href="#h0-9-70" id="h0-9-70" class="d">-			goto argerr;
</a><a href="#h0-9-71" id="h0-9-71" class="d">-		c = newclient();
</a><a href="#h0-9-72" id="h0-9-72" class="d">-		loadfile(c, file);
</a><a href="#h0-9-73" id="h0-9-73" class="d">-		updatetitle(c);
</a><a href="#h0-9-74" id="h0-9-74" class="d">-		break;
</a><a href="#h0-9-75" id="h0-9-75" class="d">-	argerr:
</a><a href="#h0-9-76" id="h0-9-76" class="d">-	default:
</a><a href="#h0-9-77" id="h0-9-77" class="d">-		puts(&quot;surf - simple browser&quot;);
</a><a href="#h0-9-78" id="h0-9-78" class="d">-		printf(&quot;usage: %s [-e] [-x] [-u uri] [-f file]\n&quot;, argv[0]);
</a><a href="#h0-9-79" id="h0-9-79" class="d">-		return EXIT_FAILURE;
</a><a href="#h0-9-80" id="h0-9-80" class="d">-	}
</a><a href="#h0-9-81" id="h0-9-81" class="d">-	if(argc != ARGC())
</a><a href="#h0-9-82" id="h0-9-82" class="i">+	while((o = getopt(argc, argv, &quot;vhxeu:f:&quot;)) != -1)
</a><a href="#h0-9-83" id="h0-9-83" class="i">+		switch(o) {
</a><a href="#h0-9-84" id="h0-9-84" class="i">+		case &#39;x&#39;:
</a><a href="#h0-9-85" id="h0-9-85" class="i">+			showxid = TRUE;
</a><a href="#h0-9-86" id="h0-9-86" class="i">+			break;
</a><a href="#h0-9-87" id="h0-9-87" class="i">+		case &#39;e&#39;:
</a><a href="#h0-9-88" id="h0-9-88" class="i">+			showxid = TRUE;
</a><a href="#h0-9-89" id="h0-9-89" class="i">+			embed = TRUE;
</a><a href="#h0-9-90" id="h0-9-90" class="i">+			break;
</a><a href="#h0-9-91" id="h0-9-91" class="i">+		case &#39;u&#39;:
</a><a href="#h0-9-92" id="h0-9-92" class="i">+			if(!(uri = optarg))
</a><a href="#h0-9-93" id="h0-9-93" class="i">+				goto argerr;
</a><a href="#h0-9-94" id="h0-9-94" class="i">+			c = newclient();
</a><a href="#h0-9-95" id="h0-9-95" class="i">+			loaduri(c, uri);
</a><a href="#h0-9-96" id="h0-9-96" class="i">+			updatetitle(c);
</a><a href="#h0-9-97" id="h0-9-97" class="i">+			break;
</a><a href="#h0-9-98" id="h0-9-98" class="i">+		case &#39;f&#39;:
</a><a href="#h0-9-99" id="h0-9-99" class="i">+			if(!(file = optarg))
</a><a href="#h0-9-100" id="h0-9-100" class="i">+				goto argerr;
</a><a href="#h0-9-101" id="h0-9-101" class="i">+			c = newclient();
</a><a href="#h0-9-102" id="h0-9-102" class="i">+			loadfile(c, file);
</a><a href="#h0-9-103" id="h0-9-103" class="i">+			updatetitle(c);
</a><a href="#h0-9-104" id="h0-9-104" class="i">+			break;
</a><a href="#h0-9-105" id="h0-9-105" class="i">+		case &#39;v&#39;:
</a><a href="#h0-9-106" id="h0-9-106" class="i">+			die(&quot;surf-&quot;VERSION&quot;, © 2009 surf engineers, see LICENSE for details\n&quot;);
</a><a href="#h0-9-107" id="h0-9-107" class="i">+			break;
</a><a href="#h0-9-108" id="h0-9-108" class="i">+		argerr:
</a><a href="#h0-9-109" id="h0-9-109" class="i">+		default:
</a><a href="#h0-9-110" id="h0-9-110" class="i">+			puts(&quot;surf - simple browser&quot;);
</a><a href="#h0-9-111" id="h0-9-111" class="i">+			die(&quot;usage: surf [-e] [-x] [-u uri] [-f file]\n&quot;);
</a><a href="#h0-9-112" id="h0-9-112" class="i">+			return EXIT_FAILURE;
</a><a href="#h0-9-113" id="h0-9-113" class="i">+		}
</a><a href="#h0-9-114" id="h0-9-114" class="i">+	if(optind != argc)
</a> 		goto argerr;
 	if(!clients)
 		newclient();
</pre>
</div>
</body>
</html>
