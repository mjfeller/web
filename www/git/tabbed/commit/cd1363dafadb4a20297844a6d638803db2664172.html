<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>reformating source, adding const flags to XEvent-Handlers. - tabbed - tab interface for application supporting Xembed
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="tabbed Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>tabbed</h1><span class="desc">tab interface for application supporting Xembed
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/cd1363dafadb4a20297844a6d638803db2664172.html">cd1363dafadb4a20297844a6d638803db2664172</a>
<b>parent</b> <a href="../commit/bcf8f355800d77f80705a19c23f00290668b8041.html">bcf8f355800d77f80705a19c23f00290668b8041</a>
<b>Author:</b> Enno Boland (tox) &lt;<a href="mailto:tox@s01.de">tox@s01.de</a>&gt;
<b>Date:</b>   Tue, 13 Oct 2009 19:52:34 +0200

reformating source, adding const flags to XEvent-Handlers.
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">tabbed.c</a></td><td> | </td><td class="num">77</td><td><span class="i">++++++++++++++++++++++++++++++++++++++</span><span class="d">---------------------------------------</span></td></tr>
</table></pre><pre>1 file changed, 38 insertions(+), 39 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/tabbed.c.html">tabbed.c</a> b/<a href="../file/tabbed.c.html">tabbed.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -88,33 +88,33 @@ typedef struct Client {
</a> } Client;
 
 /* function declarations */
<a href="#h0-0-3" id="h0-0-3" class="d">-static void buttonpress(XEvent *e);
</a><a href="#h0-0-4" id="h0-0-4" class="i">+static void buttonpress(const XEvent *e);
</a> static void cleanup(void);
<a href="#h0-0-6" id="h0-0-6" class="d">-static void clientmessage(XEvent *e);
</a><a href="#h0-0-7" id="h0-0-7" class="d">-static void configurenotify(XEvent *e);
</a><a href="#h0-0-8" id="h0-0-8" class="d">-static void configurerequest(XEvent *e);
</a><a href="#h0-0-9" id="h0-0-9" class="d">-static void createnotify(XEvent *e);
</a><a href="#h0-0-10" id="h0-0-10" class="d">-static void destroynotify(XEvent *e);
</a><a href="#h0-0-11" id="h0-0-11" class="i">+static void clientmessage(const XEvent *e);
</a><a href="#h0-0-12" id="h0-0-12" class="i">+static void configurenotify(const XEvent *e);
</a><a href="#h0-0-13" id="h0-0-13" class="i">+static void configurerequest(const XEvent *e);
</a><a href="#h0-0-14" id="h0-0-14" class="i">+static void createnotify(const XEvent *e);
</a><a href="#h0-0-15" id="h0-0-15" class="i">+static void destroynotify(const XEvent *e);
</a> static void die(const char *errstr, ...);
 static void drawbar();
 static void drawtext(const char *text, unsigned long col[ColLast]);
 static void *emallocz(size_t size);
<a href="#h0-0-20" id="h0-0-20" class="d">-static void enternotify(XEvent *e);
</a><a href="#h0-0-21" id="h0-0-21" class="d">-static void expose(XEvent *e);
</a><a href="#h0-0-22" id="h0-0-22" class="i">+static void enternotify(const XEvent *e);
</a><a href="#h0-0-23" id="h0-0-23" class="i">+static void expose(const XEvent *e);
</a> static void focus(Client *c);
<a href="#h0-0-25" id="h0-0-25" class="d">-static void focusin(XEvent *e);
</a><a href="#h0-0-26" id="h0-0-26" class="i">+static void focusin(const XEvent *e);
</a> static Client *getclient(Window w);
 static unsigned long getcolor(const char *colstr);
 static Client *getfirsttab();
 static Bool gettextprop(Window w, Atom atom, char *text, unsigned int size);
 static void initfont(const char *fontstr);
 static Bool isprotodel(Client *c);
<a href="#h0-0-33" id="h0-0-33" class="d">-static void keypress(XEvent *e);
</a><a href="#h0-0-34" id="h0-0-34" class="i">+static void keypress(const XEvent *e);
</a> static void killclient(const Arg *arg);
 static void manage(Window win);
 static void move(const Arg *arg);
<a href="#h0-0-38" id="h0-0-38" class="d">-static void propertynotify(XEvent *e);
</a><a href="#h0-0-39" id="h0-0-39" class="d">-static void reparentnotify(XEvent *e);
</a><a href="#h0-0-40" id="h0-0-40" class="i">+static void propertynotify(const XEvent *e);
</a><a href="#h0-0-41" id="h0-0-41" class="i">+static void reparentnotify(const XEvent *e);
</a> static void resize(Client *c, int w, int h);
 static void rotate(const Arg *arg);
 static void run(void);
<a href="#h0-1" id="h0-1" class="h">@@ -123,14 +123,14 @@ static void sigchld(int signal);
</a> static void spawn(const Arg *arg);
 static int textnw(const char *text, unsigned int len);
 static void unmanage(Client *c);
<a href="#h0-1-3" id="h0-1-3" class="d">-static void unmapnotify(XEvent *e);
</a><a href="#h0-1-4" id="h0-1-4" class="i">+static void unmapnotify(const XEvent *e);
</a> static void updatenumlockmask(void);
 static void updatetitle(Client *c);
 static int xerror(Display *dpy, XErrorEvent *ee);
 
 /* variables */
 static int screen;
<a href="#h0-1-11" id="h0-1-11" class="d">-static void (*handler[LASTEvent]) (XEvent *) = {
</a><a href="#h0-1-12" id="h0-1-12" class="i">+static void (*handler[LASTEvent]) (const XEvent *) = {
</a> 	[ButtonPress] = buttonpress,
 	[ClientMessage] = clientmessage,
 	[ConfigureNotify] = configurenotify,
<a href="#h0-2" id="h0-2" class="h">@@ -159,10 +159,10 @@ static char winid[64];
</a> #include &quot;config.h&quot;
 
 void
<a href="#h0-2-3" id="h0-2-3" class="d">-buttonpress(XEvent *e) {
</a><a href="#h0-2-4" id="h0-2-4" class="i">+buttonpress(const XEvent *e) {
</a><a href="#h0-2-5" id="h0-2-5" class="i">+	const XButtonPressedEvent *ev = &amp;e-&gt;xbutton;
</a> 	int i;
 	Client *c;
<a href="#h0-2-8" id="h0-2-8" class="d">-	XButtonPressedEvent *ev = &amp;e-&gt;xbutton;
</a> 
 	c = getfirsttab();
 	if(c != clients &amp;&amp; ev-&gt;x &lt; TEXTW(before))
<a href="#h0-3" id="h0-3" class="h">@@ -188,8 +188,8 @@ cleanup(void) {
</a> }
 
 void
<a href="#h0-3-3" id="h0-3-3" class="d">-clientmessage(XEvent *e) {
</a><a href="#h0-3-4" id="h0-3-4" class="d">-	XClientMessageEvent *ev = &amp;e-&gt;xclient;
</a><a href="#h0-3-5" id="h0-3-5" class="i">+clientmessage(const XEvent *e) {
</a><a href="#h0-3-6" id="h0-3-6" class="i">+	const XClientMessageEvent *ev = &amp;e-&gt;xclient;
</a> 
 	if(ev-&gt;message_type == xembedatom) {
 		printf(&quot;%ld %ld %ld %ld %ld\n&quot;, ev-&gt;data.l[0], ev-&gt;data.l[1], ev-&gt;data.l[2], ev-&gt;data.l[3], ev-&gt;data.l[4]);
<a href="#h0-4" id="h0-4" class="h">@@ -197,8 +197,8 @@ clientmessage(XEvent *e) {
</a> }
 
 void
<a href="#h0-4-3" id="h0-4-3" class="d">-configurenotify(XEvent *e) {
</a><a href="#h0-4-4" id="h0-4-4" class="d">-	XConfigureEvent *ev = &amp;e-&gt;xconfigure;
</a><a href="#h0-4-5" id="h0-4-5" class="i">+configurenotify(const XEvent *e) {
</a><a href="#h0-4-6" id="h0-4-6" class="i">+	const XConfigureEvent *ev = &amp;e-&gt;xconfigure;
</a> 	Client *c;
 
 	if(ev-&gt;window == win &amp;&amp; (ev-&gt;width != ww || ev-&gt;height != wh)) {
<a href="#h0-5" id="h0-5" class="h">@@ -213,8 +213,8 @@ configurenotify(XEvent *e) {
</a> }
 
 void
<a href="#h0-5-3" id="h0-5-3" class="d">-configurerequest(XEvent *e) {
</a><a href="#h0-5-4" id="h0-5-4" class="d">-	XConfigureRequestEvent *ev = &amp;e-&gt;xconfigurerequest;
</a><a href="#h0-5-5" id="h0-5-5" class="i">+configurerequest(const XEvent *e) {
</a><a href="#h0-5-6" id="h0-5-6" class="i">+	const XConfigureRequestEvent *ev = &amp;e-&gt;xconfigurerequest;
</a> 	XWindowChanges wc;
 	Client *c;
 
<a href="#h0-6" id="h0-6" class="h">@@ -231,17 +231,17 @@ configurerequest(XEvent *e) {
</a> }
 
 void
<a href="#h0-6-3" id="h0-6-3" class="d">-createnotify(XEvent *e) {
</a><a href="#h0-6-4" id="h0-6-4" class="d">-	XCreateWindowEvent *ev = &amp;e-&gt;xcreatewindow;
</a><a href="#h0-6-5" id="h0-6-5" class="i">+createnotify(const XEvent *e) {
</a><a href="#h0-6-6" id="h0-6-6" class="i">+	const XCreateWindowEvent *ev = &amp;e-&gt;xcreatewindow;
</a> 
 	if(ev-&gt;window != win &amp;&amp; !getclient(ev-&gt;window))
 		manage(ev-&gt;window);
 }
 
 void
<a href="#h0-6-13" id="h0-6-13" class="d">-destroynotify(XEvent *e) {
</a><a href="#h0-6-14" id="h0-6-14" class="i">+destroynotify(const XEvent *e) {
</a><a href="#h0-6-15" id="h0-6-15" class="i">+	const XDestroyWindowEvent *ev = &amp;e-&gt;xdestroywindow;
</a> 	Client *c;
<a href="#h0-6-17" id="h0-6-17" class="d">-	XDestroyWindowEvent *ev = &amp;e-&gt;xdestroywindow;
</a> 
 	if((c = getclient(ev-&gt;window)))
 		unmanage(c);
<a href="#h0-7" id="h0-7" class="h">@@ -312,8 +312,8 @@ drawbar() {
</a> 
 void
 drawtext(const char *text, unsigned long col[ColLast]) {
<a href="#h0-7-3" id="h0-7-3" class="d">-	char buf[256];
</a> 	int i, x, y, h, len, olen;
<a href="#h0-7-5" id="h0-7-5" class="i">+	char buf[256];
</a> 	XRectangle r = { dc.x, dc.y, dc.w, dc.h };
 
 	XSetForeground(dpy, dc.gc, col[ColBG]);
<a href="#h0-8" id="h0-8" class="h">@@ -348,13 +348,13 @@ emallocz(size_t size) {
</a> }
 
 void
<a href="#h0-8-3" id="h0-8-3" class="d">-enternotify(XEvent *e) {
</a><a href="#h0-8-4" id="h0-8-4" class="i">+enternotify(const XEvent *e) {
</a> 	focus(sel);
 }
 
 void
<a href="#h0-8-9" id="h0-8-9" class="d">-expose(XEvent *e) {
</a><a href="#h0-8-10" id="h0-8-10" class="d">-	XExposeEvent *ev = &amp;e-&gt;xexpose;
</a><a href="#h0-8-11" id="h0-8-11" class="i">+expose(const XEvent *e) {
</a><a href="#h0-8-12" id="h0-8-12" class="i">+	const XExposeEvent *ev = &amp;e-&gt;xexpose;
</a> 
 	if(ev-&gt;count == 0 &amp;&amp; win == ev-&gt;window)
 		drawbar();
<a href="#h0-9" id="h0-9" class="h">@@ -388,7 +388,7 @@ focus(Client *c) {
</a> }
 
 void
<a href="#h0-9-3" id="h0-9-3" class="d">-focusin(XEvent *e) {
</a><a href="#h0-9-4" id="h0-9-4" class="i">+focusin(const XEvent *e) {
</a> 	focus(sel);
 }
 
<a href="#h0-10" id="h0-10" class="h">@@ -510,12 +510,11 @@ isprotodel(Client *c) {
</a> }
 
 void
<a href="#h0-10-3" id="h0-10-3" class="d">-keypress(XEvent *e) {
</a><a href="#h0-10-4" id="h0-10-4" class="i">+keypress(const XEvent *e) {
</a><a href="#h0-10-5" id="h0-10-5" class="i">+	const XKeyEvent *ev = &amp;e-&gt;xkey;
</a> 	unsigned int i;
 	KeySym keysym;
<a href="#h0-10-8" id="h0-10-8" class="d">-	XKeyEvent *ev;
</a> 
<a href="#h0-10-10" id="h0-10-10" class="d">-	ev = &amp;e-&gt;xkey;
</a> 	keysym = XKeycodeToKeysym(dpy, (KeyCode)ev-&gt;keycode, 0);
 	for(i = 0; i &lt; LENGTH(keys); i++)
 		if(keysym == keys[i].keysym
<a href="#h0-11" id="h0-11" class="h">@@ -602,9 +601,9 @@ move(const Arg *arg) {
</a> }
 
 void
<a href="#h0-11-3" id="h0-11-3" class="d">-propertynotify(XEvent *e) {
</a><a href="#h0-11-4" id="h0-11-4" class="i">+propertynotify(const XEvent *e) {
</a><a href="#h0-11-5" id="h0-11-5" class="i">+	const XPropertyEvent *ev = &amp;e-&gt;xproperty;
</a> 	Client *c;
<a href="#h0-11-7" id="h0-11-7" class="d">-	XPropertyEvent *ev = &amp;e-&gt;xproperty;
</a> 
 	if(ev-&gt;state != PropertyDelete &amp;&amp; ev-&gt;atom == XA_WM_NAME
 			&amp;&amp; (c = getclient(ev-&gt;window))) {
<a href="#h0-12" id="h0-12" class="h">@@ -613,7 +612,7 @@ propertynotify(XEvent *e) {
</a> }
 
 void
<a href="#h0-12-3" id="h0-12-3" class="d">-reparentnotify(XEvent *e) {
</a><a href="#h0-12-4" id="h0-12-4" class="i">+reparentnotify(const XEvent *e) {
</a> }
 
 void
<a href="#h0-13" id="h0-13" class="h">@@ -761,9 +760,9 @@ unmanage(Client *c) {
</a> }
 
 void
<a href="#h0-13-3" id="h0-13-3" class="d">-unmapnotify(XEvent *e) {
</a><a href="#h0-13-4" id="h0-13-4" class="i">+unmapnotify(const XEvent *e) {
</a><a href="#h0-13-5" id="h0-13-5" class="i">+	const XUnmapEvent *ev = &amp;e-&gt;xunmap;
</a> 	Client *c;
<a href="#h0-13-7" id="h0-13-7" class="d">-	XUnmapEvent *ev = &amp;e-&gt;xunmap;
</a> 
 	if((c = getclient(ev-&gt;window)))
 		unmanage(c);
</pre>
</div>
</body>
</html>
