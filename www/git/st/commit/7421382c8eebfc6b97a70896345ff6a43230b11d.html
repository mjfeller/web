<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>add several patches - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/7421382c8eebfc6b97a70896345ff6a43230b11d.html">7421382c8eebfc6b97a70896345ff6a43230b11d</a>
<b>parent</b> <a href="../commit/ee1dad6d0bb2c84acdde87dc956dc7cd8f7fc14f.html">ee1dad6d0bb2c84acdde87dc956dc7cd8f7fc14f</a>
<b>Author:</b> Mark Feller &lt;<a href="mailto:mfeller@recurly.com">mfeller@recurly.com</a>&gt;
<b>Date:</b>   Mon, 30 Mar 2020 22:44:52 -0600

add several patches

Signed-off-by: Mark Feller &lt;mfeller@recurly.com&gt;

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.def.h</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">st.c</a></td><td> | </td><td class="num">71</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">st.h</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">x.c</a></td><td> | </td><td class="num">56</td><td><span class="i">++++++++++++++++++++++++++++++</span><span class="d">--------------------------</span></td></tr>
</table></pre><pre>4 files changed, 107 insertions(+), 28 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.def.h.html">config.def.h</a> b/<a href="../file/config.def.h.html">config.def.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -5,8 +5,8 @@
</a>  *
  * font: see http://freedesktop.org/software/fontconfig/fontconfig-user.html
  */
<a href="#h0-0-3" id="h0-0-3" class="d">-static char *font = &quot;Fira-11:medium:antialias=true&quot;;
</a><a href="#h0-0-4" id="h0-0-4" class="d">-static int borderpx = 20;
</a><a href="#h0-0-5" id="h0-0-5" class="i">+static char *font = &quot;Fira-10:medium:antialias=true:autohint=true&quot;;
</a><a href="#h0-0-6" id="h0-0-6" class="i">+static int borderpx = 30;
</a> 
 /*
  * What program is execed by st depends of these precedence rules:
<a href="#h0-1" id="h0-1" class="h">@@ -174,6 +174,8 @@ static MouseShortcut mshortcuts[] = {
</a> #define MODKEY Mod1Mask
 #define TERMMOD (ControlMask|ShiftMask)
 
<a href="#h0-1-3" id="h0-1-3" class="i">+static char *copyoutput[] = { &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;st_copyout&quot;, &quot;externalpipe&quot;, NULL };
</a><a href="#h0-1-4" id="h0-1-4" class="i">+
</a> static Shortcut shortcuts[] = {
 	/* mask                 keysym          function        argument */
 	{ XK_ANY_MOD,           XK_Break,       sendbreak,      {.i =  0} },
<a href="#h0-2" id="h0-2" class="h">@@ -190,6 +192,7 @@ static Shortcut shortcuts[] = {
</a> 	{ TERMMOD,              XK_Num_Lock,    numlock,        {.i =  0} },
 	{ ShiftMask,            XK_Page_Up,     kscrollup,      {.i = -1} },
 	{ ShiftMask,            XK_Page_Down,   kscrolldown,    {.i = -1} },
<a href="#h0-2-3" id="h0-2-3" class="i">+	{ MODKEY,               XK_o,           externalpipe,   {.v = copyoutput } },
</a> };
 
 /*
<b>diff --git a/<a id="h1" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -47,6 +47,8 @@
</a> 				term.scr + HISTSIZE + 1) % HISTSIZE] : \
 				term.line[(y) - term.scr])
 
<a href="#h1-0-3" id="h1-0-3" class="i">+#define TLINE_HIST(y)           ((y) &lt;= HISTSIZE-term.row+2 ? term.hist[(y)] : term.line[(y-HISTSIZE+term.row-3)])
</a><a href="#h1-0-4" id="h1-0-4" class="i">+
</a> enum term_mode {
 	MODE_WRAP        = 1 &lt;&lt; 0,
 	MODE_INSERT      = 1 &lt;&lt; 1,
<a href="#h1-1" id="h1-1" class="h">@@ -430,6 +432,19 @@ tlinelen(int y)
</a> 	return i;
 }
 
<a href="#h1-1-3" id="h1-1-3" class="i">+int tlinehistlen(int y)
</a><a href="#h1-1-4" id="h1-1-4" class="i">+{
</a><a href="#h1-1-5" id="h1-1-5" class="i">+	int i = term.col;
</a><a href="#h1-1-6" id="h1-1-6" class="i">+
</a><a href="#h1-1-7" id="h1-1-7" class="i">+	if (TLINE_HIST(y)[i - 1].mode &amp; ATTR_WRAP)
</a><a href="#h1-1-8" id="h1-1-8" class="i">+		return i;
</a><a href="#h1-1-9" id="h1-1-9" class="i">+
</a><a href="#h1-1-10" id="h1-1-10" class="i">+	while (i &gt; 0 &amp;&amp; TLINE_HIST(y)[i - 1].u == &#39; &#39;)
</a><a href="#h1-1-11" id="h1-1-11" class="i">+		--i;
</a><a href="#h1-1-12" id="h1-1-12" class="i">+
</a><a href="#h1-1-13" id="h1-1-13" class="i">+	return i;
</a><a href="#h1-1-14" id="h1-1-14" class="i">+}
</a><a href="#h1-1-15" id="h1-1-15" class="i">+
</a> void
 selstart(int col, int row, int snap)
 {
<a href="#h1-2" id="h1-2" class="h">@@ -2033,6 +2048,62 @@ tprinter(char *s, size_t len)
</a> }
 
 void
<a href="#h1-2-3" id="h1-2-3" class="i">+externalpipe(const Arg *arg)
</a><a href="#h1-2-4" id="h1-2-4" class="i">+{
</a><a href="#h1-2-5" id="h1-2-5" class="i">+	int to[2];
</a><a href="#h1-2-6" id="h1-2-6" class="i">+	char buf[UTF_SIZ];
</a><a href="#h1-2-7" id="h1-2-7" class="i">+	void (*oldsigpipe)(int);
</a><a href="#h1-2-8" id="h1-2-8" class="i">+	Glyph *bp, *end;
</a><a href="#h1-2-9" id="h1-2-9" class="i">+	int lastpos, n, newline;
</a><a href="#h1-2-10" id="h1-2-10" class="i">+
</a><a href="#h1-2-11" id="h1-2-11" class="i">+	if (pipe(to) == -1)
</a><a href="#h1-2-12" id="h1-2-12" class="i">+		return;
</a><a href="#h1-2-13" id="h1-2-13" class="i">+
</a><a href="#h1-2-14" id="h1-2-14" class="i">+	switch (fork()) {
</a><a href="#h1-2-15" id="h1-2-15" class="i">+	case -1:
</a><a href="#h1-2-16" id="h1-2-16" class="i">+		close(to[0]);
</a><a href="#h1-2-17" id="h1-2-17" class="i">+		close(to[1]);
</a><a href="#h1-2-18" id="h1-2-18" class="i">+		return;
</a><a href="#h1-2-19" id="h1-2-19" class="i">+	case 0:
</a><a href="#h1-2-20" id="h1-2-20" class="i">+		dup2(to[0], STDIN_FILENO);
</a><a href="#h1-2-21" id="h1-2-21" class="i">+		close(to[0]);
</a><a href="#h1-2-22" id="h1-2-22" class="i">+		close(to[1]);
</a><a href="#h1-2-23" id="h1-2-23" class="i">+		execvp(((char **)arg-&gt;v)[0], (char **)arg-&gt;v);
</a><a href="#h1-2-24" id="h1-2-24" class="i">+		fprintf(stderr, &quot;st: execvp %s\n&quot;, ((char **)arg-&gt;v)[0]);
</a><a href="#h1-2-25" id="h1-2-25" class="i">+		perror(&quot;failed&quot;);
</a><a href="#h1-2-26" id="h1-2-26" class="i">+		exit(0);
</a><a href="#h1-2-27" id="h1-2-27" class="i">+	}
</a><a href="#h1-2-28" id="h1-2-28" class="i">+
</a><a href="#h1-2-29" id="h1-2-29" class="i">+	close(to[0]);
</a><a href="#h1-2-30" id="h1-2-30" class="i">+	/* ignore sigpipe forn ow, in case child exists early */
</a><a href="#h1-2-31" id="h1-2-31" class="i">+	oldsigpipe = signal(SIGPIPE, SIG_IGN);
</a><a href="#h1-2-32" id="h1-2-32" class="i">+	newline = 0;
</a><a href="#h1-2-33" id="h1-2-33" class="i">+	/* modify externalpipe patch to pipe history too */
</a><a href="#h1-2-34" id="h1-2-34" class="i">+	for (n = 0; n &lt;= HISTSIZE + 2; n++) {
</a><a href="#h1-2-35" id="h1-2-35" class="i">+		bp = TLINE_HIST(n);
</a><a href="#h1-2-36" id="h1-2-36" class="i">+		lastpos = MIN(tlinehistlen(n) +1, term.col) - 1;
</a><a href="#h1-2-37" id="h1-2-37" class="i">+		if (lastpos &lt; 0)
</a><a href="#h1-2-38" id="h1-2-38" class="i">+			break;
</a><a href="#h1-2-39" id="h1-2-39" class="i">+		if (lastpos == 0)
</a><a href="#h1-2-40" id="h1-2-40" class="i">+			continue;
</a><a href="#h1-2-41" id="h1-2-41" class="i">+		end = &amp;bp[lastpos + 1];
</a><a href="#h1-2-42" id="h1-2-42" class="i">+		for (; bp &lt; end; ++bp)
</a><a href="#h1-2-43" id="h1-2-43" class="i">+			if (xwrite(to[1], buf, utf8encode(bp-&gt;u, buf)) &lt; 0)
</a><a href="#h1-2-44" id="h1-2-44" class="i">+				break;
</a><a href="#h1-2-45" id="h1-2-45" class="i">+		if ((newline = TLINE_HIST(n)[lastpos].mode &amp; ATTR_WRAP))
</a><a href="#h1-2-46" id="h1-2-46" class="i">+			continue;
</a><a href="#h1-2-47" id="h1-2-47" class="i">+		if (xwrite(to[1], &quot;\n&quot;, 1) &lt; 0)
</a><a href="#h1-2-48" id="h1-2-48" class="i">+			break;
</a><a href="#h1-2-49" id="h1-2-49" class="i">+		newline = 0;
</a><a href="#h1-2-50" id="h1-2-50" class="i">+	}
</a><a href="#h1-2-51" id="h1-2-51" class="i">+	if (newline)
</a><a href="#h1-2-52" id="h1-2-52" class="i">+		(void)xwrite(to[1], &quot;\n&quot;, 1);
</a><a href="#h1-2-53" id="h1-2-53" class="i">+	close(to[1]);
</a><a href="#h1-2-54" id="h1-2-54" class="i">+	/* restore */
</a><a href="#h1-2-55" id="h1-2-55" class="i">+	signal(SIGPIPE, oldsigpipe);
</a><a href="#h1-2-56" id="h1-2-56" class="i">+}
</a><a href="#h1-2-57" id="h1-2-57" class="i">+
</a><a href="#h1-2-58" id="h1-2-58" class="i">+void
</a> toggleprinter(const Arg *arg)
 {
 	term.mode ^= MODE_PRINT;
<b>diff --git a/<a id="h2" href="../file/st.h.html">st.h</a> b/<a href="../file/st.h.html">st.h</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -81,6 +81,7 @@ void die(const char *, ...);
</a> void redraw(void);
 void draw(void);
 
<a href="#h2-0-3" id="h2-0-3" class="i">+void externalpipe(const Arg *);
</a> void kscrolldown(const Arg *);
 void kscrollup(const Arg *);
 void printscreen(const Arg *);
<b>diff --git a/<a id="h3" href="../file/x.c.html">x.c</a> b/<a href="../file/x.c.html">x.c</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -81,6 +81,7 @@ typedef XftGlyphFontSpec GlyphFontSpec;
</a> typedef struct {
 	int tw, th; /* tty width and height */
 	int w, h; /* window width and height */
<a href="#h3-0-3" id="h3-0-3" class="i">+	int hborderpx, vborderpx;
</a> 	int ch; /* char height */
 	int cw; /* char width  */
 	int mode; /* window state/mode flags */
<a href="#h3-1" id="h3-1" class="h">@@ -330,7 +331,7 @@ ttysend(const Arg *arg)
</a> int
 evcol(XEvent *e)
 {
<a href="#h3-1-3" id="h3-1-3" class="d">-	int x = e-&gt;xbutton.x - borderpx;
</a><a href="#h3-1-4" id="h3-1-4" class="i">+	int x = e-&gt;xbutton.x - win.hborderpx;
</a> 	LIMIT(x, 0, win.tw - 1);
 	return x / win.cw;
 }
<a href="#h3-2" id="h3-2" class="h">@@ -338,7 +339,7 @@ evcol(XEvent *e)
</a> int
 evrow(XEvent *e)
 {
<a href="#h3-2-3" id="h3-2-3" class="d">-	int y = e-&gt;xbutton.y - borderpx;
</a><a href="#h3-2-4" id="h3-2-4" class="i">+	int y = e-&gt;xbutton.y - win.vborderpx;
</a> 	LIMIT(y, 0, win.th - 1);
 	return y / win.ch;
 }
<a href="#h3-3" id="h3-3" class="h">@@ -706,6 +707,9 @@ cresize(int width, int height)
</a> 	col = MAX(1, col);
 	row = MAX(1, row);
 
<a href="#h3-3-3" id="h3-3-3" class="i">+	win.hborderpx = (win.w - col * win.cw) / 2;
</a><a href="#h3-3-4" id="h3-3-4" class="i">+	win.vborderpx = (win.h - row * win.ch) / 2;
</a><a href="#h3-3-5" id="h3-3-5" class="i">+
</a> 	tresize(col, row);
 	xresize(col, row);
 	ttyresize(win.tw, win.th);
<a href="#h3-4" id="h3-4" class="h">@@ -823,8 +827,8 @@ xhints(void)
</a> 	sizeh-&gt;flags = PSize | PResizeInc | PBaseSize | PMinSize;
 	sizeh-&gt;height = win.h;
 	sizeh-&gt;width = win.w;
<a href="#h3-4-3" id="h3-4-3" class="d">-	sizeh-&gt;height_inc = win.ch;
</a><a href="#h3-4-4" id="h3-4-4" class="d">-	sizeh-&gt;width_inc = win.cw;
</a><a href="#h3-4-5" id="h3-4-5" class="i">+	sizeh-&gt;height_inc = 1;
</a><a href="#h3-4-6" id="h3-4-6" class="i">+	sizeh-&gt;width_inc = 1;
</a> 	sizeh-&gt;base_height = 2 * borderpx;
 	sizeh-&gt;base_width = 2 * borderpx;
 	sizeh-&gt;min_height = win.ch + 2 * borderpx;
<a href="#h3-5" id="h3-5" class="h">@@ -1106,8 +1110,8 @@ xinit(int cols, int rows)
</a> 	xloadcols();
 
 	/* adjust fixed window geometry */
<a href="#h3-5-3" id="h3-5-3" class="d">-	win.w = 2 * borderpx + cols * win.cw;
</a><a href="#h3-5-4" id="h3-5-4" class="d">-	win.h = 2 * borderpx + rows * win.ch;
</a><a href="#h3-5-5" id="h3-5-5" class="i">+	win.w = 2 * win.hborderpx + cols * win.cw;
</a><a href="#h3-5-6" id="h3-5-6" class="i">+	win.h = 2 * win.vborderpx + rows * win.ch;
</a> 	if (xw.gm &amp; XNegative)
 		xw.l += DisplayWidth(xw.dpy, xw.scr) - win.w - 2;
 	if (xw.gm &amp; YNegative)
<a href="#h3-6" id="h3-6" class="h">@@ -1195,7 +1199,7 @@ xinit(int cols, int rows)
</a> int
 xmakeglyphfontspecs(XftGlyphFontSpec *specs, const Glyph *glyphs, int len, int x, int y)
 {
<a href="#h3-6-3" id="h3-6-3" class="d">-	float winx = borderpx + x * win.cw, winy = borderpx + y * win.ch, xp, yp;
</a><a href="#h3-6-4" id="h3-6-4" class="i">+	float winx = win.hborderpx + x * win.cw, winy = win.vborderpx + y * win.ch, xp, yp;
</a> 	ushort mode, prevmode = USHRT_MAX;
 	Font *font = &amp;dc.font;
 	int frcflags = FRC_NORMAL;
<a href="#h3-7" id="h3-7" class="h">@@ -1328,7 +1332,7 @@ void
</a> xdrawglyphfontspecs(const XftGlyphFontSpec *specs, Glyph base, int len, int x, int y)
 {
 	int charlen = len * ((base.mode &amp; ATTR_WIDE) ? 2 : 1);
<a href="#h3-7-3" id="h3-7-3" class="d">-	int winx = borderpx + x * win.cw, winy = borderpx + y * win.ch,
</a><a href="#h3-7-4" id="h3-7-4" class="i">+	int winx = win.hborderpx + x * win.cw, winy = win.vborderpx + y * win.ch,
</a> 	    width = charlen * win.cw;
 	Color *fg, *bg, *temp, revfg, revbg, truefg, truebg;
 	XRenderColor colfg, colbg;
<a href="#h3-8" id="h3-8" class="h">@@ -1418,17 +1422,17 @@ xdrawglyphfontspecs(const XftGlyphFontSpec *specs, Glyph base, int len, int x, i
</a> 
 	/* Intelligent cleaning up of the borders. */
 	if (x == 0) {
<a href="#h3-8-3" id="h3-8-3" class="d">-		xclear(0, (y == 0)? 0 : winy, borderpx,
</a><a href="#h3-8-4" id="h3-8-4" class="i">+		xclear(0, (y == 0)? 0 : winy, win.vborderpx,
</a> 			winy + win.ch +
<a href="#h3-8-6" id="h3-8-6" class="d">-			((winy + win.ch &gt;= borderpx + win.th)? win.h : 0));
</a><a href="#h3-8-7" id="h3-8-7" class="i">+			((winy + win.ch &gt;= win.vborderpx + win.th)? win.h : 0));
</a> 	}
<a href="#h3-8-9" id="h3-8-9" class="d">-	if (winx + width &gt;= borderpx + win.tw) {
</a><a href="#h3-8-10" id="h3-8-10" class="i">+	if (winx + width &gt;= win.hborderpx + win.tw) {
</a> 		xclear(winx + width, (y == 0)? 0 : winy, win.w,
<a href="#h3-8-12" id="h3-8-12" class="d">-			((winy + win.ch &gt;= borderpx + win.th)? win.h : (winy + win.ch)));
</a><a href="#h3-8-13" id="h3-8-13" class="i">+			((winy + win.ch &gt;= win.hborderpx + win.th)? win.h : (winy + win.ch)));
</a> 	}
 	if (y == 0)
<a href="#h3-8-16" id="h3-8-16" class="d">-		xclear(winx, 0, winx + width, borderpx);
</a><a href="#h3-8-17" id="h3-8-17" class="d">-	if (winy + win.ch &gt;= borderpx + win.th)
</a><a href="#h3-8-18" id="h3-8-18" class="i">+		xclear(winx, 0, winx + width, win.hborderpx);
</a><a href="#h3-8-19" id="h3-8-19" class="i">+	if (winy + win.ch &gt;= win.vborderpx + win.th)
</a> 		xclear(winx, winy + win.ch, winx + width, win.h);
 
 	/* Clean up the region we want to draw to. */
<a href="#h3-9" id="h3-9" class="h">@@ -1521,35 +1525,35 @@ xdrawcursor(int cx, int cy, Glyph g, int ox, int oy, Glyph og)
</a> 		case 3: /* Blinking Underline */
 		case 4: /* Steady Underline */
 			XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-3" id="h3-9-3" class="d">-					borderpx + cx * win.cw,
</a><a href="#h3-9-4" id="h3-9-4" class="d">-					borderpx + (cy + 1) * win.ch - \
</a><a href="#h3-9-5" id="h3-9-5" class="i">+					win.hborderpx + cx * win.cw,
</a><a href="#h3-9-6" id="h3-9-6" class="i">+					win.vborderpx + (cy + 1) * win.ch - \
</a> 						cursorthickness,
 					win.cw, cursorthickness);
 			break;
 		case 5: /* Blinking bar */
 		case 6: /* Steady bar */
 			XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-13" id="h3-9-13" class="d">-					borderpx + cx * win.cw,
</a><a href="#h3-9-14" id="h3-9-14" class="d">-					borderpx + cy * win.ch,
</a><a href="#h3-9-15" id="h3-9-15" class="i">+					win.hborderpx + cx * win.cw,
</a><a href="#h3-9-16" id="h3-9-16" class="i">+					win.vborderpx + cy * win.ch,
</a> 					cursorthickness, win.ch);
 			break;
 		}
 	} else {
 		XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-22" id="h3-9-22" class="d">-				borderpx + cx * win.cw,
</a><a href="#h3-9-23" id="h3-9-23" class="d">-				borderpx + cy * win.ch,
</a><a href="#h3-9-24" id="h3-9-24" class="i">+				win.hborderpx + cx * win.cw,
</a><a href="#h3-9-25" id="h3-9-25" class="i">+				win.vborderpx + cy * win.ch,
</a> 				win.cw - 1, 1);
 		XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-28" id="h3-9-28" class="d">-				borderpx + cx * win.cw,
</a><a href="#h3-9-29" id="h3-9-29" class="d">-				borderpx + cy * win.ch,
</a><a href="#h3-9-30" id="h3-9-30" class="i">+				win.hborderpx + cx * win.cw,
</a><a href="#h3-9-31" id="h3-9-31" class="i">+				win.vborderpx + cy * win.ch,
</a> 				1, win.ch - 1);
 		XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-34" id="h3-9-34" class="d">-				borderpx + (cx + 1) * win.cw - 1,
</a><a href="#h3-9-35" id="h3-9-35" class="d">-				borderpx + cy * win.ch,
</a><a href="#h3-9-36" id="h3-9-36" class="i">+				win.hborderpx + (cx + 1) * win.cw - 1,
</a><a href="#h3-9-37" id="h3-9-37" class="i">+				win.vborderpx + cy * win.ch,
</a> 				1, win.ch - 1);
 		XftDrawRect(xw.draw, &amp;drawcol,
<a href="#h3-9-40" id="h3-9-40" class="d">-				borderpx + cx * win.cw,
</a><a href="#h3-9-41" id="h3-9-41" class="d">-				borderpx + (cy + 1) * win.ch - 1,
</a><a href="#h3-9-42" id="h3-9-42" class="i">+				win.hborderpx + cx * win.cw,
</a><a href="#h3-9-43" id="h3-9-43" class="i">+				win.vborderpx + (cy + 1) * win.ch - 1,
</a> 				win.cw, 1);
 	}
 }
</pre>
</div>
</body>
</html>
