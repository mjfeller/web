<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Making rectangular selection work again. - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/4b17dddb104bd2ac87dd6e334aafd325197c1407.html">4b17dddb104bd2ac87dd6e334aafd325197c1407</a>
<b>parent</b> <a href="../commit/55adf0aad1d5acf0b9a00e2a9f834cef8b61b3b3.html">55adf0aad1d5acf0b9a00e2a9f834cef8b61b3b3</a>
<b>Author:</b> Christoph Lohmann &lt;<a href="mailto:20h@r-36.net">20h@r-36.net</a>&gt;
<b>Date:</b>   Wed, 20 Mar 2013 21:19:28 +0100

Making rectangular selection work again.

People sending me patches against strange revisions and basing on their own
revisions make me having to reapply them. Then such errors appear.

Thanks Alexander Sedov &lt;alex0player@gmail.com&gt; for noticing this.

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">5</td><td><span class="i">+</span><span class="d">----</span></td></tr>
</table></pre><pre>1 file changed, 1 insertion(+), 4 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -649,13 +649,10 @@ selected(int x, int y) {
</a> 	if(sel.ey == y &amp;&amp; sel.by == y) {
 		bx = MIN(sel.bx, sel.ex);
 		ex = MAX(sel.bx, sel.ex);
<a href="#h0-0-3" id="h0-0-3" class="i">+
</a> 		return BETWEEN(x, bx, ex);
 	}
 
<a href="#h0-0-7" id="h0-0-7" class="d">-	return ((sel.b.y &lt; y &amp;&amp; y &lt; sel.e.y)
</a><a href="#h0-0-8" id="h0-0-8" class="d">-			|| (y == sel.e.y &amp;&amp; x &lt;= sel.e.x))
</a><a href="#h0-0-9" id="h0-0-9" class="d">-			|| (y == sel.b.y &amp;&amp; x &gt;= sel.b.x
</a><a href="#h0-0-10" id="h0-0-10" class="d">-				&amp;&amp; (x &lt;= sel.e.x || sel.b.y != sel.e.y));
</a> 	switch(sel.type) {
 	case SEL_REGULAR:
 		return ((sel.b.y &lt; y &amp;&amp; y &lt; sel.e.y)
</pre>
</div>
</body>
</html>
