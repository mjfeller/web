<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Prevent resizing stdin - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/d60ee7337b5f378d8858ef3774c5552d2c8e54fa.html">d60ee7337b5f378d8858ef3774c5552d2c8e54fa</a>
<b>parent</b> <a href="../commit/ef1dc9fc4bdfcd944b054c329bb5d51b8c52eb5c.html">ef1dc9fc4bdfcd944b054c329bb5d51b8c52eb5c</a>
<b>Author:</b> Eon S. Jeon &lt;<a href="mailto:esjeon@hyunmu.am">esjeon@hyunmu.am</a>&gt;
<b>Date:</b>   Tue, 17 Dec 2013 12:45:38 -0500

Prevent resizing stdin

This fixes a bug that the parent tty gets resized whenever you launch
st through command line.

The problem was that ioctl was resizing cmdfd before it gets
initialized in ttynew. Since cmdfd is a global variable, its initial
value is 0, and consequently stdin was being resized.

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
</table></pre><pre>1 file changed, 1 insertion(+), 1 deletion(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -3667,11 +3667,11 @@ run(void) {
</a> 		}
 	}
 
<a href="#h0-0-3" id="h0-0-3" class="i">+	ttynew();
</a> 	if(!xw.isfixed)
 		cresize(w, h);
 	else
 		cresize(xw.fw, xw.fh);
<a href="#h0-0-8" id="h0-0-8" class="d">-	ttynew();
</a> 
 	gettimeofday(&amp;lastblink, NULL);
 	gettimeofday(&amp;last, NULL);
</pre>
</div>
</body>
</html>
