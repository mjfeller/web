<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>The xinit() call needs to be behind all the tty init, otherwise all the - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/055a4f6d2cc727cc58509a39e130bdd8dbfa452b.html">055a4f6d2cc727cc58509a39e130bdd8dbfa452b</a>
<b>parent</b> <a href="../commit/e9c677816c0161a6702dabb244bd2fd918dcb0af.html">e9c677816c0161a6702dabb244bd2fd918dcb0af</a>
<b>Author:</b> Christoph Lohmann &lt;<a href="mailto:20h@r-36.net">20h@r-36.net</a>&gt;
<b>Date:</b>   Mon, 24 Sep 2012 11:04:26 +0200

The xinit() call needs to be behind all the tty init, otherwise all the

allocated structures are wrong. The xclear() is now done on purpose. Please
keep X11 calls out of the way of pure tty-related calls.
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">5</td><td><span class="i">+++</span><span class="d">--</span></td></tr>
</table></pre><pre>1 file changed, 3 insertions(+), 2 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -953,7 +953,7 @@ treset(void) {
</a> 		term.tabs[i] = 1;
 	term.top = 0, term.bot = term.row - 1;
 	term.mode = MODE_WRAP;
<a href="#h0-0-3" id="h0-0-3" class="d">-	xclear(0, 0, xw.w, xw.h);
</a><a href="#h0-0-4" id="h0-0-4" class="i">+
</a> 	tclearregion(0, 0, term.col-1, term.row-1);
 }
 
<a href="#h0-1" id="h0-1" class="h">@@ -1728,6 +1728,7 @@ tputc(char *c) {
</a> 			case &#39;c&#39;: /* RIS -- Reset to inital state */
 				treset();
 				term.esc = 0;
<a href="#h0-1-3" id="h0-1-3" class="i">+				xclear(0, 0, xw.w, xw.h);
</a> 				xresettitle();
 				break;
 			case &#39;=&#39;: /* DECPAM -- Application keypad */
<a href="#h0-2" id="h0-2" class="h">@@ -2456,9 +2457,9 @@ main(int argc, char *argv[]) {
</a> 
  run:
 	setlocale(LC_CTYPE, &quot;&quot;);
<a href="#h0-2-3" id="h0-2-3" class="d">-	xinit();
</a> 	tnew(80, 24);
 	ttynew();
<a href="#h0-2-6" id="h0-2-6" class="i">+	xinit();
</a> 	selinit();
 	run();
 	return 0;
</pre>
</div>
</body>
</html>
