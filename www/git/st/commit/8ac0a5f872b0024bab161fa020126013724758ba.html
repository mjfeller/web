<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Add bracketed paste mode - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/8ac0a5f872b0024bab161fa020126013724758ba.html">8ac0a5f872b0024bab161fa020126013724758ba</a>
<b>parent</b> <a href="../commit/eae31a532e1c3249abe3fe0dbce286cac263832f.html">eae31a532e1c3249abe3fe0dbce286cac263832f</a>
<b>Author:</b> Egmont Koblinger &lt;<a href="mailto:egmont@gmail.com">egmont@gmail.com</a>&gt;
<b>Date:</b>   Mon, 23 Sep 2013 09:22:47 +0200

Add bracketed paste mode

This patch enables bracketed paste mode (
http://invisible-island.net/xterm/ctlseqs/ctlseqs.html#Bracketed%20Paste%20Mode
).

It&#39;s mainly useful for text editors to disable line wrapping and auto
indentation when text is being pasted, rather than typed from keyboard.

On the emulator side, it is supported by at least xterm, urxvt,
gnome-terminal, putty, iterm2; and I have a patch for konsole.

On the application side, vim can be configured easily to handle this, and
I have pending patches for mcedit and joe. Probably many others also
support it.

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">8</td><td><span class="i">++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>1 file changed, 8 insertions(+), 0 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -132,6 +132,7 @@ enum term_mode {
</a> 	MODE_FOCUS       = 65536,
 	MODE_MOUSEX10    = 131072,
 	MODE_MOUSEMANY   = 262144,
<a href="#h0-0-3" id="h0-0-3" class="i">+	MODE_BRCKTPASTE  = 524288,
</a> 	MODE_MOUSE       = MODE_MOUSEBTN|MODE_MOUSEMOTION|MODE_MOUSEX10\
 	                  |MODE_MOUSEMANY,
 };
<a href="#h0-1" id="h0-1" class="h">@@ -1013,7 +1014,11 @@ selnotify(XEvent *e) {
</a> 			*repl++ = &#39;\r&#39;;
 		}
 
<a href="#h0-1-3" id="h0-1-3" class="i">+		if(IS_SET(MODE_BRCKTPASTE))
</a><a href="#h0-1-4" id="h0-1-4" class="i">+			ttywrite(&quot;\033[200~&quot;, 6);
</a> 		ttywrite((const char *)data, nitems * format / 8);
<a href="#h0-1-6" id="h0-1-6" class="i">+		if(IS_SET(MODE_BRCKTPASTE))
</a><a href="#h0-1-7" id="h0-1-7" class="i">+			ttywrite(&quot;\033[201~&quot;, 6);
</a> 		XFree(data);
 		/* number of 32-bit chunks returned */
 		ofs += nitems * format / 32;
<a href="#h0-2" id="h0-2" class="h">@@ -1868,6 +1873,9 @@ tsetmode(bool priv, bool set, int *args, int narg) {
</a> 			case 1048:
 				tcursor((set) ? CURSOR_SAVE : CURSOR_LOAD);
 				break;
<a href="#h0-2-3" id="h0-2-3" class="i">+			case 2004: /* 2004: bracketed paste mode */
</a><a href="#h0-2-4" id="h0-2-4" class="i">+				MODBIT(term.mode, set, MODE_BRCKTPASTE);
</a><a href="#h0-2-5" id="h0-2-5" class="i">+				break;
</a> 			/* Not implemented mouse modes. See comments there. */
 			case 1001: /* mouse highlight mode; can hang the
 				      terminal by design when implemented. */
</pre>
</div>
</body>
</html>
