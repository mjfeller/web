<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Trim trailing whitespaces in every selection case - st - simple terminal
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st</h1><span class="desc">simple terminal
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/09f5d98251469070b76f3911cc6a83d977871656.html">09f5d98251469070b76f3911cc6a83d977871656</a>
<b>parent</b> <a href="../commit/4418939dd9f3a7b3cfd3071234ed18ae86538f2a.html">4418939dd9f3a7b3cfd3071234ed18ae86538f2a</a>
<b>Author:</b> Ivan Delalande &lt;<a href="mailto:colona@ycc.fr">colona@ycc.fr</a>&gt;
<b>Date:</b>   Sun, 16 Nov 2014 09:02:57 +0100

Trim trailing whitespaces in every selection case

Trailing whitespaces are trimmed when copying from normal selection and
rectangular selection on lines that have their last character included
or on the left of the selection. It leads to inconsistent behaviors when
copying the exact same text from the left and right window in
applications with vertical splits.
This patch solves this issue by always trimming the selection.

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
</table></pre><pre>1 file changed, 2 insertions(+), 0 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -947,6 +947,8 @@ getsel(void) {
</a> 			lastx = (sel.ne.y == y) ? sel.ne.x : term.col-1;
 		}
 		last = &amp;term.line[y][MIN(lastx, linelen-1)];
<a href="#h0-0-3" id="h0-0-3" class="i">+		while(last &gt;= gp &amp;&amp; last-&gt;c[0] == &#39; &#39;)
</a><a href="#h0-0-4" id="h0-0-4" class="i">+			--last;
</a> 
 		for( ; gp &lt;= last; ++gp) {
 			if(gp-&gt;mode &amp; ATTR_WDUMMY)
</pre>
</div>
</body>
</html>
