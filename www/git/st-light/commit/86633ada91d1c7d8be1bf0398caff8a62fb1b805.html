<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>patch for bell in st - st-light - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st-light Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st-light</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/86633ada91d1c7d8be1bf0398caff8a62fb1b805.html">86633ada91d1c7d8be1bf0398caff8a62fb1b805</a>
<b>parent</b> <a href="../commit/dcfe505d3c97506918d5aff24ab62e17e5f58fdb.html">dcfe505d3c97506918d5aff24ab62e17e5f58fdb</a>
<b>Author:</b> CustaiCo &lt;<a href="mailto:custaico@openmailbox.org">custaico@openmailbox.org</a>&gt;
<b>Date:</b>   Fri,  3 Oct 2014 19:25:21 +0000

patch for bell in st

The XBell() call currently used when a bell is recieved sends a message
to the X server, but if the X server doesn&#39;t know how to sound it,
it just gets ignored and I have not been able to find anywhere in x.org&#39;s
code a way to configure the action that the server does.

However, if you use XkbBell() then you can have a process listening for
the XkbBellNotifyEvent that is produced and either alert you visually or
play an audio file or whatever you want as your notification. You have
to include one more header file but the function seems to be compiled as
part of Xlib, at least on my installation.

CustaiCo

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
</table></pre><pre>1 file changed, 2 insertions(+), 1 deletion(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -27,6 +27,7 @@
</a> #include &lt;X11/cursorfont.h&gt;
 #include &lt;X11/keysym.h&gt;
 #include &lt;X11/Xft/Xft.h&gt;
<a href="#h0-0-3" id="h0-0-3" class="i">+#include &lt;X11/XKBlib.h&gt;
</a> #include &lt;fontconfig/fontconfig.h&gt;
 #include &lt;wchar.h&gt;
 
<a href="#h0-1" id="h0-1" class="h">@@ -2423,7 +2424,7 @@ tcontrolcode(uchar ascii) {
</a> 			if(!(xw.state &amp; WIN_FOCUSED))
 				xseturgency(1);
 			if (bellvolume)
<a href="#h0-1-3" id="h0-1-3" class="d">-				XBell(xw.dpy, bellvolume);
</a><a href="#h0-1-4" id="h0-1-4" class="i">+				XkbBell(xw.dpy, xw.win, bellvolume, (Atom)NULL);
</a> 		}
 		break;
 	case &#39;\033&#39;: /* ESC */
</pre>
</div>
</body>
</html>
