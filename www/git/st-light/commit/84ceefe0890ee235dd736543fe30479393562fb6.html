<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fix st with input method. - st-light - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st-light Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st-light</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/84ceefe0890ee235dd736543fe30479393562fb6.html">84ceefe0890ee235dd736543fe30479393562fb6</a>
<b>parent</b> <a href="../commit/b5d0a13c10ab6ba6121c5fa67b9f20c8d41de349.html">b5d0a13c10ab6ba6121c5fa67b9f20c8d41de349</a>
<b>Author:</b> Weng Xuetian &lt;<a href="mailto:wengxt@gmail.com">wengxt@gmail.com</a>&gt;
<b>Date:</b>   Wed, 16 Jul 2014 18:36:46 -0400

Fix st with input method.

XFilterEvent need to be called against every event, otherwise it would
missing some message in the xim protocol and misbehave on some im server.

Signed-off-by: Roberto E. Vargas Caballero &lt;k0ga@shike2.com&gt;

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
</table></pre><pre>1 file changed, 2 insertions(+), 0 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -3786,6 +3786,8 @@ run(void) {
</a> 	/* Waiting for window mapping */
 	while(1) {
 		XNextEvent(xw.dpy, &amp;ev);
<a href="#h0-0-3" id="h0-0-3" class="i">+		if(XFilterEvent(&amp;ev, None))
</a><a href="#h0-0-4" id="h0-0-4" class="i">+			continue;
</a> 		if(ev.type == ConfigureNotify) {
 			w = ev.xconfigure.width;
 			h = ev.xconfigure.height;
</pre>
</div>
</body>
</html>
