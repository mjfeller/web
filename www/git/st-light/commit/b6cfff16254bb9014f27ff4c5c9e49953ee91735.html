<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Clear X window in tsetreset() - st-light - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st-light Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st-light</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/b6cfff16254bb9014f27ff4c5c9e49953ee91735.html">b6cfff16254bb9014f27ff4c5c9e49953ee91735</a>
<b>parent</b> <a href="../commit/21a0c4a2e08ede1d04c472497db7d9aef644d00c.html">21a0c4a2e08ede1d04c472497db7d9aef644d00c</a>
<b>Author:</b> Roberto E. Vargas Caballero &lt;<a href="mailto:k0ga@shike2.com">k0ga@shike2.com</a>&gt;
<b>Date:</b>   Mon, 24 Sep 2012 10:26:50 +0200

Clear X window in tsetreset()

tsetreset() is called when it is necessary a full initialization of the
terminal, so it also should clean the full X window and not only the
terminal content. It is necessary change the order of the
initialization in main(), and put xinit before of tnew(), because tnew()
calls to tsetreset(), and  this can cause a call to xreset() with
incorrect values.
---
 st.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
</table></pre><pre>1 file changed, 2 insertions(+), 1 deletion(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -952,6 +952,7 @@ treset(void) {
</a> 		term.tabs[i] = 1;
 	term.top = 0, term.bot = term.row - 1;
 	term.mode = MODE_WRAP;
<a href="#h0-0-3" id="h0-0-3" class="i">+	xclear(0, 0, xw.w, xw.h);
</a> 	tclearregion(0, 0, term.col-1, term.row-1);
 }
 
<a href="#h0-1" id="h0-1" class="h">@@ -2433,9 +2434,9 @@ main(int argc, char *argv[]) {
</a> 
  run:
 	setlocale(LC_CTYPE, &quot;&quot;);
<a href="#h0-1-3" id="h0-1-3" class="i">+	xinit();
</a> 	tnew(80, 24);
 	ttynew();
<a href="#h0-1-6" id="h0-1-6" class="d">-	xinit();
</a> 	selinit();
 	run();
 	return 0;
</pre>
</div>
</body>
</html>
