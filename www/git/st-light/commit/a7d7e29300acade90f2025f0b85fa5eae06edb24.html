<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ignore all control characters not handled - st-light - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st-light Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st-light</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/a7d7e29300acade90f2025f0b85fa5eae06edb24.html">a7d7e29300acade90f2025f0b85fa5eae06edb24</a>
<b>parent</b> <a href="../commit/375b6e5b175ce0a01d47288e94e9c4a8acc3939a.html">375b6e5b175ce0a01d47288e94e9c4a8acc3939a</a>
<b>Author:</b> Roberto E. Vargas Caballero &lt;<a href="mailto:k0ga@shike2.com">k0ga@shike2.com</a>&gt;
<b>Date:</b>   Wed, 26 Sep 2012 20:53:46 +0200

Ignore all control characters not handled

Taken from vt100 programmer manual:

	Control characters have values of \000 - \037, and \177. The control
	characters recognized by the VT100 are shown in Table 3-10. All
	other control codes cause no action to be taken.

We have to take attention when we are using alternate charset, because in
this cases they are not used as control characters.
---
 st.c |   20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">st.c</a></td><td> | </td><td class="num">20</td><td><span class="i">++++++++++</span><span class="d">----------</span></td></tr>
</table></pre><pre>1 file changed, 10 insertions(+), 10 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1663,7 +1663,7 @@ tputtab(bool forward) {
</a> 
 void
 tputc(char *c, int len) {
<a href="#h0-0-3" id="h0-0-3" class="d">-	char ascii = *c;
</a><a href="#h0-0-4" id="h0-0-4" class="i">+	uchar ascii = *c;
</a> 
 	if(iofd != -1)
 		write(iofd, c, len);
<a href="#h0-1" id="h0-1" class="h">@@ -1792,8 +1792,6 @@ tputc(char *c, int len) {
</a> 		if(sel.bx != -1 &amp;&amp; BETWEEN(term.c.y, sel.by, sel.ey))
 			sel.bx = -1;
 		switch(ascii) {
<a href="#h0-1-3" id="h0-1-3" class="d">-		case &#39;\0&#39;: /* padding character, do nothing */
</a><a href="#h0-1-4" id="h0-1-4" class="d">-			break;
</a> 		case &#39;\t&#39;:
 			tputtab(1);
 			break;
<a href="#h0-2" id="h0-2" class="h">@@ -1818,13 +1816,15 @@ tputc(char *c, int len) {
</a> 			term.esc = ESC_START;
 			break;
 		default:
<a href="#h0-2-3" id="h0-2-3" class="d">-			if(IS_SET(MODE_WRAP) &amp;&amp; term.c.state &amp; CURSOR_WRAPNEXT)
</a><a href="#h0-2-4" id="h0-2-4" class="d">-				tnewline(1); /* always go to first col */
</a><a href="#h0-2-5" id="h0-2-5" class="d">-			tsetchar(c);
</a><a href="#h0-2-6" id="h0-2-6" class="d">-			if(term.c.x+1 &lt; term.col)
</a><a href="#h0-2-7" id="h0-2-7" class="d">-				tmoveto(term.c.x+1, term.c.y);
</a><a href="#h0-2-8" id="h0-2-8" class="d">-			else
</a><a href="#h0-2-9" id="h0-2-9" class="d">-				term.c.state |= CURSOR_WRAPNEXT;
</a><a href="#h0-2-10" id="h0-2-10" class="i">+			if(ascii &gt;= &#39;\020&#39; || term.c.attr.mode &amp; ATTR_GFX) {
</a><a href="#h0-2-11" id="h0-2-11" class="i">+				if(IS_SET(MODE_WRAP) &amp;&amp; term.c.state &amp; CURSOR_WRAPNEXT)
</a><a href="#h0-2-12" id="h0-2-12" class="i">+					tnewline(1); /* always go to first col */
</a><a href="#h0-2-13" id="h0-2-13" class="i">+				tsetchar(c);
</a><a href="#h0-2-14" id="h0-2-14" class="i">+				if(term.c.x+1 &lt; term.col)
</a><a href="#h0-2-15" id="h0-2-15" class="i">+					tmoveto(term.c.x+1, term.c.y);
</a><a href="#h0-2-16" id="h0-2-16" class="i">+				else
</a><a href="#h0-2-17" id="h0-2-17" class="i">+					term.c.state |= CURSOR_WRAPNEXT;
</a><a href="#h0-2-18" id="h0-2-18" class="i">+			}
</a> 		}
 	}
 }
</pre>
</div>
</body>
</html>
