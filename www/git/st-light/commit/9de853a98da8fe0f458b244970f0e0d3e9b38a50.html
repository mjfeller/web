<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Unboolify st - st-light - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="st-light Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>st-light</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/9de853a98da8fe0f458b244970f0e0d3e9b38a50.html">9de853a98da8fe0f458b244970f0e0d3e9b38a50</a>
<b>parent</b> <a href="../commit/abfad4c4fc69ebb22febfe32677aadd112ce375a.html">abfad4c4fc69ebb22febfe32677aadd112ce375a</a>
<b>Author:</b> FRIGN &lt;<a href="mailto:dev@frign.de">dev@frign.de</a>&gt;
<b>Date:</b>   Wed,  8 Jul 2015 23:56:55 +0200

Unboolify st

This practice proved itself in sbase, ubase and a couple of other
projects.
Also remove the True and False defined in X11 and FcTrue and FcFalse
defined in Fontconfig.

Signed-off-by: Christoph Lohmann &lt;20h@r-36.net&gt;

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.def.h</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">st.c</a></td><td> | </td><td class="num">56</td><td><span class="i">+++++++++++++++++++++++++++</span><span class="d">-----------------------------</span></td></tr>
</table></pre><pre>2 files changed, 28 insertions(+), 30 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.def.h.html">config.def.h</a> b/<a href="../file/config.def.h.html">config.def.h</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -30,7 +30,7 @@ static unsigned int doubleclicktimeout = 300;
</a> static unsigned int tripleclicktimeout = 600;
 
 /* alt screens */
<a href="#h0-0-3" id="h0-0-3" class="d">-static bool allowaltscreen = true;
</a><a href="#h0-0-4" id="h0-0-4" class="i">+static int allowaltscreen = 1;
</a> 
 /* frames per second st should at maximum draw to the screen */
 static unsigned int xfps = 120;
<b>diff --git a/<a id="h1" href="../file/st.c.html">st.c</a> b/<a href="../file/st.c.html">st.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -6,7 +6,6 @@
</a> #include &lt;locale.h&gt;
 #include &lt;pwd.h&gt;
 #include &lt;stdarg.h&gt;
<a href="#h1-0-3" id="h1-0-3" class="d">-#include &lt;stdbool.h&gt;
</a> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
<a href="#h1-1" id="h1-1" class="h">@@ -231,7 +230,7 @@ typedef struct {
</a> 	int col;      /* nb col */
 	Line *line;   /* screen */
 	Line *alt;    /* alternate screen */
<a href="#h1-1-3" id="h1-1-3" class="d">-	bool *dirty;  /* dirtyness of lines */
</a><a href="#h1-1-4" id="h1-1-4" class="i">+	int *dirty;  /* dirtyness of lines */
</a> 	XftGlyphFontSpec *specbuf; /* font spec buffer used for rendering */
 	TCursor c;    /* cursor */
 	int top;      /* top    scroll limit */
<a href="#h1-2" id="h1-2" class="h">@@ -241,8 +240,8 @@ typedef struct {
</a> 	char trantbl[4]; /* charset table translation */
 	int charset;  /* current charset */
 	int icharset; /* selected charset for sequence */
<a href="#h1-2-3" id="h1-2-3" class="d">-	bool numlock; /* lock numbers in keyboard */
</a><a href="#h1-2-4" id="h1-2-4" class="d">-	bool *tabs;
</a><a href="#h1-2-5" id="h1-2-5" class="i">+	int numlock; /* lock numbers in keyboard */
</a><a href="#h1-2-6" id="h1-2-6" class="i">+	int *tabs;
</a> } Term;
 
 /* Purely graphic info */
<a href="#h1-3" id="h1-3" class="h">@@ -258,7 +257,7 @@ typedef struct {
</a> 	Visual *vis;
 	XSetWindowAttributes attrs;
 	int scr;
<a href="#h1-3-3" id="h1-3-3" class="d">-	bool isfixed; /* is fixed geometry? */
</a><a href="#h1-3-4" id="h1-3-4" class="i">+	int isfixed; /* is fixed geometry? */
</a> 	int l, t; /* left and top offset */
 	int gm; /* geometry mask */
 	int tw, th; /* tty width and height */
<a href="#h1-4" id="h1-4" class="h">@@ -302,7 +301,7 @@ typedef struct {
</a> 
 	char *primary, *clipboard;
 	Atom xtarget;
<a href="#h1-4-3" id="h1-4-3" class="d">-	bool alt;
</a><a href="#h1-4-4" id="h1-4-4" class="i">+	int alt;
</a> 	struct timespec tclick1;
 	struct timespec tclick2;
 } Selection;
<a href="#h1-5" id="h1-5" class="h">@@ -403,14 +402,14 @@ static void tsetscroll(int, int);
</a> static void tswapscreen(void);
 static void tsetdirt(int, int);
 static void tsetdirtattr(int);
<a href="#h1-5-3" id="h1-5-3" class="d">-static void tsetmode(bool, bool, int *, int);
</a><a href="#h1-5-4" id="h1-5-4" class="i">+static void tsetmode(int, int, int *, int);
</a> static void tfulldirt(void);
 static void techo(Rune);
 static void tcontrolcode(uchar );
 static void tdectest(char );
 static int32_t tdefcolor(int *, int *, int);
 static void tdeftran(char);
<a href="#h1-5-11" id="h1-5-11" class="d">-static inline bool match(uint, uint);
</a><a href="#h1-5-12" id="h1-5-12" class="i">+static inline int match(uint, uint);
</a> static void ttynew(void);
 static void ttyread(void);
 static void ttyresize(void);
<a href="#h1-6" id="h1-6" class="h">@@ -459,7 +458,7 @@ static void selrequest(XEvent *);
</a> 
 static void selinit(void);
 static void selnormalize(void);
<a href="#h1-6-3" id="h1-6-3" class="d">-static inline bool selected(int, int);
</a><a href="#h1-6-4" id="h1-6-4" class="i">+static inline int selected(int, int);
</a> static char *getsel(void);
 static void selcopy(Time);
 static void selscroll(int, int);
<a href="#h1-7" id="h1-7" class="h">@@ -734,10 +733,10 @@ selnormalize(void) {
</a> 		sel.ne.x = term.col - 1;
 }
 
<a href="#h1-7-3" id="h1-7-3" class="d">-bool
</a><a href="#h1-7-4" id="h1-7-4" class="i">+int
</a> selected(int x, int y) {
 	if(sel.mode == SEL_EMPTY)
<a href="#h1-7-7" id="h1-7-7" class="d">-		return false;
</a><a href="#h1-7-8" id="h1-7-8" class="i">+		return 0;
</a> 
 	if(sel.type == SEL_RECTANGULAR)
 		return BETWEEN(y, sel.nb.y, sel.ne.y)
<a href="#h1-8" id="h1-8" class="h">@@ -751,7 +750,7 @@ selected(int x, int y) {
</a> void
 selsnap(int *x, int *y, int direction) {
 	int newx, newy, xt, yt;
<a href="#h1-8-3" id="h1-8-3" class="d">-	bool delim, prevdelim;
</a><a href="#h1-8-4" id="h1-8-4" class="i">+	int delim, prevdelim;
</a> 	Glyph *gp, *prevgp;
 
 	switch(sel.snap) {
<a href="#h1-9" id="h1-9" class="h">@@ -1143,7 +1142,7 @@ selrequest(XEvent *e) {
</a> 	}
 
 	/* all done, send a notification to the listener */
<a href="#h1-9-3" id="h1-9-3" class="d">-	if(!XSendEvent(xsre-&gt;display, xsre-&gt;requestor, True, 0, (XEvent *) &amp;xev))
</a><a href="#h1-9-4" id="h1-9-4" class="i">+	if(!XSendEvent(xsre-&gt;display, xsre-&gt;requestor, 1, 0, (XEvent *) &amp;xev))
</a> 		fprintf(stderr, &quot;Error sending SelectionNotify event\n&quot;);
 }
 
<a href="#h1-10" id="h1-10" class="h">@@ -1457,7 +1456,7 @@ tfulldirt(void) {
</a> void
 tcursor(int mode) {
 	static TCursor c[2];
<a href="#h1-10-3" id="h1-10-3" class="d">-	bool alt = IS_SET(MODE_ALTSCREEN);
</a><a href="#h1-10-4" id="h1-10-4" class="i">+	int alt = IS_SET(MODE_ALTSCREEN);
</a> 
 	if(mode == CURSOR_SAVE) {
 		c[alt] = term.c;
<a href="#h1-11" id="h1-11" class="h">@@ -1916,9 +1915,9 @@ tsetscroll(int t, int b) {
</a> }
 
 void
<a href="#h1-11-3" id="h1-11-3" class="d">-tsetmode(bool priv, bool set, int *args, int narg) {
</a><a href="#h1-11-4" id="h1-11-4" class="i">+tsetmode(int priv, int set, int *args, int narg) {
</a> 	int *lim, mode;
<a href="#h1-11-6" id="h1-11-6" class="d">-	bool alt;
</a><a href="#h1-11-7" id="h1-11-7" class="i">+	int alt;
</a> 
 	for(lim = args + narg; args &lt; lim; ++args) {
 		if(priv) {
<a href="#h1-12" id="h1-12" class="h">@@ -2684,7 +2683,7 @@ eschandle(uchar ascii) {
</a> void
 tputc(Rune u) {
 	char c[UTF_SIZ];
<a href="#h1-12-3" id="h1-12-3" class="d">-	bool control;
</a><a href="#h1-12-4" id="h1-12-4" class="i">+	int control;
</a> 	int width, len;
 	Glyph *gp;
 
<a href="#h1-13" id="h1-13" class="h">@@ -2808,7 +2807,7 @@ tresize(int col, int row) {
</a> 	int i;
 	int minrow = MIN(row, term.row);
 	int mincol = MIN(col, term.col);
<a href="#h1-13-3" id="h1-13-3" class="d">-	bool *bp;
</a><a href="#h1-13-4" id="h1-13-4" class="i">+	int *bp;
</a> 	TCursor c;
 
 	if(col &lt; 1 || row &lt; 1) {
<a href="#h1-14" id="h1-14" class="h">@@ -2904,7 +2903,7 @@ sixd_to_16bit(int x) {
</a> 	return x == 0 ? 0 : 0x3737 + 0x2828 * x;
 }
 
<a href="#h1-14-3" id="h1-14-3" class="d">-bool
</a><a href="#h1-14-4" id="h1-14-4" class="i">+int
</a> xloadcolor(int i, const char *name, Color *ncolor) {
 	XRenderColor color = { .alpha = 0xffff };
 
<a href="#h1-15" id="h1-15" class="h">@@ -2929,7 +2928,7 @@ xloadcolor(int i, const char *name, Color *ncolor) {
</a> void
 xloadcols(void) {
 	int i;
<a href="#h1-15-3" id="h1-15-3" class="d">-	static bool loaded;
</a><a href="#h1-15-4" id="h1-15-4" class="i">+	static int loaded;
</a> 	Color *cp;
 
 	if(loaded) {
<a href="#h1-16" id="h1-16" class="h">@@ -2944,7 +2943,7 @@ xloadcols(void) {
</a> 			else
 				die(&quot;Could not allocate color %d\n&quot;, i);
 		}
<a href="#h1-16-3" id="h1-16-3" class="d">-	loaded = true;
</a><a href="#h1-16-4" id="h1-16-4" class="i">+	loaded = 1;
</a> }
 
 int
<a href="#h1-17" id="h1-17" class="h">@@ -2998,7 +2997,7 @@ xhints(void) {
</a> 	sizeh-&gt;width_inc = xw.cw;
 	sizeh-&gt;base_height = 2 * borderpx;
 	sizeh-&gt;base_width = 2 * borderpx;
<a href="#h1-17-3" id="h1-17-3" class="d">-	if(xw.isfixed == True) {
</a><a href="#h1-17-4" id="h1-17-4" class="i">+	if(xw.isfixed) {
</a> 		sizeh-&gt;flags |= PMaxSize | PMinSize;
 		sizeh-&gt;min_width = sizeh-&gt;max_width = xw.w;
 		sizeh-&gt;min_height = sizeh-&gt;max_height = xw.h;
<a href="#h1-18" id="h1-18" class="h">@@ -3349,7 +3348,7 @@ xmakeglyphfontspecs(XftGlyphFontSpec *specs, const Glyph *glyphs, int len, int x
</a> 		if(f &gt;= frclen) {
 			if(!font-&gt;set)
 				font-&gt;set = FcFontSort(0, font-&gt;pattern,
<a href="#h1-18-3" id="h1-18-3" class="d">-				                       FcTrue, 0, &amp;fcres);
</a><a href="#h1-18-4" id="h1-18-4" class="i">+				                       1, 0, &amp;fcres);
</a> 			fcsets[0] = font-&gt;set;
 
 			/*
<a href="#h1-19" id="h1-19" class="h">@@ -3365,8 +3364,7 @@ xmakeglyphfontspecs(XftGlyphFontSpec *specs, const Glyph *glyphs, int len, int x
</a> 			FcCharSetAddChar(fccharset, rune);
 			FcPatternAddCharSet(fcpattern, FC_CHARSET,
 					fccharset);
<a href="#h1-19-3" id="h1-19-3" class="d">-			FcPatternAddBool(fcpattern, FC_SCALABLE,
</a><a href="#h1-19-4" id="h1-19-4" class="d">-					FcTrue);
</a><a href="#h1-19-5" id="h1-19-5" class="i">+			FcPatternAddBool(fcpattern, FC_SCALABLE, 1);
</a> 
 			FcConfigSubstitute(0, fcpattern,
 					FcMatchPattern);
<a href="#h1-20" id="h1-20" class="h">@@ -3664,7 +3662,7 @@ drawregion(int x1, int y1, int x2, int y2) {
</a> 	int i, x, y, ox, numspecs;
 	Glyph base, new;
 	XftGlyphFontSpec* specs;
<a href="#h1-20-3" id="h1-20-3" class="d">-	bool ena_sel = sel.ob.x != -1 &amp;&amp; sel.alt == IS_SET(MODE_ALTSCREEN);
</a><a href="#h1-20-4" id="h1-20-4" class="i">+	int ena_sel = sel.ob.x != -1 &amp;&amp; sel.alt == IS_SET(MODE_ALTSCREEN);
</a> 
 	if(!(xw.state &amp; WIN_VISIBLE))
 		return;
<a href="#h1-21" id="h1-21" class="h">@@ -3757,7 +3755,7 @@ focus(XEvent *ev) {
</a> 	}
 }
 
<a href="#h1-21-3" id="h1-21-3" class="d">-bool
</a><a href="#h1-21-4" id="h1-21-4" class="i">+int
</a> match(uint mask, uint state) {
 	return mask == XK_ANY_MOD || mask == (state &amp; ~ignoremod);
 }
<a href="#h1-22" id="h1-22" class="h">@@ -4025,7 +4023,7 @@ main(int argc, char *argv[]) {
</a> 
 	ARGBEGIN {
 	case &#39;a&#39;:
<a href="#h1-22-3" id="h1-22-3" class="d">-		allowaltscreen = false;
</a><a href="#h1-22-4" id="h1-22-4" class="i">+		allowaltscreen = 0;
</a> 		break;
 	case &#39;c&#39;:
 		opt_class = EARGF(usage());
<a href="#h1-23" id="h1-23" class="h">@@ -4042,7 +4040,7 @@ main(int argc, char *argv[]) {
</a> 				&amp;xw.l, &amp;xw.t, &amp;cols, &amp;rows);
 		break;
 	case &#39;i&#39;:
<a href="#h1-23-3" id="h1-23-3" class="d">-		xw.isfixed = True;
</a><a href="#h1-23-4" id="h1-23-4" class="i">+		xw.isfixed = 1;
</a> 		break;
 	case &#39;o&#39;:
 		opt_io = EARGF(usage());
</pre>
</div>
</body>
</html>
